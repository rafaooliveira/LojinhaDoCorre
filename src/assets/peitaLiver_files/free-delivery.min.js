"use strict";!function(){var e=document.querySelector.bind(document),o=window.freedom.nsPubSub,l="data-link-rules",t=".rules-page",r={container:".freeDelivery-container",modal:".freeDelivery-modal",modal_content:".modal-content",gif:".freeDelivery-gif",close:".modal-close"},n=document.querySelector("section[data-free-shipping-by-zipcode]"),i={init:function(){this.events.openModalRules()},helpers:{checkLink:function(){var o=e(r.container).getAttribute(l);null!==o&&""!==o&&i.events.getAjax(o)},hideAll:function(){var e=document.querySelectorAll(".rules-content > article");e.forEach(function(e){e.classList.add("hide")})},showFreeDelivery:function(){document.querySelector('#comboreg [value="frete-gratis"]').selected=!0,document.querySelector("#frete-gratis").classList.remove("hide")}},events:{getAjax:function(e){var o=e,l={displayLoading:!1,method:"get",success:function(e){var o=document.createElement("div");o.innerHTML=e;var l=o,r=l.querySelector(t);i.handlers.render(r)},error:function(){console.log("ERROR | FreeDelivery")}};window.freedom.restClient.request(o,l)},openModalRules:function(){window.freedom.live(r.gif,"click",function(){null!==e(t)?(e(r.modal).classList.remove("hide"),o.pub("overlay.display","show"),document.getElementById("frete-gratis").scrollIntoView(!0)):i.helpers.checkLink()})},closeModalRules:function(){window.freedom.live(r.close,"click",function(){e(r.modal).classList.add("hide"),o.pub("overlay.display","hide")}),window.freedom.live("#overlay","click",function(){e(r.modal).classList.add("hide")})},scrolling:function(){var o,l=e(r.modal).offsetHeight,n=e(t).offsetHeight;e(r.modal).onscroll=function(){l=e(r.modal).offsetHeight,n=e(t).offsetHeight,o=e(r.modal).scrollTop,o+l>n?e(".freeDelivery-modal .modal-top").classList.remove("scroll"):e(".freeDelivery-modal .modal-top").classList.add("scroll")}},changeSelected:function(){window.freedom.live("#comboreg","change",function(o){var l=o.target.value;i.helpers.hideAll(),document.getElementById(l).classList.remove("hide"),e(r.modal).scrollTop=0})}},handlers:{render:function(l){if(null!==l){var t=e(r.modal_content);t&&t.appendChild(l),i.events.closeModalRules(),i.events.scrolling(),window.freedom.isMobile?(e(r.container).classList.add("mb"),i.helpers.hideAll(),i.events.changeSelected(),i.helpers.showFreeDelivery(),e(r.modal).classList.remove("hide")):(o.pub("overlay.display","show"),e(r.modal).classList.remove("hide"),document.getElementById("frete-gratis").scrollIntoView(!0))}}}};try{i.init(),n||"product"!==dataLayer[0].page.pageID.toLowerCase()||document.querySelector(".freeDelivery-container")&&document.querySelector(".freeDelivery-container").classList.remove("hide")}catch(c){console.error("ERROR | FreeDelivery PDP"+c)}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9mcmVlLWRlbGl2ZXJ5LTIvYWxsL2ZyZWUtZGVsaXZlcnkubWluLmpzIl0sIm5hbWVzIjpbIiRxcyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJpbmQiLCJQVUJTVUIiLCJ3aW5kb3ciLCJmcmVlZG9tIiwibnNQdWJTdWIiLCJMSU5LX1JVTEVTIiwiQ09OVEVOVF9SVUxFUyIsIkZSRUVfREVMSVZFUlkiLCJjb250YWluZXIiLCJtb2RhbCIsIm1vZGFsX2NvbnRlbnQiLCJnaWYiLCJjbG9zZSIsIkZSRUVTSElQUElOR19FTkFCTEVEIiwiRnJlZURlbGl2ZXJ5IiwiaW5pdCIsInRoaXMiLCJldmVudHMiLCJvcGVuTW9kYWxSdWxlcyIsImhlbHBlcnMiLCJjaGVja0xpbmsiLCJsaW5rIiwiZ2V0QXR0cmlidXRlIiwiZ2V0QWpheCIsImhpZGVBbGwiLCJhbGxEaXZDb250ZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpdGVtIiwiY2xhc3NMaXN0IiwiYWRkIiwic2hvd0ZyZWVEZWxpdmVyeSIsInNlbGVjdGVkIiwicmVtb3ZlIiwidXJsIiwidXJsUnVsZSIsIm9wdGlvbnMiLCJkaXNwbGF5TG9hZGluZyIsIm1ldGhvZCIsInN1Y2Nlc3MiLCJkYXRhIiwiaHRtbE9iamVjdCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJkb2MiLCJyZXN1bHQiLCJoYW5kbGVycyIsInJlbmRlciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsInJlc3RDbGllbnQiLCJyZXF1ZXN0IiwibGl2ZSIsInB1YiIsImdldEVsZW1lbnRCeUlkIiwic2Nyb2xsSW50b1ZpZXciLCJjbG9zZU1vZGFsUnVsZXMiLCJzY3JvbGxpbmciLCJ0b3RhbFNjcm9sbCIsIm1vZGFsSGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0IiwiZWxlbWVudEhlaWdodCIsIm9uc2Nyb2xsIiwic2Nyb2xsVG9wIiwiY2hhbmdlU2VsZWN0ZWQiLCJlIiwiaXRlbVNlbGVjdGVkIiwidGFyZ2V0IiwidmFsdWUiLCJyZXNwb25zZSIsIiRtb2RhbENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImlzTW9iaWxlIiwiZGF0YUxheWVyIiwicGFnZSIsInBhZ2VJRCIsInRvTG93ZXJDYXNlIiwiZXJyIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUNDLFdBQ0MsR0FBSUEsR0FBTUMsU0FBU0MsY0FBY0MsS0FBS0YsVUFDcENHLEVBQVNDLE9BQU9DLFFBQVFDLFNBQ3hCQyxFQUFhLGtCQUNiQyxFQUFnQixjQUNoQkMsR0FDRUMsVUFBVywwQkFDWEMsTUFBTyxzQkFDUEMsY0FBZSxpQkFDZkMsSUFBSyxvQkFDTEMsTUFBTyxnQkFFVEMsRUFBdUJmLFNBQVNDLGNBQWMsMENBRTVDZSxHQUNGQyxLQUFNLFdBQ0pDLEtBQUtDLE9BQU9DLGtCQUVkQyxTQUtFQyxVQUFXLFdBQ1QsR0FBSUMsR0FBT3hCLEVBQUlVLEVBQWNDLFdBQVdjLGFBQWFqQixFQUN4QyxRQUFUZ0IsR0FBMEIsS0FBVEEsR0FDbkJQLEVBQWFHLE9BQU9NLFFBQVFGLElBR2hDRyxRQUFTLFdBQ1AsR0FBSUMsR0FBZ0IzQixTQUFTNEIsaUJBQWlCLDJCQUM5Q0QsR0FBY0UsUUFBUSxTQUFVQyxHQUM5QkEsRUFBS0MsVUFBVUMsSUFBSSxXQUd2QkMsaUJBQWtCLFdBQ2hCakMsU0FBU0MsY0FBYyxvQ0FBb0NpQyxVQUFXLEVBQ3RFbEMsU0FBU0MsY0FBYyxpQkFBaUI4QixVQUFVSSxPQUFPLFVBRzdEaEIsUUFLRU0sUUFBUyxTQUFVVyxHQUNqQixHQUFJQyxHQUFVRCxFQUVWRSxHQUNGQyxnQkFBZ0IsRUFDaEJDLE9BQVEsTUFFUkMsUUFBUyxTQUFVQyxHQUNqQixHQUFJQyxHQUFhM0MsU0FBUzRDLGNBQWMsTUFDeENELEdBQVdFLFVBQVlILENBQ3ZCLElBQUlJLEdBQU1ILEVBRU5JLEVBQVNELEVBQUk3QyxjQUFjTyxFQUMvQlEsR0FBYWdDLFNBQVNDLE9BQU9GLElBRS9CRyxNQUFPLFdBQ0xDLFFBQVFDLElBQUkseUJBR2hCaEQsUUFBT0MsUUFBUWdELFdBQVdDLFFBQVFqQixFQUFTQyxJQU03Q2xCLGVBQWdCLFdBQ2RoQixPQUFPQyxRQUFRa0QsS0FBSzlDLEVBQWNJLElBQUssUUFBUyxXQUVuQixPQUF2QmQsRUFBSVMsSUFDTlQsRUFBSVUsRUFBY0UsT0FBT29CLFVBQVVJLE9BQU8sUUFDMUNoQyxFQUFPcUQsSUFBSSxrQkFBbUIsUUFDOUJ4RCxTQUFTeUQsZUFBZSxnQkFBZ0JDLGdCQUFlLElBR3ZEMUMsRUFBYUssUUFBUUMsZUFRM0JxQyxnQkFBaUIsV0FFZnZELE9BQU9DLFFBQVFrRCxLQUFLOUMsRUFBY0ssTUFBTyxRQUFTLFdBQ2hEZixFQUFJVSxFQUFjRSxPQUFPb0IsVUFBVUMsSUFBSSxRQUN2QzdCLEVBQU9xRCxJQUFJLGtCQUFtQixVQUdoQ3BELE9BQU9DLFFBQVFrRCxLQUFLLFdBQVksUUFBUyxXQUN2Q3hELEVBQUlVLEVBQWNFLE9BQU9vQixVQUFVQyxJQUFJLFdBTzNDNEIsVUFBVyxXQUNULEdBRUlDLEdBRkFDLEVBQWMvRCxFQUFJVSxFQUFjRSxPQUFPb0QsYUFDdkNDLEVBQWdCakUsRUFBSVMsR0FBZXVELFlBR3ZDaEUsR0FBSVUsRUFBY0UsT0FBT3NELFNBQVcsV0FDbENILEVBQWMvRCxFQUFJVSxFQUFjRSxPQUFPb0QsYUFDdkNDLEVBQWdCakUsRUFBSVMsR0FBZXVELGFBQ25DRixFQUFjOUQsRUFBSVUsRUFBY0UsT0FBT3VELFVBRW5DTCxFQUFjQyxFQUFjRSxFQUM5QmpFLEVBQUksa0NBQWtDZ0MsVUFBVUksT0FBTyxVQUV2RHBDLEVBQUksa0NBQWtDZ0MsVUFBVUMsSUFBSSxZQVExRG1DLGVBQWdCLFdBQ2QvRCxPQUFPQyxRQUFRa0QsS0FBSyxZQUFhLFNBQVUsU0FBVWEsR0FDbkQsR0FBSUMsR0FBZUQsRUFBRUUsT0FBT0MsS0FDNUJ2RCxHQUFhSyxRQUFRSyxVQUNyQjFCLFNBQVN5RCxlQUFlWSxHQUFjdEMsVUFBVUksT0FBTyxRQUN2RHBDLEVBQUlVLEVBQWNFLE9BQU91RCxVQUFZLE1BSTNDbEIsVUFLRUMsT0FBUSxTQUFVdUIsR0FDaEIsR0FBaUIsT0FBYkEsRUFBbUIsQ0FFckIsR0FBSUMsR0FBZ0IxRSxFQUFJVSxFQUFjRyxjQUNsQzZELElBQ0ZBLEVBQWNDLFlBQVlGLEdBRzVCeEQsRUFBYUcsT0FBT3dDLGtCQUNwQjNDLEVBQWFHLE9BQU95QyxZQUdoQnhELE9BQU9DLFFBQVFzRSxVQUNqQjVFLEVBQUlVLEVBQWNDLFdBQVdxQixVQUFVQyxJQUFJLE1BRTNDaEIsRUFBYUssUUFBUUssVUFDckJWLEVBQWFHLE9BQU9nRCxpQkFDcEJuRCxFQUFhSyxRQUFRWSxtQkFHckJsQyxFQUFJVSxFQUFjRSxPQUFPb0IsVUFBVUksT0FBTyxVQUkxQ2hDLEVBQU9xRCxJQUFJLGtCQUFtQixRQUU5QnpELEVBQUlVLEVBQWNFLE9BQU9vQixVQUFVSSxPQUFPLFFBRTFDbkMsU0FBU3lELGVBQWUsZ0JBQWdCQyxnQkFBZSxPQVFqRSxLQUNFMUMsRUFBYUMsT0FHUkYsR0FBbUUsWUFBM0M2RCxVQUFVLEdBQUdDLEtBQUtDLE9BQU9DLGVBQ2hEL0UsU0FBU0MsY0FBYyw0QkFBNEJELFNBQVNDLGNBQWMsMkJBQTJCOEIsVUFBVUksT0FBTyxRQUU1SCxNQUFPNkMsR0FDUDdCLFFBQVFELE1BQU0sMkJBQTZCOEIiLCJmaWxlIjoiX3JlZmFjdG9yaW5nL19jb21wb25lbnRzL2ZyZWUtZGVsaXZlcnktMi9hbGwvZnJlZS1kZWxpdmVyeS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG4oZnVuY3Rpb24gKCkge1xuICB2YXIgJHFzID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKGRvY3VtZW50KSxcbiAgICBQVUJTVUIgPSB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1YixcbiAgICBMSU5LX1JVTEVTID0gJ2RhdGEtbGluay1ydWxlcycsXG4gICAgQ09OVEVOVF9SVUxFUyA9ICcucnVsZXMtcGFnZScsXG4gICAgRlJFRV9ERUxJVkVSWSA9IHtcbiAgICAgIGNvbnRhaW5lcjogJy5mcmVlRGVsaXZlcnktY29udGFpbmVyJyxcbiAgICAgIG1vZGFsOiAnLmZyZWVEZWxpdmVyeS1tb2RhbCcsXG4gICAgICBtb2RhbF9jb250ZW50OiAnLm1vZGFsLWNvbnRlbnQnLFxuICAgICAgZ2lmOiAnLmZyZWVEZWxpdmVyeS1naWYnLFxuICAgICAgY2xvc2U6ICcubW9kYWwtY2xvc2UnXG4gICAgfSxcbiAgICBGUkVFU0hJUFBJTkdfRU5BQkxFRCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb25bZGF0YS1mcmVlLXNoaXBwaW5nLWJ5LXppcGNvZGVdJyk7XG5cbiAgdmFyIEZyZWVEZWxpdmVyeSA9IHtcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmV2ZW50cy5vcGVuTW9kYWxSdWxlcygpO1xuICAgIH0sXG4gICAgaGVscGVyczoge1xuICAgICAgLyoqXG4gICAgICAgKiBbY2hlY2tMaW5rXVxuICAgICAgICogY2hlY2sgaWYgZXhpc3QgbGluayB0byBydWxlc1xuICAgICAgICoqL1xuICAgICAgY2hlY2tMaW5rOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaW5rID0gJHFzKEZSRUVfREVMSVZFUlkuY29udGFpbmVyKS5nZXRBdHRyaWJ1dGUoTElOS19SVUxFUyk7XG4gICAgICAgIGlmIChsaW5rICE9PSBudWxsICYmIGxpbmsgIT09IFwiXCIpIHtcbiAgICAgICAgICBGcmVlRGVsaXZlcnkuZXZlbnRzLmdldEFqYXgobGluayk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBoaWRlQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBhbGxEaXZDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJ1bGVzLWNvbnRlbnQgPiBhcnRpY2xlJyk7XG4gICAgICAgIGFsbERpdkNvbnRlbnQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBzaG93RnJlZURlbGl2ZXJ5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb21ib3JlZyBbdmFsdWU9XCJmcmV0ZS1ncmF0aXNcIl0nKS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmcmV0ZS1ncmF0aXMnKS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfSxcbiAgICBldmVudHM6IHtcbiAgICAgIC8qKlxuICAgICAgICogW2dldEFqYXhdXG4gICAgICAgKiBhamF4IHRvIGdldCBjb250ZW50IGZyb20gcmVndWxhdGlvbnNcbiAgICAgICAqKi9cbiAgICAgIGdldEFqYXg6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIHVybFJ1bGUgPSB1cmw7XG5cbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgZGlzcGxheUxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIG1ldGhvZDogJ2dldCcsXG5cbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGh0bWxPYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGh0bWxPYmplY3QuaW5uZXJIVE1MID0gZGF0YTtcbiAgICAgICAgICAgIHZhciBkb2MgPSBodG1sT2JqZWN0O1xuXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZG9jLnF1ZXJ5U2VsZWN0b3IoQ09OVEVOVF9SVUxFUyk7XG4gICAgICAgICAgICBGcmVlRGVsaXZlcnkuaGFuZGxlcnMucmVuZGVyKHJlc3VsdCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SIHwgRnJlZURlbGl2ZXJ5Jyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgd2luZG93LmZyZWVkb20ucmVzdENsaWVudC5yZXF1ZXN0KHVybFJ1bGUsIG9wdGlvbnMpO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogW29wZW5Nb2RhbFJ1bGVzXVxuICAgICAgICogb3BlbiBtb2RhbFxuICAgICAgICoqL1xuICAgICAgb3Blbk1vZGFsUnVsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20ubGl2ZShGUkVFX0RFTElWRVJZLmdpZiwgJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vQUxURVJBUiBTRUxFVE9SXG4gICAgICAgICAgaWYgKCRxcyhDT05URU5UX1JVTEVTKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgJHFzKEZSRUVfREVMSVZFUlkubW9kYWwpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgICAgIFBVQlNVQi5wdWIoJ292ZXJsYXkuZGlzcGxheScsICdzaG93Jyk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyZXRlLWdyYXRpc1wiKS5zY3JvbGxJbnRvVmlldyh0cnVlKTtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBGcmVlRGVsaXZlcnkuaGVscGVycy5jaGVja0xpbmsoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogW2Nsb3NlTW9kYWxSdWxlc11cbiAgICAgICAqIGNsb3NlIG1vZGFsXG4gICAgICAgKiovXG4gICAgICBjbG9zZU1vZGFsUnVsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYnQgY2xvc2VcbiAgICAgICAgd2luZG93LmZyZWVkb20ubGl2ZShGUkVFX0RFTElWRVJZLmNsb3NlLCAnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHFzKEZSRUVfREVMSVZFUlkubW9kYWwpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgICBQVUJTVUIucHViKCdvdmVybGF5LmRpc3BsYXknLCAnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gb3ZlcmxheVxuICAgICAgICB3aW5kb3cuZnJlZWRvbS5saXZlKCcjb3ZlcmxheScsICdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAkcXMoRlJFRV9ERUxJVkVSWS5tb2RhbCkuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFtzY3JvbGxpbmddXG4gICAgICAgKiBjaGVjayBpZiBzY3JvbGwgaGFzIHJlYWNoZWQgdGhlIGJvdHRvbVxuICAgICAgICoqL1xuICAgICAgc2Nyb2xsaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtb2RhbEhlaWdodCA9ICRxcyhGUkVFX0RFTElWRVJZLm1vZGFsKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHZhciBlbGVtZW50SGVpZ2h0ID0gJHFzKENPTlRFTlRfUlVMRVMpLm9mZnNldEhlaWdodDtcbiAgICAgICAgdmFyIHRvdGFsU2Nyb2xsO1xuXG4gICAgICAgICRxcyhGUkVFX0RFTElWRVJZLm1vZGFsKS5vbnNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBtb2RhbEhlaWdodCA9ICRxcyhGUkVFX0RFTElWRVJZLm1vZGFsKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgZWxlbWVudEhlaWdodCA9ICRxcyhDT05URU5UX1JVTEVTKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgdG90YWxTY3JvbGwgPSAkcXMoRlJFRV9ERUxJVkVSWS5tb2RhbCkuc2Nyb2xsVG9wO1xuXG4gICAgICAgICAgaWYgKHRvdGFsU2Nyb2xsICsgbW9kYWxIZWlnaHQgPiBlbGVtZW50SGVpZ2h0KSB7XG4gICAgICAgICAgICAkcXMoJy5mcmVlRGVsaXZlcnktbW9kYWwgLm1vZGFsLXRvcCcpLmNsYXNzTGlzdC5yZW1vdmUoJ3Njcm9sbCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkcXMoJy5mcmVlRGVsaXZlcnktbW9kYWwgLm1vZGFsLXRvcCcpLmNsYXNzTGlzdC5hZGQoJ3Njcm9sbCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFtmb3IgbW9iaWxlXVtjaGFuZ2VTZWxlY3RlZF1cbiAgICAgICAqIGV2ZW50IHRvIGNoYW5nZSBpdGVtIHNlbGVjdGVkXG4gICAgICAgKiovXG4gICAgICBjaGFuZ2VTZWxlY3RlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW5kb3cuZnJlZWRvbS5saXZlKCcjY29tYm9yZWcnLCAnY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgaXRlbVNlbGVjdGVkID0gZS50YXJnZXQudmFsdWU7XG4gICAgICAgICAgRnJlZURlbGl2ZXJ5LmhlbHBlcnMuaGlkZUFsbCgpO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGl0ZW1TZWxlY3RlZCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgICRxcyhGUkVFX0RFTElWRVJZLm1vZGFsKS5zY3JvbGxUb3AgPSAwO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZXJzOiB7XG4gICAgICAvKipcbiAgICAgICAqIFtyZW5kZXJdXG4gICAgICAgKiBhcHBlbmQgY29udGVudCBvZiBydWxlc1xuICAgICAgICoqL1xuICAgICAgcmVuZGVyOiBmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlICE9PSBudWxsKSB7XG4gICAgICAgICAgLy8gYXBwZW5kIGNvbnRlbnQgdG8gbW9kYWxcbiAgICAgICAgICB2YXIgJG1vZGFsQ29udGVudCA9ICRxcyhGUkVFX0RFTElWRVJZLm1vZGFsX2NvbnRlbnQpO1xuICAgICAgICAgIGlmICgkbW9kYWxDb250ZW50KSB7XG4gICAgICAgICAgICAkbW9kYWxDb250ZW50LmFwcGVuZENoaWxkKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBGcmVlRGVsaXZlcnkuZXZlbnRzLmNsb3NlTW9kYWxSdWxlcygpO1xuICAgICAgICAgIEZyZWVEZWxpdmVyeS5ldmVudHMuc2Nyb2xsaW5nKCk7XG5cbiAgICAgICAgICAvLyBNb2JpbGVcbiAgICAgICAgICBpZiAod2luZG93LmZyZWVkb20uaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICRxcyhGUkVFX0RFTElWRVJZLmNvbnRhaW5lcikuY2xhc3NMaXN0LmFkZCgnbWInKTtcblxuICAgICAgICAgICAgRnJlZURlbGl2ZXJ5LmhlbHBlcnMuaGlkZUFsbCgpO1xuICAgICAgICAgICAgRnJlZURlbGl2ZXJ5LmV2ZW50cy5jaGFuZ2VTZWxlY3RlZCgpO1xuICAgICAgICAgICAgRnJlZURlbGl2ZXJ5LmhlbHBlcnMuc2hvd0ZyZWVEZWxpdmVyeSgpO1xuXG4gICAgICAgICAgICAvLyBzaG93IG1vZGFsXG4gICAgICAgICAgICAkcXMoRlJFRV9ERUxJVkVSWS5tb2RhbCkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEZXNrdG9wXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBQVUJTVUIucHViKCdvdmVybGF5LmRpc3BsYXknLCAnc2hvdycpO1xuICAgICAgICAgICAgLy8gc2hvdyBtb2RhbFxuICAgICAgICAgICAgJHFzKEZSRUVfREVMSVZFUlkubW9kYWwpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgICAgICAgIC8vIHNjcm9sbCB0byBmcmV0ZVxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmcmV0ZS1ncmF0aXNcIikuc2Nyb2xsSW50b1ZpZXcodHJ1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vSW5pdGlhbGl6ZVxuICB0cnkge1xuICAgIEZyZWVEZWxpdmVyeS5pbml0KCk7XG5cbiAgICAvLyBJZiBGcmVlIFNoaXBwaW5nIG5vdCBlbmFibGVkLCB3aWxsIHJlbW92ZSB0aGUgY2xhc3MgJ2hpZGUnIGZyb20gZGVmYXVsdCBzdGFtcFxuICAgIGlmICghRlJFRVNISVBQSU5HX0VOQUJMRUQgJiYgZGF0YUxheWVyWzBdLnBhZ2UucGFnZUlELnRvTG93ZXJDYXNlKCkgPT09ICdwcm9kdWN0Jykge1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktY29udGFpbmVyJykpIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignRVJST1IgfCBGcmVlRGVsaXZlcnkgUERQJyArIGVycik7XG4gIH1cbn0oKSk7XG4iXX0=
