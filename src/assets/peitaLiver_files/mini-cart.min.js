"use strict";!function(e){function t(e){window.freedom.restClient.request("/refactoring/minicart",{method:"get",complete:function(t){if(t&&t.indexOf&&t.indexOf("404 Not Found")===-1)for(var n=document.querySelectorAll("[data-mini-cart-wrapper]"),r=0;r<n.length;r++)if(n[r]){n[r].innerHTML=t;for(var i=n&&n[r]?n[r].querySelectorAll(".hide"):[],o=0;o<i.length;o++)window.freedom.removeClass(i[o],"hide")}window.freedom.nsPubSub.pub("miniCart.loaded"),"function"==typeof e&&e()}})}function n(){t(r)}function r(){var e,t=document.querySelector(".minicart-sub-menu"),n=window.pageYOffset,r=function(){var e=document.querySelector("#buy-box #buy-button-now"),t=document.createElement("a"),n=document.createTextNode("Ir para o carrinho");t.appendChild(n),t.className="btn-go-to-cart",t.href="/cart",e.parentNode.insertBefore(t,e.nextSibling),e.remove()},i=function(){t.className=t.className.replace(" minicart-fixed",""),t.className=t.className.replace(" minicart-show","");var e=document.querySelector(".keep-shopping");e&&e.parentNode&&e.parentNode.removeChild(e),document.querySelector(".mini-cart-summary-price a.btn-buy").classList.remove("quick-view-cart"),document.querySelector(".ab-test-minicart")&&(window.freedom.nsPubSub.pub("overlay.display","hide"),r())};document.querySelector(".ab-test-minicart")&&window.freedom.nsPubSub.pub("overlay.display","show"),t.className+=" minicart-show";var o=document.createElement("div");o.className="keep-shopping";var a=document.createTextNode("Continuar comprando");o.appendChild(a);var c=document.querySelector(".minicart-sub-menu .mini-cart-summary-price");c&&c.appendChild(o);var u=document.querySelector(".keep-shopping");u&&u.addEventListener("click",function(){if(document.querySelector(".ab-test-minicart")){var e=sessionStorage.getItem("lastVisitedUrl")||window.location.origin;window.location.href=e}else i()});var d=document.querySelector(".mini-cart-summary-price a.btn-buy");if(d&&d.classList.add("quick-view-cart"),n>=106){t.className+=" minicart-fixed";var m=(window.document.querySelector("#header-content").clientWidth-window.document.querySelector("header .breakpoint").clientWidth)/2;window.document.querySelector(".minicart-fixed").style.right=m+"px",window.onscroll=function(){e&&clearTimeout(e),e=setTimeout(function(){window.pageYOffset<=126&&(t.className=t.className.replace(" minicart-fixed",""),window.document.querySelector(".minicart-sub-menu").style.right=0)},80)}}var s=setTimeout(function(){i()},5e3);if(document.querySelector(".ab-test-minicart")){var l=document.querySelector(".minicart-sub-menu");l.addEventListener("mouseover",function(){clearTimeout(s)}),l.addEventListener("mouseleave",function(){i()})}}e.freedom.nsPubSub.sub("pubsub.dom.content.loaded",t),e.freedom.nsPubSub.sub("miniCart.load",t),e.freedom.nsPubSub.sub("miniCart.fixed",n)}(window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9taW5pLWNhcnQvZGVza3RvcC9taW5pLWNhcnQubWluLmpzIl0sIm5hbWVzIjpbIndpbiIsImdldENhcnQiLCJjYWxsYmFjayIsIndpbmRvdyIsImZyZWVkb20iLCJyZXN0Q2xpZW50IiwicmVxdWVzdCIsIm1ldGhvZCIsImNvbXBsZXRlIiwicmVzcG9uc2UiLCJpbmRleE9mIiwidGFyZ2V0Q29udGVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImkiLCJsZW5ndGgiLCJpbm5lckhUTUwiLCJtaW5pQ2FydEhpZGUiLCJ5IiwicmVtb3ZlQ2xhc3MiLCJuc1B1YlN1YiIsInB1YiIsImluaXRNb2RhbEZpeGVkIiwic2hvd01pbmlDYXJ0IiwicmVzaXplVGltZW91dCIsImNhcnQiLCJxdWVyeVNlbGVjdG9yIiwicGFnZVBvc2l0aW9uWSIsInBhZ2VZT2Zmc2V0IiwiY2hhbmdlQ3RhQnV0dG9uIiwiYnV5QnV0dG9uIiwibm9kZSIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0bm9kZSIsImNyZWF0ZVRleHROb2RlIiwiYXBwZW5kQ2hpbGQiLCJjbGFzc05hbWUiLCJocmVmIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwicmVtb3ZlIiwiY2xvc2VNaW5pQ2FydCIsInJlcGxhY2UiLCJlbGVtIiwicmVtb3ZlQ2hpbGQiLCJjbGFzc0xpc3QiLCJtaW5pQ2FydFN1bW1hcnlQcmljZSIsImtlZXBTaG9wcGluZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ1cmwiLCJzZXNzaW9uU3RvcmFnZSIsImdldEl0ZW0iLCJsb2NhdGlvbiIsIm9yaWdpbiIsImJ0bkJ1eSIsImFkZCIsIm1pbmljYXJ0UG9zIiwiY2xpZW50V2lkdGgiLCJzdHlsZSIsInJpZ2h0Iiwib25zY3JvbGwiLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwidGltZW91dCIsIm1pbmljYXJ0Iiwic3ViIl0sIm1hcHBpbmdzIjoi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QzFEeEMsT0FBT1MsU0FBU2MsY0FBYyxzQkFBc0JpQyxNQUFNQyxNQUFRLElBRW5FLEtBSVAsR0FBSUksR0FBVUQsV0FBVyxXQUN2QnJCLEtBQ0MsSUFFSCxJQUFJOUIsU0FBU2MsY0FBYyxxQkFBc0IsQ0FDL0MsR0FBSXVDLEdBQVdyRCxTQUFTYyxjQUFjLHFCQUN0Q3VDLEdBQVNoQixpQkFBaUIsWUFBYSxXQUNyQ2EsYUFBYUUsS0FHZkMsRUFBU2hCLGlCQUFpQixhQUFjLFdBQ3RDUCxPQUtOMUMsRUFBSUksUUFBUWdCLFNBQVM4QyxJQUFJLDRCQUE2QmpFLEdBQ3RERCxFQUFJSSxRQUFRZ0IsU0FBUzhDLElBQUksZ0JBQWlCakUsR0FDMUNELEVBQUlJLFFBQVFnQixTQUFTOEMsSUFBSSxpQkFBa0I1QyxJQUUzQ25CIiwiZmlsZSI6Il9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9taW5pLWNhcnQvZGVza3RvcC9taW5pLWNhcnQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuKGZ1bmN0aW9uKHdpbikge1xuXG4gIGZ1bmN0aW9uIGdldENhcnQoY2FsbGJhY2spIHtcbiAgICB3aW5kb3cuZnJlZWRvbS5yZXN0Q2xpZW50LnJlcXVlc3QoJy9yZWZhY3RvcmluZy9taW5pY2FydCcsIHtcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLmluZGV4T2YgJiYgcmVzcG9uc2UuaW5kZXhPZignNDA0IE5vdCBGb3VuZCcpID09PSAtMSkge1xuICAgICAgICAgIHZhciB0YXJnZXRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbWluaS1jYXJ0LXdyYXBwZXJdJyk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRDb250ZW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Q29udGVudFtpXSkge1xuICAgICAgICAgICAgICB0YXJnZXRDb250ZW50W2ldLmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICB2YXIgbWluaUNhcnRIaWRlID0gdGFyZ2V0Q29udGVudCAmJiB0YXJnZXRDb250ZW50W2ldID8gdGFyZ2V0Q29udGVudFtpXS5xdWVyeVNlbGVjdG9yQWxsKCcuaGlkZScpIDogW107XG4gICAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWluaUNhcnRIaWRlLmxlbmd0aDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmZyZWVkb20ucmVtb3ZlQ2xhc3MobWluaUNhcnRIaWRlW3ldLCAnaGlkZScpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignbWluaUNhcnQubG9hZGVkJyk7XG4gICAgICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBbaW5pdE1vZGFsRml4ZWRdXG4gICAqIFRoaXMgbWV0aG9kIHNlcnZlcyBhcyBhbiBpbnRlcm1lZGlhcnkgZm9yIGNhbGxpbmcgc2hvd01pbmlDYXJ0XG4gICAqIGJlY2F1c2UgdGhlcmUgaXMgbm8gc3VwcG9ydCBmb3IgcHJvbWlzc2UgaW4gRVM1LlxuICAgKiovXG4gIGZ1bmN0aW9uIGluaXRNb2RhbEZpeGVkKCl7XG4gICAgZ2V0Q2FydChzaG93TWluaUNhcnQpO1xuICB9XG4gICAgLyoqXG4gICAqIFtzaG93TWluaUNhcnRdXG4gICAqIE1ldGhvZCB0byBtb25pdG9yIHRoZSBtaW5pIGNhcnQgZGlzcGxheSBldmVudC5cbiAgICogVGhlIGRpc3BsYXkgdGltZSBvZiB0aGUgbWluaSBjYXJ0IGlzIDUgc2Vjb25kcyBhZnRlciB0aGUgcHJvZHVjdCBpcyBhZGRlZC5cbiAgICoqL1xuICBmdW5jdGlvbiBzaG93TWluaUNhcnQoKXtcbiAgICB2YXIgY2FydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5taW5pY2FydC1zdWItbWVudScpO1xuICAgIHZhciBwYWdlUG9zaXRpb25ZID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xuICAgIHZhciByZXNpemVUaW1lb3V0O1xuXG4gICAgdmFyIGNoYW5nZUN0YUJ1dHRvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGJ1eUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXktYm94ICNidXktYnV0dG9uLW5vdycpO1xuICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB2YXIgdGV4dG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSXIgcGFyYSBvIGNhcnJpbmhvJyk7XG4gICAgICBub2RlLmFwcGVuZENoaWxkKHRleHRub2RlKTtcbiAgICAgIG5vZGUuY2xhc3NOYW1lID0gXCJidG4tZ28tdG8tY2FydFwiO1xuICAgICAgbm9kZS5ocmVmID0gJy9jYXJ0JztcbiAgICAgIGJ1eUJ1dHRvbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShub2RlLCBidXlCdXR0b24ubmV4dFNpYmxpbmcpO1xuXG4gICAgICBidXlCdXR0b24ucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIHZhciBjbG9zZU1pbmlDYXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2FydC5jbGFzc05hbWUgPSBjYXJ0LmNsYXNzTmFtZS5yZXBsYWNlKFwiIG1pbmljYXJ0LWZpeGVkXCIsXCJcIik7XG4gICAgICBjYXJ0LmNsYXNzTmFtZSA9IGNhcnQuY2xhc3NOYW1lLnJlcGxhY2UoXCIgbWluaWNhcnQtc2hvd1wiLFwiXCIpO1xuXG4gICAgICAvLyBSZW1vdmUga2VlcCBzaG9wcGluZyBhbmQgcmVtb3ZlIGNsYXNzIGJ0biBidXlcbiAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmtlZXAtc2hvcHBpbmcnKTtcblxuICAgICAgaWYgKGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlKSB7XG4gICAgICAgIGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtKTtcbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pbmktY2FydC1zdW1tYXJ5LXByaWNlIGEuYnRuLWJ1eScpLmNsYXNzTGlzdC5yZW1vdmUoXCJxdWljay12aWV3LWNhcnRcIik7XG5cbiAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWItdGVzdC1taW5pY2FydCcpKSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignb3ZlcmxheS5kaXNwbGF5JywnaGlkZScpO1xuXG4gICAgICAgIGNoYW5nZUN0YUJ1dHRvbigpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFiLXRlc3QtbWluaWNhcnQnKSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdvdmVybGF5LmRpc3BsYXknLCdzaG93Jyk7XG4gICAgfVxuXG4gICAgY2FydC5jbGFzc05hbWUgKz0gXCIgbWluaWNhcnQtc2hvd1wiO1xuXG4gICAgLy8gQXBwZW5kIGJ0IGtlZXAgc2hvcHBpbmcgYW5kIGFkZCBjbGFzcyBidG4gYnV5XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5vZGUuY2xhc3NOYW1lID0gXCJrZWVwLXNob3BwaW5nXCI7XG4gICAgdmFyIHRleHRub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJDb250aW51YXIgY29tcHJhbmRvXCIpO1xuICAgIG5vZGUuYXBwZW5kQ2hpbGQodGV4dG5vZGUpO1xuXG4gICAgdmFyIG1pbmlDYXJ0U3VtbWFyeVByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pbmljYXJ0LXN1Yi1tZW51IC5taW5pLWNhcnQtc3VtbWFyeS1wcmljZScpO1xuICAgIGlmIChtaW5pQ2FydFN1bW1hcnlQcmljZSkge1xuICAgICAgbWluaUNhcnRTdW1tYXJ5UHJpY2UuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgfVxuXG4gICAgLy8gQ2xpY2tcbiAgICB2YXIga2VlcFNob3BwaW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5rZWVwLXNob3BwaW5nXCIpO1xuICAgIGlmIChrZWVwU2hvcHBpbmcpIHtcbiAgICAgIGtlZXBTaG9wcGluZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hYi10ZXN0LW1pbmljYXJ0JykpIHtcbiAgICAgICAgICB2YXIgdXJsID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbGFzdFZpc2l0ZWRVcmwnKSB8fCB3aW5kb3cubG9jYXRpb24ub3JpZ2luO1xuICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsb3NlTWluaUNhcnQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIGJ0bkJ1eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5taW5pLWNhcnQtc3VtbWFyeS1wcmljZSBhLmJ0bi1idXknKTtcbiAgICBpZiAoYnRuQnV5KSB7XG4gICAgICBidG5CdXkuY2xhc3NMaXN0LmFkZChcInF1aWNrLXZpZXctY2FydFwiKTtcbiAgICB9XG5cbiAgICBpZiAocGFnZVBvc2l0aW9uWSA+PSAxMDYpIHtcbiAgICAgIGNhcnQuY2xhc3NOYW1lICs9IFwiIG1pbmljYXJ0LWZpeGVkXCI7XG5cbiAgICAgIHZhciBtaW5pY2FydFBvcyA9ICh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlci1jb250ZW50JykuY2xpZW50V2lkdGggLSB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5icmVha3BvaW50JykuY2xpZW50V2lkdGgpIC8gMjtcbiAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1pbmljYXJ0LWZpeGVkXCIpLnN0eWxlLnJpZ2h0ID0gbWluaWNhcnRQb3MgKyBcInB4XCI7XG5cbiAgICAgIHdpbmRvdy5vbnNjcm9sbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAocmVzaXplVGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dChyZXNpemVUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXNpemVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZih3aW5kb3cucGFnZVlPZmZzZXQgPD0gMTI2KSB7XG4gICAgICAgICAgICBjYXJ0LmNsYXNzTmFtZSA9IGNhcnQuY2xhc3NOYW1lLnJlcGxhY2UoXCIgbWluaWNhcnQtZml4ZWRcIixcIlwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1pbmljYXJ0LXN1Yi1tZW51XCIpLnN0eWxlLnJpZ2h0ID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDgwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBjbG9zZU1pbmlDYXJ0KCk7XG4gICAgfSwgNTAwMCk7XG5cbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFiLXRlc3QtbWluaWNhcnQnKSkge1xuICAgICAgdmFyIG1pbmljYXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1pbmljYXJ0LXN1Yi1tZW51Jyk7XG4gICAgICBtaW5pY2FydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfSk7XG5cbiAgICAgIG1pbmljYXJ0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xvc2VNaW5pQ2FydCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgd2luLmZyZWVkb20ubnNQdWJTdWIuc3ViKCdwdWJzdWIuZG9tLmNvbnRlbnQubG9hZGVkJywgZ2V0Q2FydCk7XG4gIHdpbi5mcmVlZG9tLm5zUHViU3ViLnN1YignbWluaUNhcnQubG9hZCcsIGdldENhcnQpO1xuICB3aW4uZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ21pbmlDYXJ0LmZpeGVkJywgaW5pdE1vZGFsRml4ZWQpO1xuXG59KHdpbmRvdykpO1xuIl19
