"use strict";!function(){function e(e){var o="[builder-combo-content]";return o+='[builder-combo-step="'+e+'"]',document.querySelector(o)}function o(o){try{var r=e(o);window.freedom.removeClass(r,"active")}catch(t){console.error("builder-combo.closeStep",t)}}function r(r){try{var t=r.pdp.persona.builder.currStep;t>1&&m.stepOpened<t&&o(t-1),m.stepOpened>t&&o(t+1),m.stepOpened=t;var c=e(t);window.freedom.addClass(c,"active")}catch(n){console.error("builder-combo.openCurrentyStep",n)}}function t(){try{var e=document.querySelectorAll(i),o=e.length;for(e.length>0&&(m.steps=[]);o--;)m.steps.push({value:e[o].value,step:e[o].getAttribute(a)})}catch(r){console.error("builder-combo.saveState",r)}}function c(){try{for(var e=m.steps.length;e--;)n(m.steps[e].step,m.steps[e].value),d(m.steps[e].value,m.steps[e].step)}catch(o){console.error("builder-combo.restoreState",o)}}function n(e,o){try{var r=i;r+='[builder-combo-step="'+e+'"]',r+=' option[value="'+o+'"]';var t=document.querySelector(r);t&&(t.selected=!0)}catch(c){console.error("builder-combo.setComboValue",c)}}function u(e){try{var o="[builder-combo-item]";o+='[builder-combo-step="'+e+'"]',o+=":not(.hide)";var r=document.querySelector(o);window.freedom.addClass(r,"hide")}catch(t){console.error("builder-combo.hideShowedItems",t)}}function d(e,o){try{var r="[builder-combo-item]";r+='[builder-combo-step="'+o+'"]',r+='[builder-combo-sku="'+e+'"]';var t=document.querySelector(r);window.freedom.removeClass(t,"hide"),window.freedom.nsPubSub.pub("builder-combo.after.change",o)}catch(c){console.error("builder-combo.showSelectedItem",c)}}function s(e){try{var o=e.target,r=o.getAttribute(a),t=o.value;u(r),d(t,r)}catch(c){console.error("builder-combo.handleComboChange",c)}}function b(e){try{window.freedom.nsPubSub.pub("builder.builder-combo.changed",e)}catch(o){console.error("builder-combo.notifyChangedEvent",o)}}function l(){try{for(var e=document.querySelectorAll("[builder-combo-select]"),o=e.length;o--;)e[o].addEventListener("change",b)}catch(r){console.error("builder-combo.InitInputListener",r)}}var i="[builder-combo-select]",a="builder-combo-step",m={steps:[],stepOpened:0},p=window.freedom.NsStore;p.subscribe(p.actionTypes.CHANGE_PERSONA_BUILDER,r),window.freedom.live(i,"change",s),window.freedom.nsPubSub.sub("color-flavor-size.changeHtml.before",t),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",c),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",l)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fdGVtcGxhdGVzL3BlcnNvbmFsaXphdGlvbi9idWlsZGVyL2J1aWxkZXItY29tYm8vYWxsL2J1aWxkZXItY29tYm8ubWluLmpzIl0sIm5hbWVzIjpbImdldENvbWJvQ29udGVudEJ5U3RlcCIsInN0ZXAiLCJxdWVyeSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsb3NlU3RlcCIsInN0ZXBDb250RWwiLCJ3aW5kb3ciLCJmcmVlZG9tIiwicmVtb3ZlQ2xhc3MiLCJlcnJvciIsImNvbnNvbGUiLCJvcGVuQ3VycmVudHlTdGVwIiwic3RvcmVTdGF0ZSIsImN1cnJTdGVwIiwicGRwIiwicGVyc29uYSIsImJ1aWxkZXIiLCJzdGF0ZSIsInN0ZXBPcGVuZWQiLCJhZGRDbGFzcyIsInNhdmVTdGF0ZSIsInNlbGVjdExpc3QiLCJxdWVyeVNlbGVjdG9yQWxsIiwiQ09NQk9fU0VMRUNUX0FUVFIiLCJ0b3RhbFN0ZXBzIiwibGVuZ3RoIiwic3RlcHMiLCJwdXNoIiwidmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJDT01CT19TVEVQX0FUVFIiLCJyZXN0b3JlU3RhdGUiLCJpIiwic2V0Q29tYm9WYWx1ZSIsInNob3dTZWxlY3RlZEl0ZW0iLCJjb21ib1N0ZXAiLCJzZWxlY3RlZE9wdGlvbkVsIiwic2VsZWN0ZWQiLCJoaWRlU2hvd2VkSXRlbXMiLCJpdGVtVG9IaWRlIiwic2t1IiwiaXRlbVRvU2hvdyIsIm5zUHViU3ViIiwicHViIiwiaGFuZGxlQ29tYm9DaGFuZ2UiLCJldmVudCIsImNvbWJvIiwidGFyZ2V0Iiwibm90aWZ5Q2hhbmdlZEV2ZW50IiwiSW5pdElucHV0TGlzdGVuZXIiLCJpbnB1dHMiLCJhZGRFdmVudExpc3RlbmVyIiwic3RvcmUiLCJOc1N0b3JlIiwic3Vic2NyaWJlIiwiYWN0aW9uVHlwZXMiLCJDSEFOR0VfUEVSU09OQV9CVUlMREVSIiwibGl2ZSIsInN1YiJdLCJtYXBwaW5ncyI6IkFBQUEsY0FFQyxXQWFDLFFBQVNB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SUFIQSxHQUFJQyxHQUFTaEQsU0FBU29CLGlCQUFpQiwwQkFDbkNVLEVBQUlrQixFQUFPekIsT0FFVE8sS0FDSmtCLEVBQU9sQixHQUFHbUIsaUJBQWlCLFNBQVVILEdBRXZDLE1BQU92QyxHQUNQQyxRQUFRRCxNQUFNLGtDQUFtQ0EsSUExTHJELEdBQUljLEdBQW9CLHlCQUNwQk8sRUFBa0IscUJBQ2xCYixHQUNBUyxTQUNBUixXQUFZLEdBRVprQyxFQUFROUMsT0FBT0MsUUFBUThDLE9Bd0wzQkQsR0FBTUUsVUFBVUYsRUFBTUcsWUFBWUMsdUJBQXdCN0MsR0FFMURMLE9BQU9DLFFBQVFrRCxLQUFLbEMsRUFBbUIsU0FBVXFCLEdBQ2pEdEMsT0FBT0MsUUFBUW1DLFNBQVNnQixJQUFJLHNDQUF1Q3RDLEdBQ25FZCxPQUFPQyxRQUFRbUMsU0FBU2dCLElBQUksaUNBQWtDM0IsR0FDOUR6QixPQUFPQyxRQUFRbUMsU0FBU2dCLElBQUksaUNBQWtDVCIsImZpbGUiOiJfcmVmYWN0b3JpbmcvX3RlbXBsYXRlcy9wZXJzb25hbGl6YXRpb24vYnVpbGRlci9idWlsZGVyLWNvbWJvL2FsbC9idWlsZGVyLWNvbWJvLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uKCl7XG4gIHZhciBDT01CT19TRUxFQ1RfQVRUUiA9ICdbYnVpbGRlci1jb21iby1zZWxlY3RdJ1xuICAgICwgQ09NQk9fU1RFUF9BVFRSID0gJ2J1aWxkZXItY29tYm8tc3RlcCdcbiAgICAsIHN0YXRlID0ge1xuICAgICAgc3RlcHM6IFtdLFxuICAgICAgc3RlcE9wZW5lZDogMFxuICAgIH07XG4gIHZhciBzdG9yZSA9IHdpbmRvdy5mcmVlZG9tLk5zU3RvcmU7XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGdldCB0aGUgY29udGVudCBieSBzdGVwXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzdGVwIC0gc3RlcCBvZiBjb250ZW50XG4gICAqL1xuICBmdW5jdGlvbiBnZXRDb21ib0NvbnRlbnRCeVN0ZXAoc3RlcCkge1xuICAgIHZhciBxdWVyeSA9ICdbYnVpbGRlci1jb21iby1jb250ZW50XSc7XG4gICAgcXVlcnkgKz0gJ1tidWlsZGVyLWNvbWJvLXN0ZXA9XCInICsgc3RlcCArICdcIl0nO1xuXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VTdGVwKHN0ZXApIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHN0ZXBDb250RWwgPSBnZXRDb21ib0NvbnRlbnRCeVN0ZXAoc3RlcCk7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5yZW1vdmVDbGFzcyhzdGVwQ29udEVsLCAnYWN0aXZlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8uY2xvc2VTdGVwJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gb3BlbiB0aGUgY3VycmVudCBzdGVwXG4gICAqL1xuICBmdW5jdGlvbiBvcGVuQ3VycmVudHlTdGVwKHN0b3JlU3RhdGUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGN1cnJTdGVwID0gc3RvcmVTdGF0ZS5wZHAucGVyc29uYS5idWlsZGVyLmN1cnJTdGVwO1xuXG4gICAgICBpZihjdXJyU3RlcCA+IDEgJiYgc3RhdGUuc3RlcE9wZW5lZCA8IGN1cnJTdGVwICkgeyAvL2dvaW5nIGFoZWFkXG4gICAgICAgIGNsb3NlU3RlcChjdXJyU3RlcCAtIDEpOyAvL2Nsb3NlIGJlZm9yZVxuICAgICAgfVxuXG4gICAgICBpZihzdGF0ZS5zdGVwT3BlbmVkID4gY3VyclN0ZXApIHsgLy9iYWNraW5nXG4gICAgICAgIGNsb3NlU3RlcChjdXJyU3RlcCArIDEpOyAvL2Nsb3NlIGFmdGVyXG4gICAgICB9XG5cbiAgICAgIHN0YXRlLnN0ZXBPcGVuZWQgPSBjdXJyU3RlcDtcblxuICAgICAgdmFyIHN0ZXBDb250RWwgPSBnZXRDb21ib0NvbnRlbnRCeVN0ZXAoY3VyclN0ZXApO1xuXG4gICAgICB3aW5kb3cuZnJlZWRvbS5hZGRDbGFzcyhzdGVwQ29udEVsLCAnYWN0aXZlJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8ub3BlbkN1cnJlbnR5U3RlcCcsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gc2F2ZSB0aGUgYnVpbGRlciBjb21ibyBzdGF0dXNcbiAgICovXG4gIGZ1bmN0aW9uIHNhdmVTdGF0ZSgpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHNlbGVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKENPTUJPX1NFTEVDVF9BVFRSKVxuICAgICAgLCB0b3RhbFN0ZXBzID0gc2VsZWN0TGlzdC5sZW5ndGg7XG5cbiAgICAgIGlmKHNlbGVjdExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICBzdGF0ZS5zdGVwcyA9IFtdO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSh0b3RhbFN0ZXBzLS0pIHtcbiAgICAgICAgc3RhdGUuc3RlcHMucHVzaCh7XG4gICAgICAgICAgdmFsdWU6IHNlbGVjdExpc3RbdG90YWxTdGVwc10udmFsdWUsXG4gICAgICAgICAgc3RlcDogc2VsZWN0TGlzdFt0b3RhbFN0ZXBzXS5nZXRBdHRyaWJ1dGUoQ09NQk9fU1RFUF9BVFRSKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignYnVpbGRlci1jb21iby5zYXZlU3RhdGUnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHJlc3RvcmUgdGhlIHNhdmVkIHN0YXRlIHRvIGNvbXBvbmVudFxuICAgKi9cbiAgZnVuY3Rpb24gcmVzdG9yZVN0YXRlKCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgaSA9IHN0YXRlLnN0ZXBzLmxlbmd0aDtcblxuICAgICAgd2hpbGUoaS0tKSB7XG4gICAgICAgIHNldENvbWJvVmFsdWUoc3RhdGUuc3RlcHNbaV0uc3RlcCwgc3RhdGUuc3RlcHNbaV0udmFsdWUpO1xuICAgICAgICBzaG93U2VsZWN0ZWRJdGVtKHN0YXRlLnN0ZXBzW2ldLnZhbHVlLCBzdGF0ZS5zdGVwc1tpXS5zdGVwKTtcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLWNvbWJvLnJlc3RvcmVTdGF0ZScsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDb21ib1ZhbHVlKGNvbWJvU3RlcCwgdmFsdWUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHF1ZXJ5ID0gQ09NQk9fU0VMRUNUX0FUVFI7XG4gICAgICBxdWVyeSArPSAnW2J1aWxkZXItY29tYm8tc3RlcD1cIicgKyBjb21ib1N0ZXAgKyAnXCJdJztcbiAgICAgIHF1ZXJ5ICs9ICcgb3B0aW9uW3ZhbHVlPVwiJyArIHZhbHVlICsgJ1wiXSc7XG5cbiAgICAgIHZhciBzZWxlY3RlZE9wdGlvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihxdWVyeSk7Ly9nZXQgc2VsZWN0ZWQgb3B0aW9ucyBpbnRvIHNwZWNpZmljIGNvbWJvYm94XG5cbiAgICAgIGlmKHNlbGVjdGVkT3B0aW9uRWwpIHtcbiAgICAgICAgc2VsZWN0ZWRPcHRpb25FbC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8uc2V0Q29tYm9WYWx1ZScsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gaGlkZSB0aGUgc2hvd2VkIGl0ZW1zIGJ5IHN0ZXBcbiAgICogQHBhcmFtIHtzdHJpbmd9IC0gc3RlcFxuICAgKi9cbiAgZnVuY3Rpb24gaGlkZVNob3dlZEl0ZW1zKHN0ZXApIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHF1ZXJ5ID0gJ1tidWlsZGVyLWNvbWJvLWl0ZW1dJztcblxuICAgICAgcXVlcnkgKz0gJ1tidWlsZGVyLWNvbWJvLXN0ZXA9XCInICsgc3RlcCArICdcIl0nO1xuICAgICAgcXVlcnkgKz0gJzpub3QoLmhpZGUpJzsvL3RoZSBzZWxlY3RlZCBpdGVtIGJlZm9yZVxuXG4gICAgICB2YXIgaXRlbVRvSGlkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpO1xuICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3MoaXRlbVRvSGlkZSwgJ2hpZGUnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignYnVpbGRlci1jb21iby5oaWRlU2hvd2VkSXRlbXMnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHNob3cgdGhlIHNlbGVjdGVkIGl0ZW0gYnkgY29tYm9ib3hcbiAgICovXG4gIGZ1bmN0aW9uIHNob3dTZWxlY3RlZEl0ZW0oc2t1LCBzdGVwKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBxdWVyeSA9ICdbYnVpbGRlci1jb21iby1pdGVtXSc7XG4gICAgICBxdWVyeSArPSAnW2J1aWxkZXItY29tYm8tc3RlcD1cIicgKyBzdGVwICsgJ1wiXSc7XG4gICAgICBxdWVyeSArPSAnW2J1aWxkZXItY29tYm8tc2t1PVwiJyArIHNrdSArICdcIl0nO1xuXG4gICAgICB2YXIgaXRlbVRvU2hvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocXVlcnkpO1xuICAgICAgd2luZG93LmZyZWVkb20ucmVtb3ZlQ2xhc3MoaXRlbVRvU2hvdywgJ2hpZGUnKTtcblxuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdidWlsZGVyLWNvbWJvLmFmdGVyLmNoYW5nZScsIHN0ZXApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLWNvbWJvLnNob3dTZWxlY3RlZEl0ZW0nLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIHNob3cgb3IgaGlkZSB0aGUgaXRlbXMgYmFzZWFkIG9uIGNvbWJvIGNoYW5nZVxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnRcbiAgICovXG4gIGZ1bmN0aW9uIGhhbmRsZUNvbWJvQ2hhbmdlKGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBjb21ibyA9IGV2ZW50LnRhcmdldFxuICAgICAgICAsIHN0ZXAgPSBjb21iby5nZXRBdHRyaWJ1dGUoQ09NQk9fU1RFUF9BVFRSKVxuICAgICAgICAsIHNrdSA9IGNvbWJvLnZhbHVlO1xuXG4gICAgICBoaWRlU2hvd2VkSXRlbXMoc3RlcCk7XG4gICAgICBzaG93U2VsZWN0ZWRJdGVtKHNrdSwgc3RlcCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8uaGFuZGxlQ29tYm9DaGFuZ2UnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgICAvKipcbiAgICogZnVuY3Rpb24gdG8gbm90aWZ5IHRoYXQgdGhlIGlucHV0IHdhcyBpbnB1dGVkXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBldmVudCBldmVudCBvZiBpbnB1dFxuICAgKi9cbiAgZnVuY3Rpb24gbm90aWZ5Q2hhbmdlZEV2ZW50KGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignYnVpbGRlci5idWlsZGVyLWNvbWJvLmNoYW5nZWQnLCBldmVudCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8ubm90aWZ5Q2hhbmdlZEV2ZW50JywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gICAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGluaXRpYWxpemUgdGhlIGlucHV0IGxpc3RlbmVyXG4gICAqIGFuZCBjYWxsIHRoZSBwZXJzb25hIHZhbGlkYXRpb25cbiAgICovXG4gIGZ1bmN0aW9uIEluaXRJbnB1dExpc3RlbmVyKCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2J1aWxkZXItY29tYm8tc2VsZWN0XScpO1xuICAgICAgdmFyIGkgPSBpbnB1dHMubGVuZ3RoO1xuXG4gICAgICB3aGlsZShpLS0pIHtcbiAgICAgICAgaW5wdXRzW2ldLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG5vdGlmeUNoYW5nZWRFdmVudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXItY29tYm8uSW5pdElucHV0TGlzdGVuZXInLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgc3RvcmUuc3Vic2NyaWJlKHN0b3JlLmFjdGlvblR5cGVzLkNIQU5HRV9QRVJTT05BX0JVSUxERVIsIG9wZW5DdXJyZW50eVN0ZXApOyAvL2xpc3RlbmVyIHRoZSBidWlsZGVyIHN0b3JlIGNoYW5nZVxuXG4gIHdpbmRvdy5mcmVlZG9tLmxpdmUoQ09NQk9fU0VMRUNUX0FUVFIsICdjaGFuZ2UnLCBoYW5kbGVDb21ib0NoYW5nZSk7XG4gIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignY29sb3ItZmxhdm9yLXNpemUuY2hhbmdlSHRtbC5iZWZvcmUnLCBzYXZlU3RhdGUpO1xuICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ2J1aWxkZXItd3JhcHBlci5hZnRlci5yZW5kZXJlZCcsIHJlc3RvcmVTdGF0ZSk7XG4gIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignYnVpbGRlci13cmFwcGVyLmFmdGVyLnJlbmRlcmVkJywgSW5pdElucHV0TGlzdGVuZXIpO1xufSgpKTtcbiJdfQ==
