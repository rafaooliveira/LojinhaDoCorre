"use strict";String.prototype.includes||(String.prototype.includes=function(e,t){if(e instanceof RegExp)throw TypeError("first argument must not be a RegExp");return void 0===t&&(t=0),this.indexOf(e,t)!==-1}),function(){function e(e,t){t=t||document;var o=t.querySelectorAll(e);return window.freedom.nodeListToArray(o)}function t(t){t||(t=e(I)),t.map(function(t){return e(T,t)}).map(function(e){return e.forEach(function(e){e.removeEventListener(N,w)})})}function o(){document.querySelectorAll(".buy-button-now")&&window.freedom.nsPubSub.pub("disabled.button.multiple",document.querySelectorAll(".buy-button-now"),!1)}function r(){var o=e(I);t(o),p(o)}function n(e){try{if(window.history&&window.history.pushState&&e.title){var t=document.querySelector("[data-sku-changed-target]").innerHTML;t=JSON.stringify(t),L++,history.pushState('{"content": '+t+', "page": '+L+"}",e.title,e.originalUrl)}}catch(o){console.error("Color-Flavor::setHistory::could not set history",o)}}function a(e){window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.before");var t=document.createElement("div");_?t.appendChild(e):(t.innerHTML=e,t.querySelector(".freeDelivery-container")&&t.querySelector(".freeDelivery-container").classList.remove("hide")),document.querySelector(F).innerHTML=t.querySelector(F).innerHTML,window.freedom.nsPubSub.pub("color-flavor-size.changeHtml.after")}function i(){window.freedom.nsRequire.use("metadata",function(){window.freedom.metadata.chaordicPush(),window.freedom.metadata.gtmPush()})}function u(){document.querySelector(".price .starting-at")&&document.querySelector(".price .starting-at").classList.add("hide")}function d(e){window.freedom.nsPubSub.pub("Slider.reinitialize.all"),window.freedom.nsPubSub.pub("Youtube.video.load"),window.freedom.nsPubSub.pub("Zoom.restart"),window.freedom.nsPubSub.pub("Thumbs.restart",!1,!1),window.freedom.nsPubSub.pub("VideoPlayer.restart"),window.freedom.nsPubSub.pub("SlidePush.restart"),window.freedom.nsPubSub.pub("price.reload"),window.freedom.nsPubSub.pub("ShowOnScroll.reset"),window.freedom.nsPubSub.pub("sizeChart.restart"),window.freedom.nsPubSub.pub("installments.restart"),window.freedom.nsPubSub.pub("restrictValue.restart"),"0"===e.getAttribute("data-sellerid")?window.freedom.nsPubSub.pub("personalization.restart"):A(),window.freedom.nsPubSub.pub("tellMe.restart"),window.freedom.nsPubSub.pub("spin.loading.animate.restart"),window.freedom.nsPubSub.pub("modal.restart"),window.freedom.nsPubSub.pub("LazyLoadingItems.update"),window.freedom.nsPubSub.pub("disabled.button.restart"),window.freedom.nsPubSub.pub("stripe.dfp.restart"),window.freedom.nsPubSub.pub("emergency-trigger-show-stock",e),window.freedom.nsPubSub.pub("init.zoom"),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&(window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),window.freedom.nsPubSub.pub("wishlist.clickListener",!0)),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),window.freedom.nsPubSub.pub("abTestPrice.pdp.restart",e),window.freedom.nsPubSub.pub("ModelWear.restart"),window.freedom.nsPubSub.pub("SellerPreview.restart"),document.querySelector(".floating-button")&&window.freedom.nsPubSub.pub("FloatButton.restart"),window.freedom.nsPubSub.pub("description.anchorsBtn.restart"),O(),u(),o(),r()}function s(e,o,r){window.freedom.nsPubSub.pub("quickView.hasQuickView")?(t(),a(e),S(o),d(r)):(t(),a(e),S(o),i(),n(o),d(r))}function l(e){console.error("ColorFlavorSize::AjaxError:",e)}function c(e,t,r){var n={displayLoading:!0,method:"get",type:"html",error:function(e){v("hide",t),l(e)},success:function(o){b(e,r),v("hide",t),_?window.freedom.nsPubSub.pub("change.ColorFlavorSize.freeShipping",o,e,r):s(o,e,r)}};e.data&&(n.data=e.data),o(),v("show",t),y(),window.freedom.restClient.request(e.url,n)}function b(e,t){var o=document.querySelector(".colorFlavorSizeUpdateVitrines")&&document.querySelector(".colorFlavorSizeUpdateVitrines").value,r=window.chaordic_meta&&window.chaordic_meta.page&&window.chaordic_meta.page.name;if("active"===o&&r){var n="string"==typeof t.getAttribute("data-sku")?t.getAttribute("data-sku").substr(0,12):null,a=window.chaordic_meta.product&&window.chaordic_meta.product.id?window.chaordic_meta.product.id:null,i=null!==a&&null!==n&&(n!==a||window.chaordic_meta.page.name!==e.page);i&&(window.chaordic_meta.product.id=n,window.chaordic_meta.page.name=e.page,window.chaordic.initialize())}}function w(e){e.preventDefault();var t={},o=e.currentTarget,r=window.freedom.nsPubSub.pub("quickView.hasQuickView");o&&o.parentNode&&window.freedom.hasClass(o.parentNode,"active")||o&&window.freedom.hasClass(o,"ns-icon-check-mark")||(o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&(o.hasAttribute("data-size")||o.hasAttribute("data-voltage"))&&o.parentNode.classList.add("active"),t.data={},t.url="/refactoring"+o.getAttribute("href"),t.originalUrl=o.getAttribute("href"),t.title=o.getAttribute("data-title"),t.data.sellerId=g(),t.data.sizeLabelSelected=o.getAttribute("data-label"),t.page="unavailable"===o.getAttribute("qa-option")?"product_unavailable":"product",r&&(t.data.isQuickView=r),localStorage.getItem("sellerIdPdpCFS")&&(t.data.sellerId=localStorage.getItem("sellerIdPdpCFS")),window.freedom.nsPubSub.pub("quickView.hasQuickView"),c(t,o.closest("ul"),o))}function f(e){e.forEach(function(e){e.addEventListener(N,w)})}function p(t){t.forEach(function(t){f(e(T,t))})}function m(){var t=e("["+C+'="color"] '+E)[0],o=e("["+C+'="flavor"] '+E)[0],r=e("["+C+'="size"] '+E)[0],n={};return t&&(n.color={sku:t.getAttribute("data-sku"),title:t.getAttribute("data-title"),label:t.getAttribute("data-label"),available:!t.hasAttribute("data-color-flavor-unavailable")}),o&&(n.flavor={code:o.getAttribute("data-sku"),title:o.getAttribute("data-title"),label:o.getAttribute("data-label"),available:!o.hasAttribute("data-color-flavor-unavailable")}),r&&(n.size={code:r.getAttribute("data-sku"),title:r.getAttribute("data-title"),label:r.getAttribute("data-label"),available:!r.hasAttribute("data-color-flavor-unavailable")}),n}function S(){if(z.size){var t='[data-label="'+z.size.getAttribute("data-label")+'"]',o=e(t)[0];o&&o&&o.parentNode&&o.parentNode.classList&&o.parentNode.classList.add&&o.parentNode.classList.add("active")}}function g(){if(window.location.search.indexOf("sellerId")>=0){var e,t=window.location.search.split("&");return t.forEach(function(t){const o=/sellerId\=[0-9]{1,}/g;o.test(t)&&(e=t.replace("sellerId=","").replace("?",""))}),e}return null}function h(){var t,o,r=e("["+C+'="size"] '+E),n=z.size,a=n?n.getAttribute("data-label"):null;return r.length>1?r.forEach(function(e){var r=e.getAttribute("data-label")?e.getAttribute("data-label"):null;r===a||t||(o=e,t=!0)}):o=r[0],o}function v(e,t){window.freedom.nsPubSub.pub("spin.loading.animate",t,e)}function y(){z.color=e("["+C+'="color"] '+E)[0],z.flavor=e("["+C+'="flavor"] '+E)[0],z.size=h()}function P(e){if(e){var t=m();e(t.size?t.size.code:void 0)}}function q(e){var t=window.location.href.split("#").length>1;t||(e||history.back(),Object.keys(e).length&&(e=JSON.parse(e),e.content&&""!==e.content&&(document.querySelector("[data-sku-changed-target]").innerHTML=e.content,r(),d())))}function k(){var e=document.referrer,t=/lojista/g.test(e)||/busca\?sellers=/g.test(e);if(t){var o=document.location.search.replace("?sellerId=","");localStorage.setItem("sellerIdPdpCFS",o)}else localStorage.removeItem("sellerIdPdpCFS")}function A(){/sellerId\=/.test(window.location.search)&&document.querySelector(".personalization")&&(document.querySelector(".personalization").style.display="none")}var z={},L=0,_=document.querySelector("section[data-free-shipping-by-zipcode]"),C="data-color-flavor-size-content",I="["+C+"]",F="[data-sku-changed-target]",T="li a[data-sku]",E="li.active a",N="click",M=function(){try{var e=document.querySelector("#buy-button-now-buy-box");return(e=e&&e.getAttribute("data-seller"))?+e:(e=document.querySelector("[product-data-seller]"),e=e&&e.getAttribute("product-data-seller"),e?+e:0)}catch(t){return console.error("call-to-action.getSeller",t),0}},H=function(e,t,o){window&&window.freedom&&window.freedom.nsStorage&&window.freedom.nsStorage.set&&window.freedom.nsStorage.set(e,t,o)},V=function(){return window&&window.freedom&&window.freedom.nsStorage&&window.freedom.nsStorage.get?window.freedom.nsStorage.get("cp_sku")||[]:[]},O=function(){var e=document.querySelector("#buy-button-now"),t=document.querySelector("#stamp-coupon");if(t&&e){if("2"===sessionStorage.getItem("stamp-coupon-template")){var o=t.querySelector(".stamp-coupon-template-1"),r=t.querySelector(".stamp-coupon-template-2");window.freedom.addClass(o,"hide"),window.freedom.removeClass(r,"hide")}var n,a=t.querySelectorAll(".text__stamp_coupon p"),i=t.querySelector("span.link-coupon-sku"),u=t.querySelector(".stamp-coupon-readMore"),d=t.getAttribute("data-discount"),s=V(),l=e.getAttribute("data-sku"),c=l.split("-");c.length&&(c[0]&&(n=c[0]),c[1]&&(n+="-"+c[1]),c[2]&&(n+="-"+c[2]));var b=s.find(function(e){return e.sku===l}),w=s.find(function(e){return e.skuFather===n}),f=0,p=a.length,m=d+" de desconto";if(w){for(window.freedom.addClass(t,"coupon-actived");f<p;f++)a[f].innerHTML="2"===sessionStorage.getItem("stamp-coupon-template")?"Parabéns! Seu desconto foi ativado e será aplicado no carrinho":m+" aplicado";if(u&&u.remove(),i&&i.remove(),!b){var S=M().toString(),g={sku:l,skuFather:n,sellerId:S};s.push(g),H("cp_sku",s,1880)}}else for(window.freedom.removeClass(t,"coupon-actived");f<p;f++)a[f].innerHTML="Quero "+m+"!";window.WansTools&&(window.WansTools.ecProduct("detail"),window.WansTools.ecProduct("add")),window.freedom.addClass(t,"loaded")}return!1};!function(){p(e(I)),window.onpopstate=function(e){e&&q(e.state)},window.document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector("[data-sku-changed-target]").innerHTML;e&&(e=JSON.stringify(e),history.replaceState('{"content": '+e+', "page": '+L+"}",document.title,window.location.href))}),document.querySelector(".wishlist .wishlist__heart")&&"pdp"===document.querySelector(".wishlist .wishlist__heart").getAttribute("data-template")&&window.freedom.nsPubSub.pub("wishlist.checkFavoriteProducts"),document.querySelector("#quickview-container")||window.freedom.nsPubSub.pub("Shipping.restart"),_&&window.freedom.nsPubSub.sub("returnCheckedFreeShipping",s),window.freedom.nsPubSub.sub("ColorFlavorSize.select.size",P),window.freedom.nsPubSub.sub("ColorFlavorSize.restart",d),k(),A()}()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2NvbG9yLWZsYXZvci1zaXplL2Rlc2t0b3AvY29sb3ItZmxhdm9yLXNpemUubWluLmpzIl0sIm5hbWVzIjpbIlN0cmluZyIsInByb3RvdHlwZSIsImluY2x1ZGVzIiwic2VhcmNoIiwic3RhcnQiLCJSZWdFeHAiLCJUeXBlRXJyb3IiLCJ1bmRlZmluZWQiLCJ0aGlzIiwiaW5kZXhPZiIsImdldEFycmF5RnJvbURvbSIsInF1ZXJ5IiwiY29udGV4dCIsImRvY3VtZW50IiwiY29udGVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwid2luZG93IiwiZnJlZWRvbSIsIm5vZGVMaXN0VG9BcnJheSIsInJlbW92ZUV2ZW50cyIsIkNPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlRfUVVFUlkiLCJtYXAiLCJjb250ZW50IiwiQ09MT1JfRkxBVk9SX1NJWkVfT1BUSU9OX0VMRU1FTlRfUVVFUlkiLCJlbGVtZW50cyIsImZvckVhY2giLCJlbGVtZW50IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIkVWRU5UX05BTUUiLCJvcHRpb25DbGlja0hhbmRsZXIiLCJoaWRlTG9hZGluZ0J1eUJ1dHRvbiIsIm5zUHViU3ViIiwicHViIiwicmVpbml0IiwiaW5pdCIsInNldEhpc3RvcnkiLCJwcm9wZXJ0aWVzIiwiaGlzdG9yeSIsInB1c2hTdGF0ZSIsInRpdGxlIiwicXVlcnlTZWxlY3RvciIsImlubmVySFRNTCIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb3VudFN0YXRlIiwib3JpZ2luYWxVcmwiLCJlIiwiY29uc29sZSIsImVycm9yIiwiY2hhbmdlVGFyZ2V0SHRtbENvbnRlbnQiLCJyZXNwb25zZSIsInRlbXAiLCJjcmVhdGVFbGVtZW50IiwiRlJFRVNISVBQSU5HX0VOQUJMRUQiLCJhcHBlbmRDaGlsZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsIkNPTE9SX0ZMQVZPUl9TSVpFX1NLVV9UQVJHRVQiLCJtZXRhZGF0YSIsIm5zUmVxdWlyZSIsInVzZSIsImNoYW9yZGljUHVzaCIsImd0bVB1c2giLCJoaWRlU3RhcnRpbmdBdCIsImFkZCIsImNvbXBvbmVudHNSZWluaXQiLCJnZXRBdHRyaWJ1dGUiLCJoaWRlUGVyc29uYUh5YnJpZFByb2R1Y3RzIiwiY291cG9uQ2hlY2tlZCIsInJlcXVlc3RTdWNjZXNzSGFuZGxlciIsInJlc3RvcmVTZWxlY3RlZE9wdGlvbnMiLCJoYW5kbGVFcnJvciIsIm1ha2VSZXF1ZXN0IiwidGFyZ2V0Iiwib3B0aW9ucyIsImRpc3BsYXlMb2FkaW5nIiwibWV0aG9kIiwidHlwZSIsInRvZ2dsZUxvYWRpbmciLCJzdWNjZXNzIiwidXBkYXRlVml0cmluZXMiLCJkYXRhIiwicHViU3ViQmVmb3JlQWpheCIsInJlc3RDbGllbnQiLCJyZXF1ZXN0IiwidXJsIiwiZnRvZ2dsZVVwZGF0ZVZpdHJpbmVFbmFibGVkIiwidmFsdWUiLCJoYXNDaGFvcmRpY01ldGFQYWdlTmFtZSIsImNoYW9yZGljX21ldGEiLCJwYWdlIiwibmFtZSIsIm5ld1NrdSIsInN1YnN0ciIsImN1cnJlbnRTa3UiLCJwcm9kdWN0IiwiaWQiLCJuZXdpbmZvSXNEaWZmZXJlbnQiLCJjaGFvcmRpYyIsImluaXRpYWxpemUiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwiY3VycmVudFRhcmdldCIsImlzUXVpY2tWaWV3IiwicGFyZW50Tm9kZSIsImhhc0NsYXNzIiwiaGFzQXR0cmlidXRlIiwic2VsbGVySWQiLCJnZXRTZWxsZXJJZFVybCIsInNpemVMYWJlbFNlbGVjdGVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImNsb3Nlc3QiLCJhZGRFdmVudHMiLCJhbmNob3JzIiwiYW5jaG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRlbnRMaXN0IiwiZ2V0U2VsZWN0ZWRPcHRpb25zIiwiY29sb3JFbGVtZW50IiwiQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCIsIkFDVElWRV9PUFRJT05fUVVFUlkiLCJmbGF2b3JFbGVtZW50Iiwic2l6ZUVsZW1lbnQiLCJzZWxlY3RlZE9wdGlvbnMiLCJjb2xvciIsInNrdSIsImxhYmVsIiwiYXZhaWxhYmxlIiwiZmxhdm9yIiwiY29kZSIsInNpemUiLCJjYWNoZSIsImxvY2F0aW9uIiwiYXJyUGFyYW1zIiwic3BsaXQiLCJpdGVtIiwicmVnZXgiLCJ0ZXN0IiwicmVwbGFjZSIsImNoZWNrQ2FjaGVkU2l6ZSIsImNoZWNrZWRTZWxlY3RlZCIsImNhY2hlZCIsInNpemVzIiwib2xkU2l6ZSIsIm9sZFNpemVBdHRyIiwibGVuZ3RoIiwic2l6ZUF0dHIiLCJhY3Rpb24iLCJwdWJTdWJHZXRTZWxlY3RlZE9wdGlvbnMiLCJjYWxsYmFjayIsInVwZGF0ZUNvbnRlbnQiLCJzdGF0ZSIsImdvVG9Mb2NhdGlvbiIsImhyZWYiLCJiYWNrIiwiT2JqZWN0Iiwia2V5cyIsInBhcnNlIiwic2V0U2VsbGVySWRWYWx1ZSIsInJlZmVycmVyIiwicmVmZXJyZXJJc1NlbGxlclBhZ2UiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsInN0eWxlIiwiZGlzcGxheSIsImdldFNlbGxlciIsInNlbGxlciIsInNldExvY2FsU3RvcmFnZSIsInRpbWUiLCJuc1N0b3JhZ2UiLCJzZXQiLCJnZXRTa3VzIiwiZ2V0Iiwic3RhbXBQZHAiLCJzZXNzaW9uU3RvcmFnZSIsImVsZW1lbnRBIiwiZWxlbWVudEIiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwic2t1RmF0aGVyIiwidGV4dENvdXBvblBkcCIsImxpbmtDb3Vwb25QZHAiLCJpY29uSW5mbyIsImRpc2NvdW50Iiwic2t1cyIsInNrdUZhdGhlckZ1bGwiLCJmaW5kU2t1IiwiZmluZCIsImZpbmRTa3VGYXRoZXIiLCJpbmRleCIsIm1lc3NhZ2UiLCJ0b1N0cmluZyIsInB1c2giLCJXYW5zVG9vbHMiLCJlY1Byb2R1Y3QiLCJvbnBvcHN0YXRlIiwicmVwbGFjZVN0YXRlIiwic3ViIl0sIm1hcHBpbmdzIjoiQUFBQSxZQUdLQSxRQUFPQyxVQUFVQyxXQUNwQkYsT0FBT0MsVUFBVUMsU0FBVyxT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T0FBT0MsUUFBUWMsU0FBU3VLLElBQUksMEJBQTJCckksR0FHdkQ4RixJQUdBNUYiLCJmaWxlIjoiX3JlZmFjdG9yaW5nL19jb21wb25lbnRzL3Byb2R1Y3QvY29sb3ItZmxhdm9yLXNpemUvZGVza3RvcC9jb2xvci1mbGF2b3Itc2l6ZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbi8qIGVzbGludC1kaXNhYmxlICovXG5pZiAoIVN0cmluZy5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgU3RyaW5nLnByb3RvdHlwZS5pbmNsdWRlcyA9IGZ1bmN0aW9uKHNlYXJjaCwgc3RhcnQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBpZiAoc2VhcmNoIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgUmVnRXhwJyk7XG4gICAgfVxuICAgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7IHN0YXJ0ID0gMDsgfVxuICAgIHJldHVybiB0aGlzLmluZGV4T2Yoc2VhcmNoLCBzdGFydCkgIT09IC0xO1xuICB9O1xufVxuLyogZXNsaW50LWVuYWJsZSAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICB2YXIgY2FjaGUgPSB7fTtcbiAgdmFyIGNvdW50U3RhdGUgPSAwLFxuICAgIEZSRUVTSElQUElOR19FTkFCTEVEID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbltkYXRhLWZyZWUtc2hpcHBpbmctYnktemlwY29kZV0nKTtcbiAgdmFyIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgPSAnZGF0YS1jb2xvci1mbGF2b3Itc2l6ZS1jb250ZW50JyxcbiAgICBDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UX1FVRVJZID0gJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICddJyxcbiAgICBDT0xPUl9GTEFWT1JfU0laRV9TS1VfVEFSR0VUID0gJ1tkYXRhLXNrdS1jaGFuZ2VkLXRhcmdldF0nLFxuICAgIENPTE9SX0ZMQVZPUl9TSVpFX09QVElPTl9FTEVNRU5UX1FVRVJZID0gJ2xpIGFbZGF0YS1za3VdJyxcbiAgICBBQ1RJVkVfT1BUSU9OX1FVRVJZID0gJ2xpLmFjdGl2ZSBhJyxcbiAgICBFVkVOVF9OQU1FID0gJ2NsaWNrJztcblxuICAvKipcbiAgICogQXV4aWxpYXJ5IGZ1bmN0aW9uIHRvIGdldCBlbGVtZW50cyBmcm9tIERPTSB3aXRoIHF1ZXJ5U2VsZWN0b3JBbGwgYW5kIHJldHVybiB0aGlzIGxpc3QgYXMgQXJyYXlcbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QXJyYXlGcm9tRG9tKHF1ZXJ5LCBjb250ZXh0KSB7XG4gICAgY29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG4gICAgdmFyIGNvbnRlbnRzID0gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KTtcbiAgICByZXR1cm4gd2luZG93LmZyZWVkb20ubm9kZUxpc3RUb0FycmF5KGNvbnRlbnRzKTtcbiAgfVxuXG4gIHZhciBnZXRTZWxsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgLy9oYXMgc2VsbGVyIG9uIHRoZSBidXR0b25cbiAgICAgIHZhciBzZWxsZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV5LWJ1dHRvbi1ub3ctYnV5LWJveCcpO1xuICAgICAgc2VsbGVyID0gc2VsbGVyICYmIHNlbGxlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2VsbGVyJyk7XG4gICAgICBpZihzZWxsZXIpIHJldHVybiArc2VsbGVyO1xuXG4gICAgICAvL2lmIGhhcyBubyBzZWxsZXIgb24gdGhlIGJ1dHRvblxuICAgICAgc2VsbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW3Byb2R1Y3QtZGF0YS1zZWxsZXJdJyk7XG4gICAgICBzZWxsZXIgPSBzZWxsZXIgJiYgc2VsbGVyLmdldEF0dHJpYnV0ZSgncHJvZHVjdC1kYXRhLXNlbGxlcicpO1xuICAgICAgaWYoc2VsbGVyKSByZXR1cm4gK3NlbGxlcjtcblxuICAgICAgLy9kZWZhdWx0XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignY2FsbC10by1hY3Rpb24uZ2V0U2VsbGVyJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9O1xuXG4gIHZhciBzZXRMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihuYW1lLCBkYXRhLCB0aW1lKSB7XG4gICAgaWYgKHdpbmRvdyAmJiB3aW5kb3cuZnJlZWRvbSAmJiB3aW5kb3cuZnJlZWRvbS5uc1N0b3JhZ2UgJiYgd2luZG93LmZyZWVkb20ubnNTdG9yYWdlLnNldCkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNTdG9yYWdlLnNldChuYW1lLCBkYXRhLCB0aW1lKTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGdldFNrdXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gd2luZG93ICYmIHdpbmRvdy5mcmVlZG9tICYmIHdpbmRvdy5mcmVlZG9tLm5zU3RvcmFnZSAmJiB3aW5kb3cuZnJlZWRvbS5uc1N0b3JhZ2UuZ2V0ID8gKHdpbmRvdy5mcmVlZG9tLm5zU3RvcmFnZS5nZXQoJ2NwX3NrdScpIHx8IFtdKSA6IFtdO1xuICB9O1xuXG4gIHZhciBjb3Vwb25DaGVja2VkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYnV5LWJ1dHRvbi1ub3cnKSxcbiAgICAgIHN0YW1wUGRwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3N0YW1wLWNvdXBvbicpO1xuICAgIGlmIChzdGFtcFBkcCAmJiBlbGVtZW50KSB7XG5cbiAgICAgIGlmIChzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdzdGFtcC1jb3Vwb24tdGVtcGxhdGUnKSA9PT0gJzInKSB7XG4gICAgICAgIHZhciBlbGVtZW50QSA9IHN0YW1wUGRwLnF1ZXJ5U2VsZWN0b3IoJy5zdGFtcC1jb3Vwb24tdGVtcGxhdGUtMScpO1xuICAgICAgICB2YXIgZWxlbWVudEIgPSBzdGFtcFBkcC5xdWVyeVNlbGVjdG9yKCcuc3RhbXAtY291cG9uLXRlbXBsYXRlLTInKTtcbiAgICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3MoZWxlbWVudEEsICdoaWRlJyk7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLnJlbW92ZUNsYXNzKGVsZW1lbnRCLCAnaGlkZScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdGV4dENvdXBvblBkcCA9IHN0YW1wUGRwLnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZXh0X19zdGFtcF9jb3Vwb24gcCcpLFxuICAgICAgICBsaW5rQ291cG9uUGRwID0gc3RhbXBQZHAucXVlcnlTZWxlY3Rvcignc3Bhbi5saW5rLWNvdXBvbi1za3UnKSxcbiAgICAgICAgaWNvbkluZm8gPSBzdGFtcFBkcC5xdWVyeVNlbGVjdG9yKCcuc3RhbXAtY291cG9uLXJlYWRNb3JlJyksXG5cbiAgICAgICAgZGlzY291bnQgPSBzdGFtcFBkcC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGlzY291bnQnKSxcbiAgICAgICAgLy8gdGVtcGxhdGUgPSBzdGFtcFBkcC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGVtcGxhdGUnKSxcblxuICAgICAgICBza3VzID0gZ2V0U2t1cygpLFxuICAgICAgICBza3UgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1za3UnKSxcbiAgICAgICAgc2t1RmF0aGVyRnVsbCA9IHNrdS5zcGxpdCgnLScpLFxuICAgICAgICBza3VGYXRoZXI7XG5cbiAgICAgIGlmIChza3VGYXRoZXJGdWxsLmxlbmd0aCkge1xuICAgICAgICBpZiAoc2t1RmF0aGVyRnVsbFswXSkge1xuICAgICAgICAgIHNrdUZhdGhlciA9IHNrdUZhdGhlckZ1bGxbMF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2t1RmF0aGVyRnVsbFsxXSkge1xuICAgICAgICAgIHNrdUZhdGhlciArPSAnLScgKyBza3VGYXRoZXJGdWxsWzFdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNrdUZhdGhlckZ1bGxbMl0pIHtcbiAgICAgICAgICBza3VGYXRoZXIgKz0gJy0nICsgc2t1RmF0aGVyRnVsbFsyXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZmluZFNrdSA9IHNrdXMuZmluZChmdW5jdGlvbihlKSB7IHJldHVybiBlLnNrdSA9PT0gc2t1OyB9KSxcbiAgICAgICAgZmluZFNrdUZhdGhlciA9IHNrdXMuZmluZChmdW5jdGlvbihlKSB7IHJldHVybiBlLnNrdUZhdGhlciA9PT0gc2t1RmF0aGVyOyB9KSxcbiAgICAgICAgaW5kZXggPSAwLFxuICAgICAgICBsZW5ndGggPSB0ZXh0Q291cG9uUGRwLmxlbmd0aCxcbiAgICAgICAgbWVzc2FnZSA9IGRpc2NvdW50ICsgJyBkZSBkZXNjb250byc7XG5cbiAgICAgIGlmIChmaW5kU2t1RmF0aGVyKSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLmFkZENsYXNzKHN0YW1wUGRwLCAnY291cG9uLWFjdGl2ZWQnKTtcblxuICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgdGV4dENvdXBvblBkcFtpbmRleF0uaW5uZXJIVE1MID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnc3RhbXAtY291cG9uLXRlbXBsYXRlJykgPT09ICcyJyA/ICdQYXJhYsOpbnMhIFNldSBkZXNjb250byBmb2kgYXRpdmFkbyBlIHNlcsOhIGFwbGljYWRvIG5vIGNhcnJpbmhvJyA6IG1lc3NhZ2UgKyAnIGFwbGljYWRvJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpY29uSW5mbykgaWNvbkluZm8ucmVtb3ZlKCk7XG4gICAgICAgIGlmIChsaW5rQ291cG9uUGRwKSBsaW5rQ291cG9uUGRwLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmICghZmluZFNrdSkge1xuICAgICAgICAgIHZhciBzZWxsZXJJZCA9IGdldFNlbGxlcigpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdmFyIHByb2R1Y3QgPSB7IHNrdTogc2t1LCBza3VGYXRoZXI6IHNrdUZhdGhlciwgc2VsbGVySWQ6IHNlbGxlcklkIH07XG4gICAgICAgICAgc2t1cy5wdXNoKHByb2R1Y3QpO1xuICAgICAgICAgIHNldExvY2FsU3RvcmFnZSgnY3Bfc2t1Jywgc2t1cywgMTg4MCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLnJlbW92ZUNsYXNzKHN0YW1wUGRwLCAnY291cG9uLWFjdGl2ZWQnKTtcblxuICAgICAgICBmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgdGV4dENvdXBvblBkcFtpbmRleF0uaW5uZXJIVE1MID0gJ1F1ZXJvICcgKyBtZXNzYWdlICsgJyEnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh3aW5kb3cuV2Fuc1Rvb2xzKSB7XG4gICAgICAgIHdpbmRvdy5XYW5zVG9vbHMuZWNQcm9kdWN0KCdkZXRhaWwnKTtcbiAgICAgICAgd2luZG93LldhbnNUb29scy5lY1Byb2R1Y3QoJ2FkZCcpO1xuICAgICAgfVxuXG4gICAgICB3aW5kb3cuZnJlZWRvbS5hZGRDbGFzcyhzdGFtcFBkcCwgJ2xvYWRlZCcpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyAvUkVTRVQgTUVUSE9EU1xuICBmdW5jdGlvbiByZW1vdmVFdmVudHMoY29udGVudHMpIHtcbiAgICBpZiAoIWNvbnRlbnRzKSB7XG4gICAgICBjb250ZW50cyA9IGdldEFycmF5RnJvbURvbShDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UX1FVRVJZKTtcbiAgICB9XG4gICAgY29udGVudHMubWFwKGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICByZXR1cm4gZ2V0QXJyYXlGcm9tRG9tKENPTE9SX0ZMQVZPUl9TSVpFX09QVElPTl9FTEVNRU5UX1FVRVJZLCBjb250ZW50KTtcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICByZXR1cm4gZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoRVZFTlRfTkFNRSwgb3B0aW9uQ2xpY2tIYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZUxvYWRpbmdCdXlCdXR0b24oKSB7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXktYnV0dG9uLW5vdycpKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2Rpc2FibGVkLmJ1dHRvbi5tdWx0aXBsZScsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXktYnV0dG9uLW5vdycpLCBmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVpbml0KCkge1xuICAgIHZhciBjb250ZW50cyA9IGdldEFycmF5RnJvbURvbShDT0xPUl9GTEFWT1JfU0laRV9DT05URU5UX1FVRVJZKTtcbiAgICByZW1vdmVFdmVudHMoY29udGVudHMpO1xuICAgIGluaXQoY29udGVudHMpO1xuICB9XG4gIC8vIC9SRVNFVCBNRVRIT0RTXG5cbiAgLy8gU1RFUFMgVE8gUkVTRVQgVEhFIFBBR0UgV0hFTiBBIFNVQ0NFU1NGVUwgUkVRVUVTVCBJUyBNQURFXG4gIGZ1bmN0aW9uIHNldEhpc3RvcnkocHJvcGVydGllcykge1xuICAgIHRyeSB7XG4gICAgICBpZiAod2luZG93Lmhpc3RvcnkgJiZcbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlICYmXG4gICAgICAgIHByb3BlcnRpZXMudGl0bGUpIHtcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1za3UtY2hhbmdlZC10YXJnZXRdJykuaW5uZXJIVE1MO1xuICAgICAgICBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoY29udGVudCk7XG4gICAgICAgIGNvdW50U3RhdGUrKztcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoXG4gICAgICAgICAgJ3tcImNvbnRlbnRcIjogJyArIGNvbnRlbnQgKyAnLCBcInBhZ2VcIjogJyArIGNvdW50U3RhdGUgKyAnfScsXG4gICAgICAgICAgcHJvcGVydGllcy50aXRsZSxcbiAgICAgICAgICBwcm9wZXJ0aWVzLm9yaWdpbmFsVXJsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignQ29sb3ItRmxhdm9yOjpzZXRIaXN0b3J5Ojpjb3VsZCBub3Qgc2V0IGhpc3RvcnknLCBlKTtcbiAgICB9XG5cbiAgfVxuXG4gIC8vIEFjdHVhbGx5IGNoYW5nZXMgdGhlIFNIT1dDQVNFIHRlbXBsYXRlXG4gIGZ1bmN0aW9uIGNoYW5nZVRhcmdldEh0bWxDb250ZW50KHJlc3BvbnNlKSB7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdjb2xvci1mbGF2b3Itc2l6ZS5jaGFuZ2VIdG1sLmJlZm9yZScpO1xuICAgIHZhciB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICBpZiAoRlJFRVNISVBQSU5HX0VOQUJMRUQpIHtcbiAgICAgIHRlbXAuYXBwZW5kQ2hpbGQocmVzcG9uc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0ZW1wLmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgaWYgKHRlbXAucXVlcnlTZWxlY3RvcignLmZyZWVEZWxpdmVyeS1jb250YWluZXInKSkgdGVtcC5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWNvbnRhaW5lcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICAvL2NoYW5nZSBwYWdlJ3MgSFRNTCBvZiB0YXJnZXQgQXJlYVxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoQ09MT1JfRkxBVk9SX1NJWkVfU0tVX1RBUkdFVCkuaW5uZXJIVE1MID0gdGVtcC5xdWVyeVNlbGVjdG9yKENPTE9SX0ZMQVZPUl9TSVpFX1NLVV9UQVJHRVQpLmlubmVySFRNTDtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2NvbG9yLWZsYXZvci1zaXplLmNoYW5nZUh0bWwuYWZ0ZXInKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1ldGFkYXRhKCkge1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUmVxdWlyZS51c2UoJ21ldGFkYXRhJywgZnVuY3Rpb24gKCkge1xuICAgICAgd2luZG93LmZyZWVkb20ubWV0YWRhdGEuY2hhb3JkaWNQdXNoKCk7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5tZXRhZGF0YS5ndG1QdXNoKCk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlU3RhcnRpbmdBdCgpIHtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByaWNlIC5zdGFydGluZy1hdCcpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJpY2UgLnN0YXJ0aW5nLWF0JykuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENhbGwgdG8gb3V0c2lkZXJzIHRocm91Z2ggcHVic3ViO1xuICBmdW5jdGlvbiBjb21wb25lbnRzUmVpbml0KGVsZW1lbnQpIHtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1NsaWRlci5yZWluaXRpYWxpemUuYWxsJyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdZb3V0dWJlLnZpZGVvLmxvYWQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ1pvb20ucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignVGh1bWJzLnJlc3RhcnQnLCBmYWxzZSwgZmFsc2UpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignVmlkZW9QbGF5ZXIucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2xpZGVQdXNoLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3ByaWNlLnJlbG9hZCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2hvd09uU2Nyb2xsLnJlc2V0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdzaXplQ2hhcnQucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignaW5zdGFsbG1lbnRzLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3Jlc3RyaWN0VmFsdWUucmVzdGFydCcpO1xuICAgIC8vY2hlY2tpbmcgaWYgaXQgaXMgbmVjZXNzYXJ5IHRvIGhpZGUgcGVyc29uYWxpemF0aW9uIGJveCwgZm9yIGh5YnJpZCBwcm9kdWN0cywgd2hlbiB0aGUgc2VsbGVyIGlkIGlzIGluIHRoZSB1cmwuXG4gICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNlbGxlcmlkJykgPT09ICcwJykge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdwZXJzb25hbGl6YXRpb24ucmVzdGFydCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoaWRlUGVyc29uYUh5YnJpZFByb2R1Y3RzKCk7XG4gICAgfVxuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YigndGVsbE1lLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3NwaW4ubG9hZGluZy5hbmltYXRlLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ21vZGFsLnJlc3RhcnQnKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ0xhenlMb2FkaW5nSXRlbXMudXBkYXRlJyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdkaXNhYmxlZC5idXR0b24ucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignc3RyaXBlLmRmcC5yZXN0YXJ0Jyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdlbWVyZ2VuY3ktdHJpZ2dlci1zaG93LXN0b2NrJywgZWxlbWVudCk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdpbml0Lnpvb20nKTtcbiAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpc2hsaXN0IC53aXNobGlzdF9faGVhcnQnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2lzaGxpc3QgLndpc2hsaXN0X19oZWFydCcpLmdldEF0dHJpYnV0ZSgnZGF0YS10ZW1wbGF0ZScpID09PSAncGRwJykge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCd3aXNobGlzdC5jaGVja0Zhdm9yaXRlUHJvZHVjdHMnKTtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1Yignd2lzaGxpc3QuY2xpY2tMaXN0ZW5lcicsIHRydWUpO1xuICAgIH1cbiAgICBpZiAoIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWlja3ZpZXctY29udGFpbmVyJykpIHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2hpcHBpbmcucmVzdGFydCcpO1xuICAgIH1cbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ2FiVGVzdFByaWNlLnBkcC5yZXN0YXJ0JywgZWxlbWVudCk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdNb2RlbFdlYXIucmVzdGFydCcpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignU2VsbGVyUHJldmlldy5yZXN0YXJ0Jyk7XG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mbG9hdGluZy1idXR0b24nKSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdGbG9hdEJ1dHRvbi5yZXN0YXJ0Jyk7XG4gICAgfVxuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignZGVzY3JpcHRpb24uYW5jaG9yc0J0bi5yZXN0YXJ0Jyk7XG5cbiAgICBjb3Vwb25DaGVja2VkKCk7XG4gICAgaGlkZVN0YXJ0aW5nQXQoKTtcbiAgICBoaWRlTG9hZGluZ0J1eUJ1dHRvbigpO1xuICAgIHJlaW5pdCgpO1xuICB9XG5cbiAgLy8gL1NURVBTIFRPIFJFU0VUIFRIRSBQQUdFIFdIRU4gQSBTVUNDRVNTRlVMIFJFUVVFU1QgSVMgTUFERVxuXG4gIC8vIFJFUVVFU1QgQU5EIEhBTkRMRVJTXG4gIGZ1bmN0aW9uIHJlcXVlc3RTdWNjZXNzSGFuZGxlcihyZXNwb25zZSwgcHJvcGVydGllcywgZWxlbWVudCkge1xuICAgIGlmICh3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3F1aWNrVmlldy5oYXNRdWlja1ZpZXcnKSkge1xuICAgICAgcmVtb3ZlRXZlbnRzKCk7XG4gICAgICBjaGFuZ2VUYXJnZXRIdG1sQ29udGVudChyZXNwb25zZSk7XG4gICAgICByZXN0b3JlU2VsZWN0ZWRPcHRpb25zKHByb3BlcnRpZXMpO1xuICAgICAgY29tcG9uZW50c1JlaW5pdChlbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlRXZlbnRzKCk7XG4gICAgICBjaGFuZ2VUYXJnZXRIdG1sQ29udGVudChyZXNwb25zZSk7XG4gICAgICByZXN0b3JlU2VsZWN0ZWRPcHRpb25zKHByb3BlcnRpZXMpO1xuICAgICAgbWV0YWRhdGEoKTtcbiAgICAgIHNldEhpc3RvcnkocHJvcGVydGllcyk7XG4gICAgICBjb21wb25lbnRzUmVpbml0KGVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ29sb3JGbGF2b3JTaXplOjpBamF4RXJyb3I6JywgZXJyb3IpO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFrZVJlcXVlc3QocHJvcGVydGllcywgdGFyZ2V0LCBlbGVtZW50KSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICBkaXNwbGF5TG9hZGluZzogdHJ1ZSxcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICB0eXBlOiAnaHRtbCcsXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRvZ2dsZUxvYWRpbmcoJ2hpZGUnLCB0YXJnZXQpO1xuICAgICAgICBoYW5kbGVFcnJvcihlcnJvcik7XG4gICAgICB9LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHVwZGF0ZVZpdHJpbmVzKHByb3BlcnRpZXMsIGVsZW1lbnQpO1xuICAgICAgICB0b2dnbGVMb2FkaW5nKCdoaWRlJywgdGFyZ2V0KTtcbiAgICAgICAgaWYgKEZSRUVTSElQUElOR19FTkFCTEVEKSB7XG4gICAgICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdjaGFuZ2UuQ29sb3JGbGF2b3JTaXplLmZyZWVTaGlwcGluZycsIHJlc3BvbnNlLCBwcm9wZXJ0aWVzLCBlbGVtZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXF1ZXN0U3VjY2Vzc0hhbmRsZXIocmVzcG9uc2UsIHByb3BlcnRpZXMsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChwcm9wZXJ0aWVzLmRhdGEpIHtcbiAgICAgIG9wdGlvbnMuZGF0YSA9IHByb3BlcnRpZXMuZGF0YTtcbiAgICB9XG4gICAgaGlkZUxvYWRpbmdCdXlCdXR0b24oKTtcbiAgICB0b2dnbGVMb2FkaW5nKCdzaG93JywgdGFyZ2V0KTtcbiAgICBwdWJTdWJCZWZvcmVBamF4KCk7XG4gICAgd2luZG93LmZyZWVkb20ucmVzdENsaWVudC5yZXF1ZXN0KHByb3BlcnRpZXMudXJsLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8vIC9SRVFVRVNUIEFORCBIQU5ETEVSU1xuXG4gIC8vVVBEQVRFIFZJVFJJTkVcbiAgZnVuY3Rpb24gdXBkYXRlVml0cmluZXMocHJvcGVydGllcywgZWxlbWVudCkge1xuICAgIHZhciBmdG9nZ2xlVXBkYXRlVml0cmluZUVuYWJsZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sb3JGbGF2b3JTaXplVXBkYXRlVml0cmluZXMnKSAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29sb3JGbGF2b3JTaXplVXBkYXRlVml0cmluZXMnKS52YWx1ZTtcbiAgICB2YXIgaGFzQ2hhb3JkaWNNZXRhUGFnZU5hbWUgPSB3aW5kb3cuY2hhb3JkaWNfbWV0YSAmJiB3aW5kb3cuY2hhb3JkaWNfbWV0YS5wYWdlICYmIHdpbmRvdy5jaGFvcmRpY19tZXRhLnBhZ2UubmFtZTtcblxuICAgIGlmKGZ0b2dnbGVVcGRhdGVWaXRyaW5lRW5hYmxlZCA9PT0gJ2FjdGl2ZScgJiYgaGFzQ2hhb3JkaWNNZXRhUGFnZU5hbWUpIHtcbiAgICAgIHZhciBuZXdTa3UgPSB0eXBlb2YgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1JykgPT09ICdzdHJpbmcnID8gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1Jykuc3Vic3RyKDAsIDEyKSA6IG51bGw7XG4gICAgICB2YXIgY3VycmVudFNrdSA9IHdpbmRvdy5jaGFvcmRpY19tZXRhLnByb2R1Y3QgJiYgd2luZG93LmNoYW9yZGljX21ldGEucHJvZHVjdC5pZCA/IHdpbmRvdy5jaGFvcmRpY19tZXRhLnByb2R1Y3QuaWQgOiBudWxsO1xuICAgICAgdmFyIG5ld2luZm9Jc0RpZmZlcmVudCA9IGN1cnJlbnRTa3UgIT09IG51bGwgJiYgbmV3U2t1ICE9PSBudWxsICYmIChuZXdTa3UgIT09IGN1cnJlbnRTa3UgfHwgd2luZG93LmNoYW9yZGljX21ldGEucGFnZS5uYW1lICE9PSBwcm9wZXJ0aWVzLnBhZ2UpO1xuXG4gICAgICBpZihuZXdpbmZvSXNEaWZmZXJlbnQpIHtcbiAgICAgICAgd2luZG93LmNoYW9yZGljX21ldGEucHJvZHVjdC5pZCA9IG5ld1NrdTtcbiAgICAgICAgd2luZG93LmNoYW9yZGljX21ldGEucGFnZS5uYW1lID0gcHJvcGVydGllcy5wYWdlO1xuICAgICAgICB3aW5kb3cuY2hhb3JkaWMuaW5pdGlhbGl6ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIC9VUERBVEUgVklUUklORVxuXG4gIC8vIEhUTUwgRVZFTlQgSEFORExFUlNcbiAgZnVuY3Rpb24gb3B0aW9uQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciBwcm9wZXJ0aWVzID0ge307XG4gICAgdmFyIGVsZW1lbnQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAgIHZhciBpc1F1aWNrVmlldyA9IHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YigncXVpY2tWaWV3Lmhhc1F1aWNrVmlldycpO1xuXG4gICAgLy8gaWYgaXQgaXMgYWxyZWFkeSBzZWxlY3RlZCBvbmUgb2YgdGhlc2UgY2xhc3NlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGVsZW1lbnRcbiAgICBpZiAoKGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIHdpbmRvdy5mcmVlZG9tLmhhc0NsYXNzKGVsZW1lbnQucGFyZW50Tm9kZSwgJ2FjdGl2ZScpKSB8fCAoZWxlbWVudCAmJiB3aW5kb3cuZnJlZWRvbS5oYXNDbGFzcyhlbGVtZW50LCAnbnMtaWNvbi1jaGVjay1tYXJrJykpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIGVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QgJiYgZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQgJiYgKGVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLXNpemUnKSB8fCBlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS12b2x0YWdlJykpKSB7XG4gICAgICBlbGVtZW50LnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgfVxuXG4gICAgLy9UT0RPOiByZW1vdmUgdGhpcyAnL3JlZmFjdG9yaW5nJyB0aGluZ1xuICAgIHByb3BlcnRpZXMuZGF0YSA9IHt9O1xuICAgIHByb3BlcnRpZXMudXJsID0gJy9yZWZhY3RvcmluZycgKyBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIHByb3BlcnRpZXMub3JpZ2luYWxVcmwgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIHByb3BlcnRpZXMudGl0bGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpO1xuICAgIHByb3BlcnRpZXMuZGF0YS5zZWxsZXJJZCA9IGdldFNlbGxlcklkVXJsKCk7XG4gICAgcHJvcGVydGllcy5kYXRhLnNpemVMYWJlbFNlbGVjdGVkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKTtcbiAgICBwcm9wZXJ0aWVzLnBhZ2UgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgncWEtb3B0aW9uJykgPT09ICd1bmF2YWlsYWJsZScgPyAncHJvZHVjdF91bmF2YWlsYWJsZScgOiAncHJvZHVjdCc7XG5cbiAgICBpZiAoaXNRdWlja1ZpZXcpIHtcbiAgICAgIHByb3BlcnRpZXMuZGF0YS5pc1F1aWNrVmlldyA9IGlzUXVpY2tWaWV3O1xuICAgIH1cblxuICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzZWxsZXJJZFBkcENGUycpKSB7XG4gICAgICBwcm9wZXJ0aWVzLmRhdGEuc2VsbGVySWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2VsbGVySWRQZHBDRlMnKTtcbiAgICB9XG5cbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3F1aWNrVmlldy5oYXNRdWlja1ZpZXcnKTtcbiAgICBtYWtlUmVxdWVzdChwcm9wZXJ0aWVzLCBlbGVtZW50LmNsb3Nlc3QoJ3VsJyksIGVsZW1lbnQpO1xuICB9XG4gIC8vIC9IVE1MIEVWRU5UIEhBTkRMRVJTXG5cbiAgZnVuY3Rpb24gYWRkRXZlbnRzKGFuY2hvcnMpIHtcbiAgICBhbmNob3JzLmZvckVhY2goZnVuY3Rpb24gKGFuY2hvcikge1xuICAgICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfTkFNRSwgb3B0aW9uQ2xpY2tIYW5kbGVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoY29udGVudHMpIHtcbiAgICBjb250ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChjb250ZW50TGlzdCkge1xuICAgICAgYWRkRXZlbnRzKGdldEFycmF5RnJvbURvbShDT0xPUl9GTEFWT1JfU0laRV9PUFRJT05fRUxFTUVOVF9RVUVSWSwgY29udGVudExpc3QpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFBVQlNVQiBFVkVOVCBIQU5ETEVSU1xuXG4gIC8vIEFVWElMSUFSWVxuICAvLyBUT0RPOiBjaGVjayBpZiBpdCBpcyBzdGlsbCB1c2VmdWxsIGFmdGVyIENhbGwtdG8tYWN0aW9uIGludGVncmF0aW9uXG4gIGZ1bmN0aW9uIGdldFNlbGVjdGVkT3B0aW9ucygpIHtcbiAgICB2YXIgY29sb3JFbGVtZW50ID0gZ2V0QXJyYXlGcm9tRG9tKCdbJyArIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgKyAnPVwiY29sb3JcIl0gJyArIEFDVElWRV9PUFRJT05fUVVFUlkpWzBdO1xuICAgIHZhciBmbGF2b3JFbGVtZW50ID0gZ2V0QXJyYXlGcm9tRG9tKCdbJyArIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgKyAnPVwiZmxhdm9yXCJdICcgKyBBQ1RJVkVfT1BUSU9OX1FVRVJZKVswXTtcbiAgICB2YXIgc2l6ZUVsZW1lbnQgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJzaXplXCJdICcgKyBBQ1RJVkVfT1BUSU9OX1FVRVJZKVswXTtcblxuICAgIHZhciBzZWxlY3RlZE9wdGlvbnMgPSB7fTtcbiAgICBpZiAoY29sb3JFbGVtZW50KSB7XG4gICAgICBzZWxlY3RlZE9wdGlvbnMuY29sb3IgPSB7XG4gICAgICAgIHNrdTogY29sb3JFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1za3UnKSxcbiAgICAgICAgdGl0bGU6IGNvbG9yRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKSxcbiAgICAgICAgbGFiZWw6IGNvbG9yRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFiZWwnKSxcbiAgICAgICAgYXZhaWxhYmxlOiAhY29sb3JFbGVtZW50Lmhhc0F0dHJpYnV0ZSgnZGF0YS1jb2xvci1mbGF2b3ItdW5hdmFpbGFibGUnKVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGZsYXZvckVsZW1lbnQpIHtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5mbGF2b3IgPSB7XG4gICAgICAgIGNvZGU6IGZsYXZvckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNrdScpLFxuICAgICAgICB0aXRsZTogZmxhdm9yRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKSxcbiAgICAgICAgbGFiZWw6IGZsYXZvckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJyksXG4gICAgICAgIGF2YWlsYWJsZTogIWZsYXZvckVsZW1lbnQuaGFzQXR0cmlidXRlKCdkYXRhLWNvbG9yLWZsYXZvci11bmF2YWlsYWJsZScpXG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoc2l6ZUVsZW1lbnQpIHtcbiAgICAgIHNlbGVjdGVkT3B0aW9ucy5zaXplID0ge1xuICAgICAgICBjb2RlOiBzaXplRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2t1JyksXG4gICAgICAgIHRpdGxlOiBzaXplRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnKSxcbiAgICAgICAgbGFiZWw6IHNpemVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpLFxuICAgICAgICBhdmFpbGFibGU6ICFzaXplRWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2RhdGEtY29sb3ItZmxhdm9yLXVuYXZhaWxhYmxlJylcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RlZE9wdGlvbnM7XG4gIH1cblxuICBmdW5jdGlvbiByZXN0b3JlU2VsZWN0ZWRPcHRpb25zKCkge1xuICAgIGlmICghY2FjaGUuc2l6ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBxdWVyeSA9ICdbZGF0YS1sYWJlbD1cIicgKyBjYWNoZS5zaXplLmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpICsgJ1wiXSc7XG4gICAgdmFyIGVsZW1lbnQgPSBnZXRBcnJheUZyb21Eb20ocXVlcnkpWzBdO1xuXG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5wYXJlbnROb2RlICYmIGVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QgJiYgZWxlbWVudC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQpIHtcbiAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW2dldFNlbGxlcklkVXJsXVxuICAgKiBjaGVjayBpZiBoYXMgc2VsbGVyIGlkIGluIHVybCBhbmQgdGhlbiwgcmV0dXJuIGl0XG4gICAqIEByZXR1cm4ge051bWJlcn0gc2VsbGVySWRcbiAgICovXG4gIGZ1bmN0aW9uIGdldFNlbGxlcklkVXJsKCkge1xuICAgIGlmKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5kZXhPZignc2VsbGVySWQnKSA+PSAwKSB7XG4gICAgICB2YXIgYXJyUGFyYW1zID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zcGxpdCgnJicpO1xuICAgICAgdmFyIHNlbGxlcklkO1xuXG4gICAgICBhcnJQYXJhbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgIGNvbnN0IHJlZ2V4ID0gL3NlbGxlcklkXFw9WzAtOV17MSx9L2c7XG5cbiAgICAgICAgaWYocmVnZXgudGVzdChpdGVtKSkge1xuICAgICAgICAgIHNlbGxlcklkID0gaXRlbS5yZXBsYWNlKCdzZWxsZXJJZD0nLCAnJykucmVwbGFjZSgnPycsICcnKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBzZWxsZXJJZDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogW2NoZWNrQ2FjaGVkU2l6ZV1cbiAgICogY2hlY2sgaWYgaGFzIGFuIG9sZCBjYWNoZWQgc2l6ZSwgYW5kIGNvbXBhcmUgd2l0aCBvdGhlciBwb3NzaWJsZSBzaXplcyB0byBnZXQgY2xpY2tlZCBvbmVcbiAgICogQHJldHVybiB7RE9NRWxlbWVudH0gY2FjaGVkIFtzaXplIGVsZW1lbnQgdG8gY2FjaGVdXG4gICAqL1xuICBmdW5jdGlvbiBjaGVja0NhY2hlZFNpemUoKSB7XG4gICAgdmFyIHNpemVzID0gZ2V0QXJyYXlGcm9tRG9tKCdbJyArIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgKyAnPVwic2l6ZVwiXSAnICsgQUNUSVZFX09QVElPTl9RVUVSWSksXG4gICAgICBvbGRTaXplID0gY2FjaGUuc2l6ZSxcbiAgICAgIG9sZFNpemVBdHRyID0gb2xkU2l6ZSA/IG9sZFNpemUuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJykgOiBudWxsLFxuICAgICAgY2hlY2tlZFNlbGVjdGVkLFxuICAgICAgY2FjaGVkO1xuICAgIGlmIChzaXplcy5sZW5ndGggPiAxKSB7XG4gICAgICBzaXplcy5mb3JFYWNoKGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHZhciBzaXplQXR0ciA9IHNpemUuZ2V0QXR0cmlidXRlKCdkYXRhLWxhYmVsJykgPyBzaXplLmdldEF0dHJpYnV0ZSgnZGF0YS1sYWJlbCcpIDogbnVsbDtcbiAgICAgICAgaWYgKChzaXplQXR0ciAhPT0gb2xkU2l6ZUF0dHIpICYmICFjaGVja2VkU2VsZWN0ZWQpIHtcbiAgICAgICAgICBjYWNoZWQgPSBzaXplO1xuICAgICAgICAgIGNoZWNrZWRTZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYWNoZWQgPSBzaXplc1swXTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FjaGVkO1xuICB9XG5cbiAgLy8gL0FVWElMSUFSWVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUxvYWRpbmcoYWN0aW9uLCBlbGVtZW50KSB7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdzcGluLmxvYWRpbmcuYW5pbWF0ZScsXG4gICAgICBlbGVtZW50LFxuICAgICAgYWN0aW9uXG4gICAgKTtcbiAgfVxuXG4gIC8vRVZFTlRTXG4gIGZ1bmN0aW9uIHB1YlN1YkJlZm9yZUFqYXgoKSB7XG4gICAgY2FjaGUuY29sb3IgPSBnZXRBcnJheUZyb21Eb20oJ1snICsgQ09MT1JfRkxBVk9SX1NJWkVfQ09OVEVOVCArICc9XCJjb2xvclwiXSAnICsgQUNUSVZFX09QVElPTl9RVUVSWSlbMF07XG4gICAgY2FjaGUuZmxhdm9yID0gZ2V0QXJyYXlGcm9tRG9tKCdbJyArIENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlQgKyAnPVwiZmxhdm9yXCJdICcgKyBBQ1RJVkVfT1BUSU9OX1FVRVJZKVswXTtcbiAgICBjYWNoZS5zaXplID0gY2hlY2tDYWNoZWRTaXplKCk7XG4gIH1cblxuICBmdW5jdGlvbiBwdWJTdWJHZXRTZWxlY3RlZE9wdGlvbnMoY2FsbGJhY2spIHtcbiAgICBpZiAoIWNhbGxiYWNrKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNlbGVjdGVkT3B0aW9ucyA9IGdldFNlbGVjdGVkT3B0aW9ucygpO1xuICAgIGNhbGxiYWNrKHNlbGVjdGVkT3B0aW9ucy5zaXplID8gc2VsZWN0ZWRPcHRpb25zLnNpemUuY29kZSA6IHVuZGVmaW5lZCk7XG4gIH1cblxuICAvLyAvRVZFTlRTXG4gIGZ1bmN0aW9uIHVwZGF0ZUNvbnRlbnQoc3RhdGUpIHtcbiAgICB2YXIgZ29Ub0xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3BsaXQoJyMnKS5sZW5ndGggPiAxO1xuICAgIGlmICghZ29Ub0xvY2F0aW9uKSB7XG4gICAgICBpZiAoIXN0YXRlKSBoaXN0b3J5LmJhY2soKTtcblxuICAgICAgaWYgKE9iamVjdC5rZXlzKHN0YXRlKS5sZW5ndGgpIHtcbiAgICAgICAgc3RhdGUgPSBKU09OLnBhcnNlKHN0YXRlKTtcbiAgICAgICAgaWYgKHN0YXRlLmNvbnRlbnQgJiYgc3RhdGUuY29udGVudCAhPT0gJycpIHtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1za3UtY2hhbmdlZC10YXJnZXRdJykuaW5uZXJIVE1MID0gc3RhdGUuY29udGVudDtcbiAgICAgICAgICByZWluaXQoKTtcbiAgICAgICAgICBjb21wb25lbnRzUmVpbml0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gL1BVQlNVQiBFVkVOVCBIQU5ETEVSU1xuXG4gIC8qKlxuICAgKiBbc2V0U2VsbGVySWRWYWx1ZV1cbiAgICogY2hlY2tzIHRoZSBzZWxsZXJJZCdzIHJlZmVyZW5jZSwgdG8gZm9yY2UgaXQgdG8gYWx3YXlzIHNob3cgdGhhdCBzZWxsZXIncyBwcm9kdWN0IGZpcnN0LlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gc2V0U2VsbGVySWRWYWx1ZSgpIHtcbiAgICB2YXIgcmVmZXJyZXIgPSBkb2N1bWVudC5yZWZlcnJlcjtcbiAgICB2YXIgcmVmZXJyZXJJc1NlbGxlclBhZ2UgPSAoL2xvamlzdGEvZykudGVzdChyZWZlcnJlcikgfHwgKC9idXNjYVxcP3NlbGxlcnM9L2cpLnRlc3QocmVmZXJyZXIpO1xuXG4gICAgaWYocmVmZXJyZXJJc1NlbGxlclBhZ2UpIHtcbiAgICAgIHZhciBzZWxsZXJJZCA9IGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaC5yZXBsYWNlKCc/c2VsbGVySWQ9JywgJycpO1xuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3NlbGxlcklkUGRwQ0ZTJywgc2VsbGVySWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnc2VsbGVySWRQZHBDRlMnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogW2hpZGVQZXJzb25hSHlicmlkUHJvZHVjdHNdXG4gICAqIGNoZWNraW5nIGlmIGl0IGlzIG5lY2Vzc2FyeSB0byBoaWRlIHBlcnNvbmFsaXphdGlvbiBib3gsIGZvciBoeWJyaWQgcHJvZHVjdHMsIHdoZW4gdGhlIHNlbGxlciBpZCBpcyBpbiB0aGUgdXJsLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgZnVuY3Rpb24gaGlkZVBlcnNvbmFIeWJyaWRQcm9kdWN0cygpIHtcbiAgICBpZigoL3NlbGxlcklkXFw9LykudGVzdCh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSkge1xuICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wZXJzb25hbGl6YXRpb24nKSkge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGVyc29uYWxpemF0aW9uJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAoZnVuY3Rpb24gKCkge1xuICAgIGluaXQoZ2V0QXJyYXlGcm9tRG9tKENPTE9SX0ZMQVZPUl9TSVpFX0NPTlRFTlRfUVVFUlkpKTtcbiAgICB3aW5kb3cub25wb3BzdGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIHVwZGF0ZUNvbnRlbnQoZXZlbnQuc3RhdGUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2t1LWNoYW5nZWQtdGFyZ2V0XScpLmlubmVySFRNTDtcbiAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeShjb250ZW50KTtcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoXG4gICAgICAgICAgJ3tcImNvbnRlbnRcIjogJyArIGNvbnRlbnQgKyAnLCBcInBhZ2VcIjogJyArIGNvdW50U3RhdGUgKyAnfScsXG4gICAgICAgICAgZG9jdW1lbnQudGl0bGUsXG4gICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWZcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2lzaGxpc3QgLndpc2hsaXN0X19oZWFydCcpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aXNobGlzdCAud2lzaGxpc3RfX2hlYXJ0JykuZ2V0QXR0cmlidXRlKCdkYXRhLXRlbXBsYXRlJykgPT09ICdwZHAnKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ3dpc2hsaXN0LmNoZWNrRmF2b3JpdGVQcm9kdWN0cycpO1xuICAgIH1cblxuICAgIGlmICghZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3F1aWNrdmlldy1jb250YWluZXInKSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCdTaGlwcGluZy5yZXN0YXJ0Jyk7XG4gICAgfVxuXG4gICAgaWYgKEZSRUVTSElQUElOR19FTkFCTEVEKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ3JldHVybkNoZWNrZWRGcmVlU2hpcHBpbmcnLCByZXF1ZXN0U3VjY2Vzc0hhbmRsZXIpO1xuICAgIH1cblxuICAgIC8vd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdSZXN0Q2xpZW50LmJlZm9yZUFqYXgnLCBwdWJTdWJCZWZvcmVBamF4KTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ0NvbG9yRmxhdm9yU2l6ZS5zZWxlY3Quc2l6ZScsIHB1YlN1YkdldFNlbGVjdGVkT3B0aW9ucyk7XG4gICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdDb2xvckZsYXZvclNpemUucmVzdGFydCcsIGNvbXBvbmVudHNSZWluaXQpO1xuXG4gICAgLy9jaGVja3MgdGhlIHNlbGxlcklkJ3MgcmVmZXJlbmNlLCB0byBmb3JjZSBpdCB0byBhbHdheXMgc2hvdyB0aGF0IHNlbGxlcidzIHByb2R1Y3QgZmlyc3RcbiAgICBzZXRTZWxsZXJJZFZhbHVlKCk7XG5cbiAgICAvL2NoZWNraW5nIGlmIGl0IGlzIG5lY2Vzc2FyeSB0byBoaWRlIHBlcnNvbmFsaXphdGlvbiBib3gsIGZvciBoeWJyaWQgcHJvZHVjdHMsIHdoZW4gdGhlIHNlbGxlciBpZCBpcyBpbiB0aGUgdXJsLlxuICAgIGhpZGVQZXJzb25hSHlicmlkUHJvZHVjdHMoKTtcbiAgfSgpKTtcblxufSgpKTtcbiJdfQ==
