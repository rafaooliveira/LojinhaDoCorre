"use strict";!function(){function e(){try{T.dispatch(T.actionTypes.CHANGE_PERSONA_BUILDER,B)}catch(e){console.error("builder-combo.saveState",e)}}function r(){try{return parseInt(document.querySelector("[builder-slider]").offsetWidth,0)}catch(e){return console.error("builder.getStepWidth",e),0}}function t(e,r){try{var t=B.currContainerPosition+e*r;B.currContainerPosition=t,o(t)}catch(n){console.error("builder.moveContainer",n)}}function o(e){try{var r=document.querySelector("[builder-slider]");r.style.transform="translateX(-"+e+"px)"}catch(t){console.error("builder.setContainerPosition",t)}}function n(){try{B.currStep>1&&B.totalSteps>1&&(B.currStep--,t(-1,r()),d(),window.freedom.nsPubSub.pub("builder.steps.change",B.currStep),e())}catch(o){console.error("builder.handlePrevButton",o)}}function u(){try{B.steps[B.currStep]||p(B.currStep),B.steps[B.currStep]&&B.totalSteps>B.currStep&&B.totalSteps>1&&(S(B.currStep),B.eligibleWord[B.currStep]&&(B.eligibleWord[B.currStep].status=!0),c(function(){B.currStep++,t(1,r()),d(),window.freedom.nsPubSub.pub("builder.steps.change",B.currStep),e()}))}catch(o){console.error("builder.handleNextButton",o)}}function i(e){try{var r=e.pdp.persona.form.currField.value,t=e.pdp.persona.form.currField.type;B.eligibleWord[B.currStep]={status:!0,value:r,type:t}}catch(o){console.error("builder.updateCurrentWord",o)}}function c(e){try{var r=B.eligibleWord[B.currStep];if(r&&"text"!==r.type||!document.querySelector("[builder-block-words]"))e();else{var t=B.eligibleWord[B.currStep],o=t?t.value:null;if(o){var n=document.querySelector("[data-builder-country-code]").value;window.freedom.restClient.request("/block-words/api/blacklist/words/analyse?text="+o,{method:"get",type:"json",headers:{country:n},complete:function(r){r.eligible?(B.eligibleWord[B.currStep].status=!0,e()):(B.eligibleWord[B.currStep].status=!1,p(B.currStep))},error:function(){e(),B.eligibleWord[B.currStep].status=!0}})}else e()}}catch(u){e(),console.error("builder.validateWords",u)}}function l(){try{var r=document.querySelector("[steps-quantity]");r&&(B.totalSteps=parseInt(r.getAttribute("steps-quantity"),0)),e()}catch(t){console.error("builder.fillLoadedStats",t)}}function d(){try{var e=document.querySelector("[builder-btn-prev]"),r=document.querySelector("[builder-btn-next]"),t=document.querySelector("[data-builder-persona-buy-btn]");B.currStep>1?window.freedom.removeClass(e,"block"):window.freedom.addClass(e,"block"),B.totalSteps===B.currStep?(window.freedom.addClass(r,"hide"),t.style.display="inline-block",B.steps[B.currStep]&&y(!0)):(window.freedom.removeClass(r,"hide"),t.style.display="none")}catch(o){console.error("builder.handleButtonsStats",o)}}function s(){try{o(B.currContainerPosition)}catch(e){console.error("builder.restoreContainerPosition",e)}}function a(e){try{B.steps[B.currStep]=e,B.currStep===B.totalSteps&&y(e)}catch(r){console.error("builder.restoreContainerPosition",r)}}function p(e){try{var r='[data-step-number="'+e+'"]';r+="[builder-step-error]";var t="",o=T.getState(["pdp","persona","builder","builderJson","steps"]),n=o[B.currStep-1];t=B.checkedSteps[e]||n.multiOptions?window.freedom.i18n.getMessage("personalization_fields_generic_error"):window.freedom.i18n.getMessage("personalization_fields_select_error"),B.eligibleWord[B.currStep]&&!B.eligibleWord[B.currStep].status&&(t=window.freedom.i18n.getMessage("product_errors_cart_persona_not_allow"));var u=document.querySelector(r);u&&(u.innerHTML=t,document.querySelector(".mobile")&&b(e))}catch(i){console.error("builder.showStepErrorMessage",i)}}function b(e){try{var r=document.querySelector('.builder__step[data-step-number="'+e+'"]');r.scrollIntoView(!1)}catch(t){console.error("builder.scrollToMessage",t)}}function S(e){try{var r='[data-step-number="'+e+'"]';r+="[builder-step-error]";var t=document.querySelector(r);t&&(t.innerHTML="")}catch(o){console.error("builder.showStepErrorMessage",o)}}function f(e){try{B.checkedSteps[e]=!0}catch(r){console.error("builder.changeStepSelectedStatus",r)}}function m(){try{B.steps[B.currStep]||p(B.currStep),B.steps[B.currStep]&&S(B.currStep)}catch(e){console.error("builder.handleBuyButtonWrapper",e)}}function y(e){try{var r=document.querySelector("[data-builder-persona-buy-btn] .buy-button-now");r&&(e?window.freedom.removeClass(r,"buy-button-now--disabled"):window.freedom.addClass(r,"buy-button-now--disabled"))}catch(t){console.error("personalization.toggleBuyButtonStatus")}}function w(){var e=[];try{for(var r,t,o,n,u=T.getState(["pdp","persona","builder","builderJson","steps"]),i=T.getState(["pdp","persona","builder"]).totalSteps;i--;)r=i+1,n=B.steps[r],n&&(u[i].multiOptions?e=h(r):(o=document.querySelector('[builder-combo-select][builder-combo-step="'+r+'"]'),t=o.value,"no-persona"!==t&&e.push({sku:t,step:r})))}catch(c){console.error("personalization.getSelectedPersonas",c)}finally{return e}}function h(e){var r=[];try{var t,o=document.querySelectorAll('[builder-input][builder-input-step="'+e+'"]'),n=document.querySelectorAll('[builder-input-slider][builder-input-step="'+e+'"]:checked'),u=[],i=T.getState(["pdp","persona","form","validFields"]),c=0;for(o=window.freedom.nodeListToArray(o),n=window.freedom.nodeListToArray(n),u=o.concat(n),c=u.length;c--;)t=u[c].getAttribute("builder-input-sku"),i[t]&&r.push({sku:t,step:e})}catch(l){console.error("personalization.getAllStepInputs",l)}finally{return r}}function v(e,r){var t=0,o="";o+="[builder-price]",o+='[builder-price-step="'+r+'"]',o+='[builder-price-sku="'+e+'"]';try{var n=document.querySelector(o);n&&(t=parseInt(n.getAttribute("builder-price"),10))}catch(u){console.error("personalization.getPersonaPrice",u)}finally{return t}}function g(){for(var e=0,r=w(),t=r.length;t--;){var o=t,n=r[o],u=v(n.sku,n.step);e+=u}return e}function P(e){try{return window.freedom.i18n.getMessage(e)}catch(r){return console.error("personalization.get.i18n.message",r),null}}function q(e){var r=P("currency_symbol"),t=String(e||"000").replace(/\B(?=(\d{2})(?!\d))/,",").replace(/\B(?=(\d{3})+(?!\d))/g,".");return r+" "+t}function _(){try{var e=document.querySelector(".builder__amount-value"),r=g();e&&(e.textContent=q(r))}catch(t){console.error("personalization.updateBuilderAmount",t)}}function C(){try{var e=document.querySelector(".builder__amount");B.currStep===B.totalSteps?window.freedom.removeClass(e,"builder__amount--hide"):window.freedom.addClass(e,"builder__amount--hide")}catch(r){console.log("personalization.handleBuilderAmountElement",r)}}function k(){if(document.querySelector(".mobile")&&!document.querySelector("[builder-touch-moviment]")){var e=navigator.userAgent,r=/iPad|iPhone|iPod/.test(e);if(r){var t=document.querySelector("[builder-container]");t&&(t.ontouchmove=function(e){e.preventDefault()})}}}function A(e){try{var r=e.changedTouches[0],t=parseInt(r.clientX,10)-B.startX;t<=-150&&!M?(u(),M=!0,W()):t>150&&!M&&(M=!0,n(),W()),e.preventDefault()}catch(o){console.error("builder.handleTouchEvent",o)}}function W(){setTimeout(function(){M=!1},500)}function E(){try{if(!document.querySelector(".mobile"))return;if(document.querySelector("[builder-touch-moviment]")){var e=document.querySelector("[builder-container]");e.addEventListener("touchstart",function(e){var r=e.changedTouches[0];B.startX=parseInt(r.clientX,10)},!1),e.addEventListener("touchmove",A,!1)}}catch(r){console.error("builder.listenTouchEvent",r)}}var B={currContainerPosition:0,currStep:1,totalSteps:1,steps:{},checkedSteps:{},startX:0,eligibleWord:{}},T=window.freedom.NsStore,M=!1;T.subscribe(T.actionTypes.CHANGE_PERSONA_BUILDER,C),T.subscribe(T.actionTypes.CHANGE_PERSONA_FORM,i),window.freedom.live("[data-builder-persona-buy-btn]","click",m),window.freedom.nsPubSub.sub("builder-combo.after.change",f),window.freedom.nsPubSub.sub("builder-combo.after.change",S),window.freedom.nsPubSub.sub("builder-combo.after.change",_),window.freedom.nsPubSub.sub("builder.builder-form.step.validate",a),window.freedom.nsPubSub.sub("builder.builder-form.step.validate",_),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",k),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",l),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",E),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",d),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",s),window.freedom.nsPubSub.sub("builder-wrapper.after.rendered",_),window.freedom.live("[builder-btn-prev]","click",n),window.freedom.live("[builder-btn-next]","click",u)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fdGVtcGxhdGVzL3BlcnNvbmFsaXphdGlvbi9idWlsZGVyL2FsbC9idWlsZGVyLm1pbi5qcyJdLCJuYW1lcyI6WyJ1cGRhdGVTdG9yZSIsInN0b3JlIiwiZGlzcGF0Y2giLCJhY3Rpb25UeXBlcyIsIkNIQU5HRV9QRVJTT05BX0JVSUxERVIiLCJzdGF0ZSIsImVycm9yIiwiY29uc29sZSIsImdldFN0ZXBXaWR0aCIsInBhcnNlSW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0V2lkdGgiLCJtb3ZlQ29udGFpbmVyIiwiZGlyZWN0aW9uIiwiZGlzdGFuY2UiLCJtb3ZpbWVudFB4IiwiY3VyckNvbnRhaW5lclBvc2l0aW9uIiwic2V0Q29udGFpbmVyUG9zaXRpb24iLCJwb3NpdGlvbiIsImNvbnRhaW5lckVsIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJoYW5kbGVQcmV2QnV0dG9uIiwiY3VyclN0ZXAiLCJ0b3RhbFN0ZXBzIiwiaGFuZGxlQnV0dG9uc1N0YXRzIiwid2luZG93IiwiZnJlZWRvbSIsIm5zUHViU3ViIiwicHViIiwiaGFuZGxlTmV4dEJ1dHRvbiIsInN0ZXBzIiwic2hvd1N0ZXBFcnJvck1lc3NhZ2UiLCJjbGVhclN0ZXBFcnJvck1lc3NhZ2UiLCJlbGlnaWJsZVdvcmQiLCJzdGF0dXMiLCJ2YWxpZGF0ZVdvcmRzIiwidXBkYXRlQ3VycmVudFdvcmQiLCJ3b3JkIiwicGRwIiwicGVyc29uYSIsImZvcm0iLCJjdXJyRmllbGQiLCJ2YWx1ZSIsInR5cGUiLCJjYWxsYmFjayIsImNvdW50cnlDb2RlIiwicmVzdENsaWVudCIsInJlcXVlc3QiLCJtZXRob2QiLCJoZWFkZXJzIiwiY291bnRyeSIsImNvbXBsZXRlIiwicmVzcG9uc2UiLCJlbGlnaWJsZSIsImZpbGxMb2FkZWRTdGF0cyIsInRvdGFsU3RlcFN0cmluZyIsImdldEF0dHJpYnV0ZSIsInByZXZCdXR0b24iLCJuZXh0QnV0dG9uIiwiYnVpbGRlckJ1eUJ0biIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJkaXNwbGF5IiwidG9nZ2xlQnV5QnV0dG9uU3RhdHVzIiwicmVzdG9yZUNvbnRhaW5lclBvc2l0aW9uIiwidXBkYXRlU3RlcFZhbGlkYXRpb25TdGF0dXMiLCJzdGVwIiwicXVlcnkiLCJtZXNzYWdlIiwiZ2V0U3RhdGUiLCJjaGVja2VkU3RlcHMiLCJtdWx0aU9wdGlvbnMiLCJpMThuIiwiZ2V0TWVzc2FnZSIsIm1lc3NhZ2VFbCIsImlubmVySFRNTCIsInNjcm9sbFRvTWVzc2FnZSIsImNvbnRhaW5lciIsInNjcm9sbEludG9WaWV3IiwiY2hhbmdlU3RlcFNlbGVjdGVkU3RhdHVzIiwiaGFuZGxlQnV5QnV0dG9uV3JhcHBlciIsImJ0biIsImdldFNlbGVjdGVkUGVyc29uYXMiLCJzZWxlY3RlZFBlcnNvbmFzIiwic2t1IiwiYnVpbGRlckVsIiwic3RlcFZhbGlkIiwiaSIsImdldEFsbFN0ZXBJbnB1dHMiLCJwdXNoIiwibGlzdCIsInN0ZXBJbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic3RlcFJhZGlvcyIsImlucHV0cyIsInZhbGlkRmllbGRzIiwieCIsIm5vZGVMaXN0VG9BcnJheSIsImNvbmNhdCIsImxlbmd0aCIsImdldFBlcnNvbmFQcmljZSIsInBlcnNvbmFQcmljZSIsIlBFUlNPTkFfUFJJQ0VfU0VMRUNUT1IiLCJwZXJzb25hUHJpY2VFbGVtZW50IiwiZ2V0QnVpbGRlckFtb3VudCIsImJ1aWxkZXJBbW91bnQiLCJwZXJzb25hTGlzdCIsInBlcnNvbmFMaXN0TGVuZ3RoIiwicGVyc29uYUluZGV4IiwiZ2V0STE4bk1lc3NhZ2UiLCJrZXkiLCJhcHBseUN1cnJlbmN5TWFzayIsInByaWNlIiwiY3VycmVuY3lTeW1ib2wiLCJmb21hdGVkUHJpY2UiLCJTdHJpbmciLCJyZXBsYWNlIiwidXBkYXRlQnVpbGRlckFtb3VudCIsImJ1aWxkZXJBbW91bnRWYWx1ZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsImhhbmRsZUJ1aWxkZXJBbW91bnRFbGVtZW50IiwiYnVpbGRlckFtb3VudEVsZW1lbnQiLCJsb2ciLCJibG9ja1RvdWNoSW9zIiwidWEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJpT1MiLCJ0ZXN0Iiwib250b3VjaG1vdmUiLCJlIiwicHJldmVudERlZmF1bHQiLCJoYW5kbGVUb3VjaEV2ZW50IiwidG91Y2hvYmoiLCJjaGFuZ2VkVG91Y2hlcyIsImRpc3QiLCJjbGllbnRYIiwic3RhcnRYIiwidG91Y2hJc09jY3VycmluZyIsInN0b3BUb3VjaE9jdXJyaW5nIiwic2V0VGltZW91dCIsImxpc3RlblRvdWNoRXZlbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiTnNTdG9yZSIsInN1YnNjcmliZSIsIkNIQU5HRV9QRVJTT05BX0ZPUk0iLCJsaXZlIiwic3ViIl0sIm1hcHBpbmdzIjoiQUFBQSxjQUVDLFdBaUJDLFFBQVNBLEtBQ1AsSUFDRUMsRUFBTUMsU0FBU0QsRUFBTUUsWUFBWUMsdUJBQXdCQyxHQUN6RCxNQUFPQyxHQUNQQyxRQUFRRCxNQUFNLDBCQUEyQkEsSUFRN0MsUUFBU0UsS0FDUCxJQUNFLE1BQU9DLFVBQVNDLFNBQVNDLGNBQWMsb0JBQW9CQyxZQUFhLEdBQ3hFLE1BQU9OLEdBRVAsTUFEQUMsU0FBUUQsTUFBTSx1QkFBd0JBLEdBQy9CLEdBU1gsUUFBU08sR0FBY0MsRUFBV0MsR0FDaEMsSUFDRSxHQUFJQyxHQUFhWCxFQUFNWSxzQkFBd0JILEVBQVlDLENBQzNEVixHQUFNWSxzQkFBd0JELEVBRTlCRSxFQUFxQkYsR0FDckIsTUFBT1YsR0FDUEMsUUFBUUQsTUFBTSx3QkFBeUJBLElBUTNDLFFBQVNZLEdBQXFCQyxHQUM1QixJQUNFLEdBQUlDLEdBQWNWLFNBQVNDLGNBQWMsbUJBQ3pDUyxHQUFZQyxNQUFNQyxVQUFZLGVBQWlCSCxFQUFXLE1BQzFELE1BQU9iLEdBQ1BDLFFBQVFELE1BQU0sK0JBQWdDQSxJQU9sRCxRQUFTaUIsS0FDUCxJQUNLbEIsRUFBTW1CLFNBQVcsR0FBS25CLEVBQU1vQixXQUFhLElBQzFD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U3dILElBQUksNkJBQThCOUIsR0FDMUQ1RixPQUFPQyxRQUFRQyxTQUFTd0gsSUFBSSxxQ0FBc0NsRixHQUNsRXhDLE9BQU9DLFFBQVFDLFNBQVN3SCxJQUFJLHFDQUFzQzlCLEdBQ2xFNUYsT0FBT0MsUUFBUUMsU0FBU3dILElBQUksaUNBQWtDeEIsR0FDOURsRyxPQUFPQyxRQUFRQyxTQUFTd0gsSUFBSSxpQ0FBa0M3RixHQUM5RDdCLE9BQU9DLFFBQVFDLFNBQVN3SCxJQUFJLGlDQUFrQ04sR0FDOURwSCxPQUFPQyxRQUFRQyxTQUFTd0gsSUFBSSxpQ0FBa0MzSCxHQUM5REMsT0FBT0MsUUFBUUMsU0FBU3dILElBQUksaUNBQWtDbkYsR0FDOUR2QyxPQUFPQyxRQUFRQyxTQUFTd0gsSUFBSSxpQ0FBa0M5QixHQUM5RDVGLE9BQU9DLFFBQVF3SCxLQUFLLHFCQUFzQixRQUFTN0gsR0FDbkRJLE9BQU9DLFFBQVF3SCxLQUFLLHFCQUFzQixRQUFTckgiLCJmaWxlIjoiX3JlZmFjdG9yaW5nL190ZW1wbGF0ZXMvcGVyc29uYWxpemF0aW9uL2J1aWxkZXIvYWxsL2J1aWxkZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24oKXtcbiAgdmFyIHN0YXRlID0ge1xuICAgIGN1cnJDb250YWluZXJQb3NpdGlvbjogMCxcbiAgICBjdXJyU3RlcDogMSxcbiAgICB0b3RhbFN0ZXBzOiAxLFxuICAgIHN0ZXBzOiB7fSxcbiAgICBjaGVja2VkU3RlcHM6IHt9LFxuICAgIHN0YXJ0WDogMCxcbiAgICBlbGlnaWJsZVdvcmQ6IHt9XG4gIH07XG5cbiAgdmFyIHN0b3JlID0gd2luZG93LmZyZWVkb20uTnNTdG9yZTtcbiAgdmFyIHRvdWNoSXNPY2N1cnJpbmcgPSBmYWxzZTtcblxuICAgIC8qKlxuICAgKiBmdW5jdGlvbiB0byBkaXNwYXRjaCBsb2NhbCBzdGF0ZSB0byBzdG9yZVxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlU3RvcmUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHN0b3JlLmRpc3BhdGNoKHN0b3JlLmFjdGlvblR5cGVzLkNIQU5HRV9QRVJTT05BX0JVSUxERVIsIHN0YXRlKTsgLy9kaXNwYXRjaCB0byBzdGF0ZVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLWNvbWJvLnNhdmVTdGF0ZScsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAgIC8qKlxuICAgKiBmdW5jdGlvbiB0byBnZXQgc2luZ2xlIHN0ZXBzIHdpZHRoXG4gICAqIEByZXR1cm4ge2ludH0gLSBhbGwgc3RlcHMgd2lkdGhcbiAgICovXG4gIGZ1bmN0aW9uIGdldFN0ZXBXaWR0aCgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tidWlsZGVyLXNsaWRlcl0nKS5vZmZzZXRXaWR0aCwgMCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIuZ2V0U3RlcFdpZHRoJywgZXJyb3IpO1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIG1vdmUgdGhlIGNvbnRhaW5lciBieSBldmVudCAobmV4dC9wcmV2KVxuICAgKiBAcGFyYW0ge2ludH0gZGlyZWN0aW9uIC0gbnVtYmVyIHBvc2l0aXZlIG9yIG5lZ2F0aXZlIHRvIG1vdmUgdGhlIGNvbnRhaW5lclxuICAgKiBAcGFyYW0ge2ludH0gZGlzdGFuY2UgLSBkaXN0YW5jZSBpbiBweCB0byBtb3ZlXG4gICAqL1xuICBmdW5jdGlvbiBtb3ZlQ29udGFpbmVyKGRpcmVjdGlvbiwgZGlzdGFuY2UpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIG1vdmltZW50UHggPSBzdGF0ZS5jdXJyQ29udGFpbmVyUG9zaXRpb24gKyBkaXJlY3Rpb24gKiBkaXN0YW5jZTtcbiAgICAgIHN0YXRlLmN1cnJDb250YWluZXJQb3NpdGlvbiA9IG1vdmltZW50UHg7XG5cbiAgICAgIHNldENvbnRhaW5lclBvc2l0aW9uKG1vdmltZW50UHgpOy8vbW92ZSB0aGUgY29udGFpbmVyIGRvbVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLm1vdmVDb250YWluZXInLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIG1vdmUgdGhlIGNvbnRhaW5lckRPTSBieSBweFxuICAgKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb24gLSBwb3NpdGlvbiBvZiBjb250YWluZXJcbiAgICovXG4gIGZ1bmN0aW9uIHNldENvbnRhaW5lclBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBjb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tidWlsZGVyLXNsaWRlcl0nKTtcbiAgICAgIGNvbnRhaW5lckVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVYKC0nICsgcG9zaXRpb24gKyAncHgpJztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignYnVpbGRlci5zZXRDb250YWluZXJQb3NpdGlvbicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBwcmV2ZW50IGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlUHJldkJ1dHRvbigpIHtcbiAgICB0cnkge1xuICAgICAgaWYoc3RhdGUuY3VyclN0ZXAgPiAxICYmIHN0YXRlLnRvdGFsU3RlcHMgPiAxKSB7XG4gICAgICAgIHN0YXRlLmN1cnJTdGVwLS07XG4gICAgICAgIG1vdmVDb250YWluZXIoLTEsIGdldFN0ZXBXaWR0aCgpKTtcbiAgICAgICAgaGFuZGxlQnV0dG9uc1N0YXRzKCk7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignYnVpbGRlci5zdGVwcy5jaGFuZ2UnLCBzdGF0ZS5jdXJyU3RlcCk7XG4gICAgICAgIHVwZGF0ZVN0b3JlKCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIuaGFuZGxlUHJldkJ1dHRvbicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gaGFuZGxlIHRoZSBuZXh0IGJ1dHRvbiBjbGlja1xuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlTmV4dEJ1dHRvbigpIHtcbiAgICB0cnkge1xuICAgICAgaWYoIXN0YXRlLnN0ZXBzW3N0YXRlLmN1cnJTdGVwXSkgeyAvL2lmIHRoZSBzdGVwIGlzIHZhbGlkIChiYXNlZCBvbiBmb3JtIHB1YiB0byB2YWxpZGF0aW9uKVxuICAgICAgICBzaG93U3RlcEVycm9yTWVzc2FnZShzdGF0ZS5jdXJyU3RlcCk7IC8vY2FsbCBlcnJvciBtZXNzYWdlXG4gICAgICB9XG5cbiAgICAgIGlmKHN0YXRlLnN0ZXBzW3N0YXRlLmN1cnJTdGVwXSAmJiBzdGF0ZS50b3RhbFN0ZXBzID4gc3RhdGUuY3VyclN0ZXAgJiYgc3RhdGUudG90YWxTdGVwcyA+IDEpIHtcbiAgICAgICAgY2xlYXJTdGVwRXJyb3JNZXNzYWdlKHN0YXRlLmN1cnJTdGVwKTsgLy9jbGVhciB0aGUgbWVzc2FnZSBlcnJvciBpZiBleGlzdHNcblxuICAgICAgICBpZihzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdKSB7XG4gICAgICAgICAgc3RhdGUuZWxpZ2libGVXb3JkW3N0YXRlLmN1cnJTdGVwXS5zdGF0dXMgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsaWRhdGVXb3JkcyhmdW5jdGlvbigpIHtcbiAgICAgICAgICBzdGF0ZS5jdXJyU3RlcCsrO1xuICAgICAgICAgIG1vdmVDb250YWluZXIoMSwgZ2V0U3RlcFdpZHRoKCkpO1xuICAgICAgICAgIGhhbmRsZUJ1dHRvbnNTdGF0cygpO1xuICAgICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignYnVpbGRlci5zdGVwcy5jaGFuZ2UnLCBzdGF0ZS5jdXJyU3RlcCk7XG4gICAgICAgICAgdXBkYXRlU3RvcmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIuaGFuZGxlTmV4dEJ1dHRvbicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gbGlzdGVuIHdoZW4gdGhlIGZvcm0gY3VycmVudCB3b3JkIGNoYW5nZVxuICAgKiBAcGFyYW0ge29iamVjdH0gc3RhdHVzXG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVDdXJyZW50V29yZChzdGF0dXMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHdvcmQgPSBzdGF0dXMucGRwLnBlcnNvbmEuZm9ybS5jdXJyRmllbGQudmFsdWUsXG4gICAgICAgIHR5cGUgPSBzdGF0dXMucGRwLnBlcnNvbmEuZm9ybS5jdXJyRmllbGQudHlwZTtcblxuICAgICAgc3RhdGUuZWxpZ2libGVXb3JkW3N0YXRlLmN1cnJTdGVwXSA9IHtcbiAgICAgICAgc3RhdHVzOiB0cnVlLFxuICAgICAgICB2YWx1ZTogd29yZCxcbiAgICAgICAgdHlwZTogdHlwZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignYnVpbGRlci51cGRhdGVDdXJyZW50V29yZCcsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gZ2V0IHRoZSB3b3JkIHZhbGlkYXRpb25cbiAgICogIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIC0gY2FsbGJhY2sgdG8gcHJvY2NlZCB0aGUgbmV4dCBzdGVwXG4gICAqL1xuICBmdW5jdGlvbiB2YWxpZGF0ZVdvcmRzKGNhbGxiYWNrKSB7XG4gICAgdHJ5IHtcbiAgICAgIC8vaWYgY3VycmVudCBpbnB1dCBpc250IGEgdGV4dCBpbnB1dFxuICAgICAgdmFyIGVsaWdpYmxlV29yZCA9IHN0YXRlLmVsaWdpYmxlV29yZFtzdGF0ZS5jdXJyU3RlcF07XG4gICAgICBpZihlbGlnaWJsZVdvcmQgJiYgZWxpZ2libGVXb3JkLnR5cGUgIT09ICd0ZXh0JyB8fCAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2J1aWxkZXItYmxvY2std29yZHNdJykpIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjdXJyU3RlcCA9IHN0YXRlLmVsaWdpYmxlV29yZFtzdGF0ZS5jdXJyU3RlcF07XG4gICAgICAgIHZhciB3b3JkID0gY3VyclN0ZXAgPyBjdXJyU3RlcC52YWx1ZSA6IG51bGw7XG5cbiAgICAgICAgaWYod29yZCkge1xuICAgICAgICAgIHZhciBjb3VudHJ5Q29kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ1aWxkZXItY291bnRyeS1jb2RlXScpLnZhbHVlO1xuXG4gICAgICAgICAgd2luZG93LmZyZWVkb20ucmVzdENsaWVudC5yZXF1ZXN0KCcvYmxvY2std29yZHMvYXBpL2JsYWNrbGlzdC93b3Jkcy9hbmFseXNlP3RleHQ9JyArIHdvcmQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICAgICAgICB0eXBlOiAnanNvbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIGNvdW50cnk6IGNvdW50cnlDb2RlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgaWYocmVzcG9uc2UuZWxpZ2libGUpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdLnN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdLnN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHNob3dTdGVwRXJyb3JNZXNzYWdlKHN0YXRlLmN1cnJTdGVwKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICBzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdLnN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLnZhbGlkYXRlV29yZHMnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGZpbGwgdGhlIHN0YXRlIHdpdGggdGhlIERPTSBpbmZvcm1hdGlvbnMgbG9hZGVkXG4gICAqL1xuICBmdW5jdGlvbiBmaWxsTG9hZGVkU3RhdHMoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciB0b3RhbFN0ZXBTdHJpbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbc3RlcHMtcXVhbnRpdHldJyk7XG5cbiAgICAgIGlmKHRvdGFsU3RlcFN0cmluZykge1xuICAgICAgICBzdGF0ZS50b3RhbFN0ZXBzID0gcGFyc2VJbnQodG90YWxTdGVwU3RyaW5nLmdldEF0dHJpYnV0ZSgnc3RlcHMtcXVhbnRpdHknKSwgMCk7XG4gICAgICB9XG5cbiAgICAgIHVwZGF0ZVN0b3JlKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIuZmlsbExvYWRlZFN0YXRzJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBtYW5pcHVsYXRlIHRoZSBidXR0b25zIHRoYXQgc2hvdWxkIGJlIHNob3cgb3IgYmxvY2tcbiAgICovXG4gIGZ1bmN0aW9uIGhhbmRsZUJ1dHRvbnNTdGF0cygpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHByZXZCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbYnVpbGRlci1idG4tcHJldl0nKTtcbiAgICAgIHZhciBuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2J1aWxkZXItYnRuLW5leHRdJyk7XG4gICAgICB2YXIgYnVpbGRlckJ1eUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ1aWxkZXItcGVyc29uYS1idXktYnRuXScpO1xuXG4gICAgICBpZihzdGF0ZS5jdXJyU3RlcCA+IDEpIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20ucmVtb3ZlQ2xhc3MocHJldkJ1dHRvbiwgJ2Jsb2NrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aW5kb3cuZnJlZWRvbS5hZGRDbGFzcyhwcmV2QnV0dG9uLCAnYmxvY2snKTtcbiAgICAgIH1cblxuICAgICAgaWYoc3RhdGUudG90YWxTdGVwcyA9PT0gc3RhdGUuY3VyclN0ZXApIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3MobmV4dEJ1dHRvbiwgJ2hpZGUnKTtcbiAgICAgICAgYnVpbGRlckJ1eUJ0bi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG5cbiAgICAgICAgaWYoc3RhdGUuc3RlcHNbc3RhdGUuY3VyclN0ZXBdKSB7IC8vaWYgdGhlIHN0ZXAgaXMgdmFsaWRcbiAgICAgICAgICB0b2dnbGVCdXlCdXR0b25TdGF0dXModHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLnJlbW92ZUNsYXNzKG5leHRCdXR0b24sICdoaWRlJyk7XG4gICAgICAgIGJ1aWxkZXJCdXlCdG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLmhhbmRsZUJ1dHRvbnNTdGF0cycsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmVzdG9yZSB0aGUgY29udGFpbmVyIHBvc2l0aW9uIGJ5IHN0YXRlXG4gICAqL1xuICBmdW5jdGlvbiByZXN0b3JlQ29udGFpbmVyUG9zaXRpb24oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHNldENvbnRhaW5lclBvc2l0aW9uKHN0YXRlLmN1cnJDb250YWluZXJQb3NpdGlvbik7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIucmVzdG9yZUNvbnRhaW5lclBvc2l0aW9uJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBzZXQgaWYgdGhlIHN0ZXAgaXMgdmFsaWQgb3Igbm90XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3RhdHVzIC0gc3RhdHVzIG9mIHN0ZXAgdmFsaWRhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlU3RlcFZhbGlkYXRpb25TdGF0dXMoc3RhdHVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHN0YXRlLnN0ZXBzW3N0YXRlLmN1cnJTdGVwXSA9IHN0YXR1czsgLy9hZGQgc3RhdHVzIHRvIGVzcGVjaWZpYyBzdGVwXG5cbiAgICAgIGlmKHN0YXRlLmN1cnJTdGVwID09PSBzdGF0ZS50b3RhbFN0ZXBzKSB7XG4gICAgICAgIHRvZ2dsZUJ1eUJ1dHRvblN0YXR1cyhzdGF0dXMpO1xuICAgICAgfVxuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIucmVzdG9yZUNvbnRhaW5lclBvc2l0aW9uJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBzaG93IHRoZSBtZXNzYWdlIGVycm9yIHRvIHN0ZXBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0ZXAgLSBzdGVwIHRvIHNob3cgdGhlIGVycm9yXG4gICAqL1xuICBmdW5jdGlvbiBzaG93U3RlcEVycm9yTWVzc2FnZShzdGVwKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBxdWVyeSA9ICdbZGF0YS1zdGVwLW51bWJlcj1cIicgKyBzdGVwICsgJ1wiXSc7XG4gICAgICBxdWVyeSArPSAnW2J1aWxkZXItc3RlcC1lcnJvcl0nO1xuXG4gICAgICB2YXIgbWVzc2FnZSA9ICcnO1xuICAgICAgdmFyIHN0ZXBzID0gc3RvcmUuZ2V0U3RhdGUoWydwZHAnLCAncGVyc29uYScsICdidWlsZGVyJywgJ2J1aWxkZXJKc29uJywgJ3N0ZXBzJ10pXG4gICAgICAgICwgY3VyclN0ZXAgPSBzdGVwc1tzdGF0ZS5jdXJyU3RlcCAtIDFdO1xuXG4gICAgICBpZighc3RhdGUuY2hlY2tlZFN0ZXBzW3N0ZXBdICYmICFjdXJyU3RlcC5tdWx0aU9wdGlvbnMpIHsgLy9pZiBoYXMgbm8gc2VsZWN0ZWQgcGVyc29uYSB0byBzdGVwIGFuZCBubyBtdWx0aSBvcHRpb25zIHN0ZXBcbiAgICAgICAgbWVzc2FnZSA9IHdpbmRvdy5mcmVlZG9tLmkxOG4uZ2V0TWVzc2FnZSgncGVyc29uYWxpemF0aW9uX2ZpZWxkc19zZWxlY3RfZXJyb3InKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSB3aW5kb3cuZnJlZWRvbS5pMThuLmdldE1lc3NhZ2UoJ3BlcnNvbmFsaXphdGlvbl9maWVsZHNfZ2VuZXJpY19lcnJvcicpO1xuICAgICAgfVxuXG4gICAgICBpZihzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdICYmICFzdGF0ZS5lbGlnaWJsZVdvcmRbc3RhdGUuY3VyclN0ZXBdLnN0YXR1cykge1xuICAgICAgICBtZXNzYWdlID0gd2luZG93LmZyZWVkb20uaTE4bi5nZXRNZXNzYWdlKCdwcm9kdWN0X2Vycm9yc19jYXJ0X3BlcnNvbmFfbm90X2FsbG93Jyk7XG4gICAgICB9XG5cbiAgICAgIHZhciBtZXNzYWdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcblxuICAgICAgaWYobWVzc2FnZUVsKSB7XG4gICAgICAgIG1lc3NhZ2VFbC5pbm5lckhUTUwgPSBtZXNzYWdlO1xuXG4gICAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUnKSkgeyAvL2lmIGlzIG1vYmlsZVxuICAgICAgICAgIHNjcm9sbFRvTWVzc2FnZShzdGVwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLnNob3dTdGVwRXJyb3JNZXNzYWdlJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIHNjcm9sbCB0byBlcnJvciBtZXNzYWdlIChvbmx5IG1vYmlsZSlcbiAgICovXG4gIGZ1bmN0aW9uIHNjcm9sbFRvTWVzc2FnZShzdGVwKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVpbGRlcl9fc3RlcFtkYXRhLXN0ZXAtbnVtYmVyPVwiJyArIHN0ZXAgKyAnXCJdJyk7XG4gICAgICBjb250YWluZXIuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpOyAvL3Njcm9sbCB0byBib3R0b21cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignYnVpbGRlci5zY3JvbGxUb01lc3NhZ2UnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGNsZWFyIHRoZSBzdGVwIGVycm8gbWVzc2FnZVxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RlcCAtIHN0ZXAgdG8gY2xlYXIgdGhlIGVycm8gbWVzc2FnZVxuICAgKi9cbiAgZnVuY3Rpb24gY2xlYXJTdGVwRXJyb3JNZXNzYWdlKHN0ZXApIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHF1ZXJ5ID0gJ1tkYXRhLXN0ZXAtbnVtYmVyPVwiJyArIHN0ZXAgKyAnXCJdJztcbiAgICAgIHF1ZXJ5ICs9ICdbYnVpbGRlci1zdGVwLWVycm9yXSc7XG5cbiAgICAgIHZhciBtZXNzYWdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHF1ZXJ5KTtcblxuICAgICAgaWYobWVzc2FnZUVsKSB7XG4gICAgICAgIG1lc3NhZ2VFbC5pbm5lckhUTUwgPSAnJztcbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLnNob3dTdGVwRXJyb3JNZXNzYWdlJywgZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBtYW5pcHVsYXRlIHRoZSBzdGVwcyBzZWxlY3RlZCBzdGF0dXNcbiAgICogaWYgaXRzIHNlbGVjdGVkIHRoZSBzdGF0ZSBpcyB0cnVlXG4gICAqL1xuICBmdW5jdGlvbiBjaGFuZ2VTdGVwU2VsZWN0ZWRTdGF0dXMoc3RlcCkge1xuICAgIHRyeSB7XG4gICAgICBzdGF0ZS5jaGVja2VkU3RlcHNbc3RlcF0gPSB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLmNoYW5nZVN0ZXBTZWxlY3RlZFN0YXR1cycsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gYWxsb3cgb3Igbm90IHRoZSBidXkgYnV0dG9uXG4gICAqL1xuICBmdW5jdGlvbiBoYW5kbGVCdXlCdXR0b25XcmFwcGVyKCkge1xuICAgIHRyeSB7XG4gICAgICBpZighc3RhdGUuc3RlcHNbc3RhdGUuY3VyclN0ZXBdKSB7XG4gICAgICAgIHNob3dTdGVwRXJyb3JNZXNzYWdlKHN0YXRlLmN1cnJTdGVwKTtcbiAgICAgIH1cblxuICAgICAgaWYoc3RhdGUuc3RlcHNbc3RhdGUuY3VyclN0ZXBdKSB7XG4gICAgICAgIGNsZWFyU3RlcEVycm9yTWVzc2FnZShzdGF0ZS5jdXJyU3RlcCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ2J1aWxkZXIuaGFuZGxlQnV5QnV0dG9uV3JhcHBlcicsIGVycm9yKTtcbiAgICB9XG4gIH1cblxuICAgIC8qKlxuICAgKiBmdW5jdGlvbiB0byBlbmFibGUgdGhlIGJ1dHRvblxuICAgKiBAcmV0dXJuIHt9XG4gICAqL1xuICBmdW5jdGlvbiB0b2dnbGVCdXlCdXR0b25TdGF0dXMoc3RhdHVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idWlsZGVyLXBlcnNvbmEtYnV5LWJ0bl0gLmJ1eS1idXR0b24tbm93Jyk7XG4gICAgICBpZihidG4pIHtcbiAgICAgICAgaWYoc3RhdHVzKSB7XG4gICAgICAgICAgd2luZG93LmZyZWVkb20ucmVtb3ZlQ2xhc3MoYnRuLCAnYnV5LWJ1dHRvbi1ub3ctLWRpc2FibGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd2luZG93LmZyZWVkb20uYWRkQ2xhc3MoYnRuLCAnYnV5LWJ1dHRvbi1ub3ctLWRpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdwZXJzb25hbGl6YXRpb24udG9nZ2xlQnV5QnV0dG9uU3RhdHVzJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGdldCBhIGxpc3Qgb2YgYWxsIHNlbGVjdGVkIHBlcnNvbmFsaXphdGlvbnNcbiAgICogQHJldHVybiB7YXJyYXl9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRTZWxlY3RlZFBlcnNvbmFzKCkge1xuICAgIHZhciBzZWxlY3RlZFBlcnNvbmFzID0gW107XG4gICAgdHJ5IHtcbiAgICAgIHZhciBzdGVwcyA9IHN0b3JlLmdldFN0YXRlKFsncGRwJywgJ3BlcnNvbmEnLCAnYnVpbGRlcicsICdidWlsZGVySnNvbicsICdzdGVwcyddKVxuICAgICAgICAgICwgaSA9IHN0b3JlLmdldFN0YXRlKFsncGRwJywgJ3BlcnNvbmEnLCAnYnVpbGRlciddKS50b3RhbFN0ZXBzXG4gICAgICAgICAgLCBzdGVwXG4gICAgICAgICAgLCBza3VcbiAgICAgICAgICAsIGJ1aWxkZXJFbFxuICAgICAgICAgICwgc3RlcFZhbGlkO1xuXG4gICAgICB3aGlsZShpLS0pIHtcbiAgICAgICAgc3RlcCA9IGkgKyAxO1xuICAgICAgICBzdGVwVmFsaWQgPSBzdGF0ZS5zdGVwc1tzdGVwXTtcblxuICAgICAgICBpZihzdGVwVmFsaWQpIHtcbiAgICAgICAgICBpZihzdGVwc1tpXS5tdWx0aU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkUGVyc29uYXMgPSBnZXRBbGxTdGVwSW5wdXRzKHN0ZXApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidWlsZGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbYnVpbGRlci1jb21iby1zZWxlY3RdW2J1aWxkZXItY29tYm8tc3RlcD1cIicgKyBzdGVwICsgJ1wiXScpO1xuICAgICAgICAgICAgc2t1ID0gYnVpbGRlckVsLnZhbHVlO1xuXG4gICAgICAgICAgICBpZihza3UgIT09ICduby1wZXJzb25hJykge1xuICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNvbmFzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNrdTogc2t1LFxuICAgICAgICAgICAgICAgIHN0ZXA6IHN0ZXBcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ3BlcnNvbmFsaXphdGlvbi5nZXRTZWxlY3RlZFBlcnNvbmFzJywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZXR1cm4gc2VsZWN0ZWRQZXJzb25hcztcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gcmV0dXJuIHRoZSBpbnB1dHMgbGlzdCBvZiBhIHN0ZXBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0ZXAgc3RlcCB0byBnZXQgYWxsIGlucHV0c1xuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QWxsU3RlcElucHV0cyhzdGVwKSB7XG4gICAgdmFyIGxpc3QgPSBbXTtcbiAgICB0cnkge1xuICAgICAgLy9nZXQgYWxsIGlucHV0cyBvZiB0aGUgc2FtZSBzdGVwIChtdWx0aU9wdGlvbnMgc3RlcClcbiAgICAgIHZhciBzdGVwSW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2J1aWxkZXItaW5wdXRdW2J1aWxkZXItaW5wdXQtc3RlcD1cIicgKyBzdGVwICsgJ1wiXScpXG4gICAgICAgICwgc3RlcFJhZGlvcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tidWlsZGVyLWlucHV0LXNsaWRlcl1bYnVpbGRlci1pbnB1dC1zdGVwPVwiJyArIHN0ZXAgKyAnXCJdOmNoZWNrZWQnKVxuICAgICAgICAsIGlucHV0cyA9IFtdXG4gICAgICAgICwgdmFsaWRGaWVsZHMgPSBzdG9yZS5nZXRTdGF0ZShbJ3BkcCcsICdwZXJzb25hJywgJ2Zvcm0nLCAndmFsaWRGaWVsZHMnXSlcbiAgICAgICAgLCB4ID0gMFxuICAgICAgICAsIHNrdTtcblxuICAgICAgc3RlcElucHV0cyA9IHdpbmRvdy5mcmVlZG9tLm5vZGVMaXN0VG9BcnJheShzdGVwSW5wdXRzKTtcbiAgICAgIHN0ZXBSYWRpb3MgPSB3aW5kb3cuZnJlZWRvbS5ub2RlTGlzdFRvQXJyYXkoc3RlcFJhZGlvcyk7XG5cbiAgICAgIGlucHV0cyA9IHN0ZXBJbnB1dHMuY29uY2F0KHN0ZXBSYWRpb3MpO1xuICAgICAgeCA9IGlucHV0cy5sZW5ndGg7XG5cbiAgICAgIHdoaWxlKHgtLSkge1xuICAgICAgICBza3UgPSBpbnB1dHNbeF0uZ2V0QXR0cmlidXRlKCdidWlsZGVyLWlucHV0LXNrdScpO1xuICAgICAgICBpZih2YWxpZEZpZWxkc1tza3VdKSB7IC8vaWYgdGhlIGlucHV0IGlzIHZhbGlkYXRlZFxuICAgICAgICAgIGxpc3QucHVzaCh7XG4gICAgICAgICAgICBza3U6IHNrdSxcbiAgICAgICAgICAgIHN0ZXA6IHN0ZXBcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdwZXJzb25hbGl6YXRpb24uZ2V0QWxsU3RlcElucHV0cycsIGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGdldCBwZXJzb25hbGl6YXRpb24gcHJpY2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNrdVxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RlcFxuICAgKiBAcmV0dXJuIHtpbnR9XG4gICAqL1xuICBmdW5jdGlvbiBnZXRQZXJzb25hUHJpY2Uoc2t1LCBzdGVwKSB7XG4gICAgdmFyIHBlcnNvbmFQcmljZSA9IDA7XG4gICAgdmFyIFBFUlNPTkFfUFJJQ0VfU0VMRUNUT1IgPSAnJztcblxuICAgIFBFUlNPTkFfUFJJQ0VfU0VMRUNUT1IgKz0gJ1tidWlsZGVyLXByaWNlXSc7XG4gICAgUEVSU09OQV9QUklDRV9TRUxFQ1RPUiArPSAnW2J1aWxkZXItcHJpY2Utc3RlcD1cIicgKyBzdGVwICsgJ1wiXSc7XG4gICAgUEVSU09OQV9QUklDRV9TRUxFQ1RPUiArPSAnW2J1aWxkZXItcHJpY2Utc2t1PVwiJyArIHNrdSArICdcIl0nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciBwZXJzb25hUHJpY2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihQRVJTT05BX1BSSUNFX1NFTEVDVE9SKTtcbiAgICAgIGlmKHBlcnNvbmFQcmljZUVsZW1lbnQpIHtcbiAgICAgICAgcGVyc29uYVByaWNlID0gcGFyc2VJbnQocGVyc29uYVByaWNlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2J1aWxkZXItcHJpY2UnKSwgMTApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdwZXJzb25hbGl6YXRpb24uZ2V0UGVyc29uYVByaWNlJywgZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZXR1cm4gcGVyc29uYVByaWNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byBjb3VudCBwZXJzb25hbGl6YXRpb24gYnVpbGRlciBwcmljZVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0QnVpbGRlckFtb3VudCgpIHtcbiAgICB2YXIgYnVpbGRlckFtb3VudCA9IDA7XG4gICAgdmFyIHBlcnNvbmFMaXN0ID0gZ2V0U2VsZWN0ZWRQZXJzb25hcygpO1xuICAgIHZhciBwZXJzb25hTGlzdExlbmd0aCA9IHBlcnNvbmFMaXN0Lmxlbmd0aDtcblxuICAgIHdoaWxlKHBlcnNvbmFMaXN0TGVuZ3RoLS0pIHtcbiAgICAgIHZhciBwZXJzb25hSW5kZXggPSBwZXJzb25hTGlzdExlbmd0aDtcbiAgICAgIHZhciBwZXJzb25hID0gcGVyc29uYUxpc3RbcGVyc29uYUluZGV4XTtcbiAgICAgIHZhciBwZXJzb25hUHJpY2UgPSBnZXRQZXJzb25hUHJpY2UocGVyc29uYS5za3UsIHBlcnNvbmEuc3RlcCk7XG5cbiAgICAgIGJ1aWxkZXJBbW91bnQgKz0gcGVyc29uYVByaWNlO1xuICAgIH1cblxuICAgIHJldHVybiBidWlsZGVyQW1vdW50O1xuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGdldCB0ZXh0IGZyb20gaTE4blxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IC0ga2V5IG9mIGkxOG4gbWVzc2FnZVxuICAgKi9cbiAgZnVuY3Rpb24gZ2V0STE4bk1lc3NhZ2Uoa2V5KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB3aW5kb3cuZnJlZWRvbS5pMThuLmdldE1lc3NhZ2Uoa2V5KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcigncGVyc29uYWxpemF0aW9uLmdldC5pMThuLm1lc3NhZ2UnLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogZnVuY3Rpb24gdG8gY29udmVydCBpbnQgdG8gY3VycmVuY3kgZm9ybWF0IGV4OiBSJCAwLDAwXG4gICAqIEBwYXJhbSB7aW50fSBwcmljZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBmdW5jdGlvbiBhcHBseUN1cnJlbmN5TWFzayhwcmljZSkge1xuICAgIHZhciBjdXJyZW5jeVN5bWJvbCA9IGdldEkxOG5NZXNzYWdlKCdjdXJyZW5jeV9zeW1ib2wnKTtcbiAgICB2YXIgZm9tYXRlZFByaWNlID0gU3RyaW5nKHByaWNlIHx8ICcwMDAnKVxuICAgICAgLnJlcGxhY2UoL1xcQig/PShcXGR7Mn0pKD8hXFxkKSkvLCAnLCcpXG4gICAgICAucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJy4nKTtcblxuICAgIHJldHVybiBjdXJyZW5jeVN5bWJvbCArICcgJyArIGZvbWF0ZWRQcmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBmdW5jdGlvbiB0byB1cGRhdGUgYnVpbGRlciBhbW91bnQgZWxlbWVudFxuICAgKi9cbiAgZnVuY3Rpb24gdXBkYXRlQnVpbGRlckFtb3VudCgpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGJ1aWxkZXJBbW91bnRWYWx1ZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnVpbGRlcl9fYW1vdW50LXZhbHVlJyk7XG4gICAgICB2YXIgYnVpbGRlckFtb3VudCA9IGdldEJ1aWxkZXJBbW91bnQoKTtcblxuICAgICAgaWYoYnVpbGRlckFtb3VudFZhbHVlRWxlbWVudCkge1xuICAgICAgICBidWlsZGVyQW1vdW50VmFsdWVFbGVtZW50LnRleHRDb250ZW50ID0gYXBwbHlDdXJyZW5jeU1hc2soYnVpbGRlckFtb3VudCk7XG4gICAgICB9XG4gICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcigncGVyc29uYWxpemF0aW9uLnVwZGF0ZUJ1aWxkZXJBbW91bnQnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQnVpbGRlckFtb3VudEVsZW1lbnQoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBidWlsZGVyQW1vdW50RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idWlsZGVyX19hbW91bnQnKTtcblxuICAgICAgaWYoc3RhdGUuY3VyclN0ZXAgPT09IHN0YXRlLnRvdGFsU3RlcHMpIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20ucmVtb3ZlQ2xhc3MoYnVpbGRlckFtb3VudEVsZW1lbnQsICdidWlsZGVyX19hbW91bnQtLWhpZGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLmFkZENsYXNzKGJ1aWxkZXJBbW91bnRFbGVtZW50LCAnYnVpbGRlcl9fYW1vdW50LS1oaWRlJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdwZXJzb25hbGl6YXRpb24uaGFuZGxlQnVpbGRlckFtb3VudEVsZW1lbnQnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgICAvKipcbiAgICogZnVuY3Rpb24gdG8gZml4IGJ1ZyB3aXRoIHRvdWNoIG9mIGlwaG9uZSBhbmQgaXBhZCwgYmxvY2sgdGhlIHRvdWNoIG9uIHRoZSBidWlsZGVyIGNvbnRhaW5lclxuICAgKi9cbiAgZnVuY3Rpb24gYmxvY2tUb3VjaElvcygpIHtcbiAgICBpZighZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZScpKSByZXR1cm47XG5cbiAgICBpZighZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2J1aWxkZXItdG91Y2gtbW92aW1lbnRdJykpIHsgLy9pZiB0aGUgZmVhdHVyZSBpcyBkaXNhYmxlZFxuICAgICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcbiAgICAgIHZhciBpT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdCh1YSk7XG5cbiAgICAgIGlmIChpT1MpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tidWlsZGVyLWNvbnRhaW5lcl0nKTtcblxuICAgICAgICBpZihjb250YWluZXIpIHtcbiAgICAgICAgICBjb250YWluZXIub250b3VjaG1vdmUgPSBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGhhbmRsZSB0aGUgdG91Y2ggZXZlbnRzIG9uIG1vYmlsZSBkZXZpY2VcbiAgICogQHBhcmFtIHtvYmplY3R9IGUgdG91Y2ggZXZlbnQgb2JqXG4gICAqL1xuICBmdW5jdGlvbiBoYW5kbGVUb3VjaEV2ZW50KGUpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHRvdWNob2JqID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIHZhciBkaXN0ID0gcGFyc2VJbnQodG91Y2hvYmouY2xpZW50WCwgMTApIC0gc3RhdGUuc3RhcnRYO1xuXG4gICAgICBpZihkaXN0IDw9IC0xNTAgJiYgIXRvdWNoSXNPY2N1cnJpbmcpIHtcbiAgICAgICAgaGFuZGxlTmV4dEJ1dHRvbigpO1xuICAgICAgICB0b3VjaElzT2NjdXJyaW5nID0gdHJ1ZTtcbiAgICAgICAgc3RvcFRvdWNoT2N1cnJpbmcoKTtcblxuICAgICAgfSBlbHNlIGlmKGRpc3QgPiAxNTAgJiYgIXRvdWNoSXNPY2N1cnJpbmcpIHtcbiAgICAgICAgdG91Y2hJc09jY3VycmluZyA9IHRydWU7XG4gICAgICAgIGhhbmRsZVByZXZCdXR0b24oKTtcbiAgICAgICAgc3RvcFRvdWNoT2N1cnJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLmhhbmRsZVRvdWNoRXZlbnQnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGRpc2FibGUgdGhlIHRvdWNoIG9jdXJyaW5nIHRvZ2dsZSBhZnRlciB0aW1lIG91dFxuICAgKi9cbiAgZnVuY3Rpb24gc3RvcFRvdWNoT2N1cnJpbmcoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0b3VjaElzT2NjdXJyaW5nID0gZmFsc2U7XG4gICAgfSwgNTAwKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIGZ1bmN0aW9uIHRvIGdldCB0aGUgdG91Y2ggbW92aW1lbnRzXG4gICAqL1xuICBmdW5jdGlvbiBsaXN0ZW5Ub3VjaEV2ZW50KCkge1xuICAgIHRyeSB7XG4gICAgICBpZighZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vYmlsZScpKSByZXR1cm47XG5cbiAgICAgIGlmKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tidWlsZGVyLXRvdWNoLW1vdmltZW50XScpKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbYnVpbGRlci1jb250YWluZXJdJyk7XG5cbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgdmFyIHRvdWNob2JqID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgICAgICBzdGF0ZS5zdGFydFggPSBwYXJzZUludCh0b3VjaG9iai5jbGllbnRYLCAxMCk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgaGFuZGxlVG91Y2hFdmVudCwgZmFsc2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdidWlsZGVyLmxpc3RlblRvdWNoRXZlbnQnLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgc3RvcmUuc3Vic2NyaWJlKHN0b3JlLmFjdGlvblR5cGVzLkNIQU5HRV9QRVJTT05BX0JVSUxERVIsIGhhbmRsZUJ1aWxkZXJBbW91bnRFbGVtZW50KTtcbiAgc3RvcmUuc3Vic2NyaWJlKHN0b3JlLmFjdGlvblR5cGVzLkNIQU5HRV9QRVJTT05BX0ZPUk0sIHVwZGF0ZUN1cnJlbnRXb3JkKTtcblxuICB3aW5kb3cuZnJlZWRvbS5saXZlKCdbZGF0YS1idWlsZGVyLXBlcnNvbmEtYnV5LWJ0bl0nLCAnY2xpY2snLCBoYW5kbGVCdXlCdXR0b25XcmFwcGVyKTtcbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdidWlsZGVyLWNvbWJvLmFmdGVyLmNoYW5nZScsIGNoYW5nZVN0ZXBTZWxlY3RlZFN0YXR1cyk7IC8vc2V0IHN0ZXAgYXMgc2VsZWN0ZWRcbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdidWlsZGVyLWNvbWJvLmFmdGVyLmNoYW5nZScsIGNsZWFyU3RlcEVycm9yTWVzc2FnZSk7IC8vc2V0IHN0ZXAgYXMgc2VsZWN0ZWRcbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdidWlsZGVyLWNvbWJvLmFmdGVyLmNoYW5nZScsIHVwZGF0ZUJ1aWxkZXJBbW91bnQpO1xuICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ2J1aWxkZXIuYnVpbGRlci1mb3JtLnN0ZXAudmFsaWRhdGUnLCB1cGRhdGVTdGVwVmFsaWRhdGlvblN0YXR1cyk7IC8vbGlzdGVuaW5nIHRoZSBzdGVwIHZhbGlkYXRpb25cbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdidWlsZGVyLmJ1aWxkZXItZm9ybS5zdGVwLnZhbGlkYXRlJywgdXBkYXRlQnVpbGRlckFtb3VudCk7XG4gIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignYnVpbGRlci13cmFwcGVyLmFmdGVyLnJlbmRlcmVkJywgYmxvY2tUb3VjaElvcyk7IC8vZml4IGlvc1xuICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ2J1aWxkZXItd3JhcHBlci5hZnRlci5yZW5kZXJlZCcsIGZpbGxMb2FkZWRTdGF0cyk7XG4gIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignYnVpbGRlci13cmFwcGVyLmFmdGVyLnJlbmRlcmVkJywgbGlzdGVuVG91Y2hFdmVudCk7XG4gIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignYnVpbGRlci13cmFwcGVyLmFmdGVyLnJlbmRlcmVkJywgaGFuZGxlQnV0dG9uc1N0YXRzKTtcbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdidWlsZGVyLXdyYXBwZXIuYWZ0ZXIucmVuZGVyZWQnLCByZXN0b3JlQ29udGFpbmVyUG9zaXRpb24pO1xuICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ2J1aWxkZXItd3JhcHBlci5hZnRlci5yZW5kZXJlZCcsIHVwZGF0ZUJ1aWxkZXJBbW91bnQpO1xuICB3aW5kb3cuZnJlZWRvbS5saXZlKCdbYnVpbGRlci1idG4tcHJldl0nLCAnY2xpY2snLCBoYW5kbGVQcmV2QnV0dG9uKTtcbiAgd2luZG93LmZyZWVkb20ubGl2ZSgnW2J1aWxkZXItYnRuLW5leHRdJywgJ2NsaWNrJywgaGFuZGxlTmV4dEJ1dHRvbik7XG59KCkpO1xuIl19
