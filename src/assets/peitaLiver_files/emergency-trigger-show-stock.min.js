"use strict";Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return!1;for(var n=0|t,i=Math.max(n>=0?n:o-Math.abs(n),0);i<o;){if(r[i]===e)return!0;i++}return!1}}),function(){function e(e){var t=document.querySelector(".emergency-trigger"),r=document.createElement("div");if(r.innerHTML=e,t.innerHTML=e,t.classList.contains("hide")&&t.classList.remove("hide"),document.querySelector("[data-altered-color]")&&document.querySelector("[data-altered-color]").classList.add("active-sense-icon"),document.querySelector(".trigger-remove-prod")&&null!==document.querySelector(".trigger-remove-prod")&&(document.querySelector(".trigger-remove-prod").style.display="none"),document.querySelector(".mktplacetooltip")&&null!==document.querySelector(".mktplacetooltip")){var o=document.querySelector(".mktplacetooltip");o.style.marginLeft="4px",o.cloneNode(!0);var n=document.querySelector(".product-seller-name");n&&n.insertBefore(o,n.nextSibling)}}function t(e){var t=document.querySelector(".emergency-trigger");t.classList.contains("hide")||t.classList.add("hide");var r=sessionStorage.getItem("emergency-trigger");if(!r)return void sessionStorage.setItem("emergency-trigger",e);var o=r.split(",");o.push(e),sessionStorage.setItem("emergency-trigger",o)}function r(r,o){var n={method:"get",type:"html",data:{sku:r,sellerId:o},success:function(o){o&&"false"!==o&&"string"==typeof o?e(o):t(r)},error:function(e){console.error("emergency trigger error: ",e)}};r&&o&&window.freedom.restClient.request("/stock",n)}function o(e){var t=document.querySelector(".emergency-trigger");if(e&&t){var o=null,n=null;e instanceof HTMLElement?(o=e.getAttribute("data-sku"),n=e.getAttribute("data-sellerid")):(o=e.sku,n=e.sellerId);var i=sessionStorage.getItem("emergency-trigger");if(i){var s=i.split(",").includes(o);s?t.classList.contains("hide")||t.classList.add("hide"):r(o,n)}else r(o,n)}}var n=document.querySelector(".product__size--list")?document.querySelectorAll(".product__size--list li"):document.querySelectorAll("#buy-box .product-size-selector .sku-select .radio-options .active a");n&&1===n.length&&window.freedom.nsPubSub.pub("emergency-trigger-show-stock",n[0]),window.freedom.nsPubSub.sub("emergency-trigger-show-stock",o)}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2VtZXJnZW5jeS10cmlnZ2VyL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2svYWxsL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2subWluLmpzIl0sIm5hbWVzIjpbIkFycmF5IiwicHJvdG90eXBlIiwiaW5jbHVkZXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwic2VhcmNoRWxlbWVudCIsImZyb21JbmRleCIsInRoaXMiLCJUeXBlRXJyb3IiLCJvIiwibGVuIiwibGVuZ3RoIiwibiIsImsiLCJNYXRoIiwibWF4IiwiYWJzIiwic2V0U3RvY2siLCJyZXN1bHQiLCJlbWVyZ2VuY3lUcmlnZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudFRlbXAiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJzdHlsZSIsImRpc3BsYXkiLCJlbCIsIm1hcmdpbkxlZnQiLCJjbG9uZU5vZGUiLCJpbnMiLCJpbnNlcnRCZWZvcmUiLCJuZXh0U2libGluZyIsInNldENhY2hlU2Vzc2lvblN0b3JhZ2UiLCJza3UiLCJza3VTdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0SXRlbSIsInRlbXBTa3VTdG9yYWdlIiwic3BsaXQiLCJwdXNoIiwiZ2V0RW1lcmdlbmN5VGlnZ2VyIiwic2VsbGVySWQiLCJvcHRpb25zIiwibWV0aG9kIiwidHlwZSIsImRhdGEiLCJzdWNjZXNzIiwiZXJyb3IiLCJjb25zb2xlIiwid2luZG93IiwiZnJlZWRvbSIsInJlc3RDbGllbnQiLCJyZXF1ZXN0Iiwic2hvd0VtZXJnZW5jeVRyaWdnZXIiLCJkYXRhRWxlbWVudCIsIkVNRVJHRU5DWV9UUklHR0VSIiwiSFRNTEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJzdG9yYWdlRW1lcmdlbmN5VHJpZ2dlciIsInN0b3JlZCIsInVuaXF1ZVNpemUiLCJxdWVyeVNlbGVjdG9yQWxsIiwibnNQdWJTdWIiLCJwdWIiLCJzdWIiXSwibWFwcGluZ3MiOiJBQUFBLFlBSUtBLE9BQU1DLFVBQVVDLFVBQ25CQyxPQUFPQyxlQUFlSixNQUFNQyxVQUFXLFlBQ3JDSSxNQUFPLFNBQVVDLEVBQWVDLEdBRzlCLEdBQVksTUFBUkMsS0FDRixLQUFNLElBQUlDLFdBQVUsZ0NBR3RCLElBQUlDLEdBQUlQLE9BQU9LLE1BR1hHLEVBQU1ELEVBQUVFLFNBQVcsQ0FHdkIsSUFBWSxJQUFSRCxFQUNGLE9BQU8sQ0FlVCxLQVZBLEdBQUlFLEdBQWdCLEVBQVpOLEVBT0pPLEVBQUlDLEtBQUtDLElBQUlILEdBQUssRUFBSUEsRUFBSUYsRUFBTUksS0FBS0UsSUFBSUosR0FBSSxHQUcxQ0MsRUFBSUgsR0FBSyxDQUtkLEdBQUlELEVBQUVJLEtBQU9SLEVBQ1gsT0FBTyxDQUVUUSxLQUlGLE9BQU8sS0FNWixXQUVDLFFBQVNJLEdBQVNDLEdBQ2hCLEdBQUlDLEdBQW1CQyxTQUFTQyxjQUFjLHNCQUMxQ0MsRUFBY0YsU0FBU0csY0FBYyxNQWV6QyxJQWRBRCxFQUFZRSxVQUFZTixFQUV4QkMsRUFBaUJLLFVBQVlOLEVBQ3pCQyxFQUFpQk0sVUFBVUMsU0FBUyxTQUN0Q1AsRUFBaUJNLFVBQVVFLE9BQU8sUUFHaENQLFNBQVNDLGNBQWMseUJBQ3pCRCxTQUFTQyxjQUFjLHdCQUF3QkksVUFBVUcsSUFBSSxxQkFFM0RSLFNBQVNDLGNBQWMseUJBQThFLE9BQW5ERCxTQUFTQyxjQUFjLDBCQUMzRUQsU0FBU0MsY0FBYyx3QkFBd0JRLE1BQU1DLFFBQVUsUUFHN0RWLFNBQVNDLGNBQWMscUJBQXNFLE9BQS9DRCxTQUFTQyxjQUFjLG9CQUE4QixDQUNyRyxHQUFJVSxHQUFLWCxTQUFTQyxjQUFjLG1CQUNoQ1UsR0FBR0YsTUFBTUcsV0FBYSxNQUN0QkQsRUFBR0UsV0FBVSxFQUNiLElBQUlDLEdBQU1kLFNBQVNDLGNBQWMsdUJBQzdCYSxJQUNGQSxFQUFJQyxhQUFhSixFQUFJRyxFQUFJRSxjQUsvQixRQUFTQyxHQUF1QkMsR0FDOUIsR0FBSW5CLEdBQW1CQyxTQUFTQyxjQUFjLHFCQUN6Q0YsR0FBaUJNLFVBQVVDLFNBQVMsU0FDdkNQLEVBQWlCTSxVQUFVRyxJQUFJLE9BRWpDLElBQUlXLEdBQWFDLGVBQWVDLFFBQVEsb0JBQ3hDLEtBQUtGLEVBRUgsV0FEQUMsZ0JBQWVFLFFBQVEsb0JBQXFCSixFQUc5QyxJQUFJSyxHQUFpQkosRUFBV0ssTUFBTSxJQUN0Q0QsR0FBZUUsS0FBS1AsR0FDcEJFLGVBQWVFLFFBQVEsb0JBQXFCQyxHQUc5QyxRQUFTRyxHQUFtQlIsRUFBS1MsR0FDL0IsR0FBSUMsSUFDRkMsT0FBUSxNQUNSQyxLQUFNLE9BQ05DLE1BQ0ViLElBQUtBLEVBQ0xTLFNBQVVBLEdBRVpLLFFBQVMsU0FBVWxDLEdBQ2JBLEdBQXFCLFVBQVhBLEdBQXdDLGdCQUFYQSxHQUN6Q0QsRUFBU0MsR0FFVG1CLEVBQXVCQyxJQUczQmUsTUFBTyxTQUFVQSxHQUNmQyxRQUFRRCxNQUFNLDRCQUE2QkEsSUFHM0NmLElBQU9TLEdBQ1RRLE9BQU9DLFFBQVFDLFdBQVdDLFFBQVEsU0FBVVYsR0FJaEQsUUFBU1csR0FBcUJDLEdBQzVCLEdBQUlDLEdBQW9CekMsU0FBU0MsY0FBYyxxQkFDL0MsSUFBSXVDLEdBQ0VDLEVBQW1CLENBQ3JCLEdBQUl2QixHQUFNLEtBQ05TLEVBQVcsSUFDWGEsYUFBdUJFLGNBQ3pCeEIsRUFBTXNCLEVBQVlHLGFBQWEsWUFDL0JoQixFQUFXYSxFQUFZRyxhQUFhLG1CQUVwQ3pCLEVBQU1zQixFQUFZdEIsSUFDbEJTLEVBQVdhLEVBQVliLFNBRXpCLElBQUlpQixHQUEwQnhCLGVBQWVDLFFBQVEsb0JBQ3JELElBQU11QixFQUF5QixDQUM3QixHQUFJQyxHQUFTRCxFQUF3QnBCLE1BQU0sS0FBSzNDLFNBQVNxQyxFQUNwRDJCLEdBR0VKLEVBQWtCcEMsVUFBVUMsU0FBUyxTQUN4Q21DLEVBQWtCcEMsVUFBVUcsSUFBSSxRQUhsQ2tCLEVBQW1CUixFQUFLUyxPQU8xQkQsR0FBbUJSLEVBQUtTLElBTWhDLEdBQUltQixHQUFhOUMsU0FBU0MsY0FBYyx3QkFDdENELFNBQVMrQyxpQkFBaUIsMkJBQTZCL0MsU0FBUytDLGlCQUFpQix1RUFFL0VELElBQW9DLElBQXRCQSxFQUFXdkQsUUFDM0I0QyxPQUFPQyxRQUFRWSxTQUFTQyxJQUFJLCtCQUFnQ0gsRUFBVyxJQUd6RVgsT0FBT0MsUUFBUVksU0FBU0UsSUFBSSwrQkFBZ0NYIiwiZmlsZSI6Il9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9wcm9kdWN0L2VtZXJnZW5jeS10cmlnZ2VyL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2svYWxsL2VtZXJnZW5jeS10cmlnZ2VyLXNob3ctc3RvY2subWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xuLy8gaHR0cHM6Ly90YzM5LmdpdGh1Yi5pby9lY21hMjYyLyNzZWMtYXJyYXkucHJvdG90eXBlLmluY2x1ZGVzXG5pZiAoIUFycmF5LnByb3RvdHlwZS5pbmNsdWRlcykge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCAnaW5jbHVkZXMnLCB7XG4gICAgdmFsdWU6IGZ1bmN0aW9uIChzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcblxuICAgICAgLy8gMS4gTGV0IE8gYmUgPyBUb09iamVjdCh0aGlzIHZhbHVlKS5cbiAgICAgIGlmICh0aGlzID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ0aGlzXCIgaXMgbnVsbCBvciBub3QgZGVmaW5lZCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbyA9IE9iamVjdCh0aGlzKTtcblxuICAgICAgLy8gMi4gTGV0IGxlbiBiZSA/IFRvTGVuZ3RoKD8gR2V0KE8sIFwibGVuZ3RoXCIpKS5cbiAgICAgIHZhciBsZW4gPSBvLmxlbmd0aCA+Pj4gMDtcblxuICAgICAgLy8gMy4gSWYgbGVuIGlzIDAsIHJldHVybiBmYWxzZS5cbiAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyA0LiBMZXQgbiBiZSA/IFRvSW50ZWdlcihmcm9tSW5kZXgpLlxuICAgICAgLy8gICAgKElmIGZyb21JbmRleCBpcyB1bmRlZmluZWQsIHRoaXMgc3RlcCBwcm9kdWNlcyB0aGUgdmFsdWUgMC4pXG4gICAgICB2YXIgbiA9IGZyb21JbmRleCB8IDA7XG5cbiAgICAgIC8vIDUuIElmIG4g4omlIDAsIHRoZW5cbiAgICAgIC8vICBhLiBMZXQgayBiZSBuLlxuICAgICAgLy8gNi4gRWxzZSBuIDwgMCxcbiAgICAgIC8vICBhLiBMZXQgayBiZSBsZW4gKyBuLlxuICAgICAgLy8gIGIuIElmIGsgPCAwLCBsZXQgayBiZSAwLlxuICAgICAgdmFyIGsgPSBNYXRoLm1heChuID49IDAgPyBuIDogbGVuIC0gTWF0aC5hYnMobiksIDApO1xuXG4gICAgICAvLyA3LiBSZXBlYXQsIHdoaWxlIGsgPCBsZW5cbiAgICAgIHdoaWxlIChrIDwgbGVuKSB7XG4gICAgICAgIC8vIGEuIExldCBlbGVtZW50SyBiZSB0aGUgcmVzdWx0IG9mID8gR2V0KE8sICEgVG9TdHJpbmcoaykpLlxuICAgICAgICAvLyBiLiBJZiBTYW1lVmFsdWVaZXJvKHNlYXJjaEVsZW1lbnQsIGVsZW1lbnRLKSBpcyB0cnVlLCByZXR1cm4gdHJ1ZS5cbiAgICAgICAgLy8gYy4gSW5jcmVhc2UgayBieSAxLlxuICAgICAgICAvLyBOT1RFOiA9PT0gcHJvdmlkZXMgdGhlIGNvcnJlY3QgXCJTYW1lVmFsdWVaZXJvXCIgY29tcGFyaXNvbiBuZWVkZWQgaGVyZS5cbiAgICAgICAgaWYgKG9ba10gPT09IHNlYXJjaEVsZW1lbnQpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBrKys7XG4gICAgICB9XG5cbiAgICAgIC8vIDguIFJldHVybiBmYWxzZVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG59XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgZnVuY3Rpb24gc2V0U3RvY2socmVzdWx0KSB7XG4gICAgdmFyIGVtZXJnZW5jeVRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZW1lcmdlbmN5LXRyaWdnZXInKTtcbiAgICB2YXIgZWxlbWVudFRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50VGVtcC5pbm5lckhUTUwgPSByZXN1bHQ7XG4gICAgLy8gZW1lcmdlbmN5VHJpZ2dlci5hcHBlbmRDaGlsZChlbGVtZW50VGVtcC5maXJzdENoaWxkKTtcbiAgICBlbWVyZ2VuY3lUcmlnZ2VyLmlubmVySFRNTCA9IHJlc3VsdDtcbiAgICBpZiAoZW1lcmdlbmN5VHJpZ2dlci5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUnKSkge1xuICAgICAgZW1lcmdlbmN5VHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG4gICAgfVxuICAgIC8vIGNoYW5nZSBlbGVtZW50IGNvbG9yIGFuZCByZW1vdmUgdHJpZ2dlci1yZW1vdmUtcHJvZFxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hbHRlcmVkLWNvbG9yXScpKSB7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hbHRlcmVkLWNvbG9yXScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZS1zZW5zZS1pY29uJyk7XG4gICAgfVxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJpZ2dlci1yZW1vdmUtcHJvZCcpICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLXJlbW92ZS1wcm9kJykgIT09IG51bGwpIHtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmlnZ2VyLXJlbW92ZS1wcm9kJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG4gICAgLy8gbW92ZSB0b29sdGlwIGZvciBuZXcgZGl2IGlmIHNlbnNlIG9mIHVyZ2VuY3kgZXhpc3Rpc1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWt0cGxhY2V0b29sdGlwJykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1rdHBsYWNldG9vbHRpcCcpICE9PSBudWxsKSB7XG4gICAgICB2YXIgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWt0cGxhY2V0b29sdGlwJyk7XG4gICAgICBlbC5zdHlsZS5tYXJnaW5MZWZ0ID0gJzRweCc7XG4gICAgICBlbC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICB2YXIgaW5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3Qtc2VsbGVyLW5hbWUnKTtcbiAgICAgIGlmIChpbnMpIHtcbiAgICAgICAgaW5zLmluc2VydEJlZm9yZShlbCwgaW5zLm5leHRTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZXRDYWNoZVNlc3Npb25TdG9yYWdlKHNrdSkge1xuICAgIHZhciBlbWVyZ2VuY3lUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtZXJnZW5jeS10cmlnZ2VyJyk7XG4gICAgaWYgKCFlbWVyZ2VuY3lUcmlnZ2VyLmNsYXNzTGlzdC5jb250YWlucygnaGlkZScpKSB7XG4gICAgICBlbWVyZ2VuY3lUcmlnZ2VyLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICB9XG4gICAgdmFyIHNrdVN0b3JhZ2UgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdlbWVyZ2VuY3ktdHJpZ2dlcicpO1xuICAgIGlmICghc2t1U3RvcmFnZSkge1xuICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnZW1lcmdlbmN5LXRyaWdnZXInLCBza3UpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGVtcFNrdVN0b3JhZ2UgPSBza3VTdG9yYWdlLnNwbGl0KCcsJyk7XG4gICAgdGVtcFNrdVN0b3JhZ2UucHVzaChza3UpO1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2VtZXJnZW5jeS10cmlnZ2VyJywgdGVtcFNrdVN0b3JhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RW1lcmdlbmN5VGlnZ2VyKHNrdSwgc2VsbGVySWQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIG1ldGhvZDogJ2dldCcsXG4gICAgICB0eXBlOiAnaHRtbCcsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHNrdTogc2t1LFxuICAgICAgICBzZWxsZXJJZDogc2VsbGVySWRcbiAgICAgIH0sXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0ICE9PSAnZmFsc2UnICYmIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgc2V0U3RvY2socmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRDYWNoZVNlc3Npb25TdG9yYWdlKHNrdSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2VtZXJnZW5jeSB0cmlnZ2VyIGVycm9yOiAnLCBlcnJvcik7XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAoc2t1ICYmIHNlbGxlcklkKSB7XG4gICAgICB3aW5kb3cuZnJlZWRvbS5yZXN0Q2xpZW50LnJlcXVlc3QoJy9zdG9jaycsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFbWVyZ2VuY3lUcmlnZ2VyKGRhdGFFbGVtZW50KSB7XG4gICAgdmFyIEVNRVJHRU5DWV9UUklHR0VSID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVtZXJnZW5jeS10cmlnZ2VyJyk7XG4gICAgaWYgKGRhdGFFbGVtZW50KSB7XG4gICAgICBpZiAoRU1FUkdFTkNZX1RSSUdHRVIpIHtcbiAgICAgICAgdmFyIHNrdSA9IG51bGw7XG4gICAgICAgIHZhciBzZWxsZXJJZCA9IG51bGw7XG4gICAgICAgIGlmIChkYXRhRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgc2t1ID0gZGF0YUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNrdScpO1xuICAgICAgICAgIHNlbGxlcklkID0gZGF0YUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXNlbGxlcmlkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2t1ID0gZGF0YUVsZW1lbnQuc2t1O1xuICAgICAgICAgIHNlbGxlcklkID0gZGF0YUVsZW1lbnQuc2VsbGVySWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0b3JhZ2VFbWVyZ2VuY3lUcmlnZ2VyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZW1lcmdlbmN5LXRyaWdnZXInKTtcbiAgICAgICAgaWYgKCEhc3RvcmFnZUVtZXJnZW5jeVRyaWdnZXIpIHtcbiAgICAgICAgICB2YXIgc3RvcmVkID0gc3RvcmFnZUVtZXJnZW5jeVRyaWdnZXIuc3BsaXQoJywnKS5pbmNsdWRlcyhza3UpO1xuICAgICAgICAgIGlmICghc3RvcmVkKSB7XG4gICAgICAgICAgICBnZXRFbWVyZ2VuY3lUaWdnZXIoc2t1LCBzZWxsZXJJZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICghRU1FUkdFTkNZX1RSSUdHRVIuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRlJykpIHtcbiAgICAgICAgICAgICAgRU1FUkdFTkNZX1RSSUdHRVIuY2xhc3NMaXN0LmFkZCgnaGlkZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBnZXRFbWVyZ2VuY3lUaWdnZXIoc2t1LCBzZWxsZXJJZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy9WZXJpZnkgc2l6ZSB1bmlxdWVcbiAgdmFyIHVuaXF1ZVNpemUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdF9fc2l6ZS0tbGlzdCcpID9cbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvZHVjdF9fc2l6ZS0tbGlzdCBsaScpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2J1eS1ib3ggLnByb2R1Y3Qtc2l6ZS1zZWxlY3RvciAuc2t1LXNlbGVjdCAucmFkaW8tb3B0aW9ucyAuYWN0aXZlIGEnKTtcblxuICBpZiAodW5pcXVlU2l6ZSAmJiB1bmlxdWVTaXplLmxlbmd0aCA9PT0gMSkge1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignZW1lcmdlbmN5LXRyaWdnZXItc2hvdy1zdG9jaycsIHVuaXF1ZVNpemVbMF0pO1xuICB9XG5cbiAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIuc3ViKCdlbWVyZ2VuY3ktdHJpZ2dlci1zaG93LXN0b2NrJywgc2hvd0VtZXJnZW5jeVRyaWdnZXIpO1xufSgpKTtcbiJdfQ==
