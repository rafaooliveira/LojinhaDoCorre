"use strict";!function(){function e(){n=window.freedom.getCookie("zipcode")}var i=document.querySelector("html").classList.contains("desktop"),n=window.freedom.getCookie("zipcode"),r=sessionStorage.getItem("eligibleFreeShipping"),t=document.querySelector("section[data-get-zipcode-info]"),o=function(){t?window.zipcodeAPIsAjax?window.freedom.nsPubSub.pub("nsLoading.hide",document.body):window.zipcodeAPIsAjax=!0:window.freedom.nsPubSub.pub("nsLoading.hide",document.body)},d=function(){r=sessionStorage.getItem("eligibleFreeShipping")},s=function(e){e.querySelector(".new-freeshipping-stamp")&&e.querySelector(".new-freeshipping-stamp").classList.add("hide"),e.querySelector(".freeDelivery-gif")&&e.querySelector(".freeDelivery-gif").classList.remove("hide"),e.querySelector(".freeDelivery-icon")&&e.querySelector(".freeDelivery-icon").classList.remove("hide"),e.querySelector(".freeDelivery-container")&&e.querySelector(".freeDelivery-container").classList.remove("hide")},u=function(e){var n,r=document.createElement("div");return r.classList.add("freeDelivery-container"),i?n=e.querySelector(".stamp-free-delivery"):(n=e.querySelector(".product-price"),r.classList.add("mb")),n&&n.insertAdjacentElement("afterbegin",r),r},c=function(){var e=document.createElement("div");e.classList.add("new-freeshipping-stamp");var i=document.createElement("p");i.classList.add("tag-shipping"),i.innerHTML="FRETE GR√ÅTIS";var n=document.createElement("i");return n.classList.add("ns-icon"),n.classList.add("ns-icon-free-shipping"),e.appendChild(n),e.appendChild(i),e},l=function(e,i,n,r,t){var o=i.querySelector(".freeDelivery-container");if(o||(o=u(i)),e)if(e.freeShipping){if(i.querySelector(".freeDelivery-gif")&&i.querySelector(".freeDelivery-gif").classList.add("hide"),i.querySelector(".freeDelivery-icon")&&i.querySelector(".freeDelivery-icon").classList.add("hide"),o.querySelector(".new-freeshipping-stamp"))o.querySelector(".new-freeshipping-stamp").classList.remove("hide");else{var d=c();o.appendChild(d)}o.classList.remove("hide")}else e.freeShipping||o.children.length&&[].map.call(o.children,function(e){e.classList.add("hide")});else s(i);n&&("shippingEligible.reinited"!==n&&window.freedom.nsPubSub.pub("nsLoading.hide",document.body),window.freedom.nsPubSub.pub(n,i,r,t))},a=function(e,i,t,o,d){var u,c;return e?(u=e.getAttribute("data-sku"),c=e.getAttribute("data-seller"),void(("true"===r||"string"==typeof r&&"false"!==r)&&u&&c&&n?window.freedom.nsPubSub.pub("verifyFreeShipping",u,c,n,function(e){l(e,i,t,o,d)}):("false"===r?i.querySelector(".freeDelivery-container")&&i.querySelector(".freeDelivery-container").classList.add("hide"):"string"==typeof r&&s(i),t&&("shippingEligible.reinited"!==t&&window.freedom.nsPubSub.pub("nsLoading.hide",document.body),window.freedom.nsPubSub.pub(t,i,o,d))))):(s(i),void(t&&("shippingEligible.reinited"!==t&&window.freedom.nsPubSub.pub("nsLoading.hide",document.body),window.freedom.nsPubSub.pub(t,i,o,d))))},p=function(e){var i,n,r=document.createElement("div");r.innerHTML=e,n=r.firstElementChild,n.classList.add("is-quickview"),i=n.querySelector(".buy-button-now.button-no-float"),a(i,n,"returnCheckedFreeShippingQuickView")},f=function(e,i,n){var r,t,o=document.createElement("div");e&&(o.innerHTML=e,t=o.firstElementChild,r=t.querySelector('.buy-button-now.button-no-float[data-sku*="-"]')),a(r,t,"returnCheckedFreeShipping",i,n)},b=function(e){var i,n=document.querySelector('.buy-button-now.button-no-float[data-sku*="-"]'),r=document.querySelector("#buy-box");e||(i="shippingEligible.reinited"),a(n,r,i)};try{document.querySelector("html").classList.contains("product-page")&&b(!0),window.freedom.nsPubSub.sub("quickViewRequest.freeShipping",p),window.freedom.nsPubSub.sub("change.ColorFlavorSize.freeShipping",f),window.freedom.nsPubSub.sub("returnShippingEligibility.PDP",b),window.freedom.nsPubSub.sub("shippingEligible.reinited",o),window.freedom.nsPubSub.sub("zipcodeCookie.reinit",e),window.freedom.nsPubSub.sub("shippingEligibleCookie.reinit",d)}catch(m){console.error("FreeShipping PDP | ",m)}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9fYmVoYXZpb3IvZnJlZS1zaGlwcGluZy9hbGwvZnJlZS1zaGlwcGluZy1wZHAubWluLmpzIl0sIm5hbWVzIjpbInJlaW5pdFppcGNvZGVDb29raWUiLCJaSVBDT0RFX0NPT0tJRSIsIndpbmRvdyIsImZyZWVkb20iLCJnZXRDb29raWUiLCJJU19ERVNLVE9QIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJGUkVFU0hJUFBJTkdfRUxJR0lCTEVfU0VTU0lPTiIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsIkdFVF9aSVBDT0RFX0lORk9fRU5BQkxFRCIsInVwZGF0ZUxvYWRpbmdTdGF0ZSIsInppcGNvZGVBUElzQWpheCIsIm5zUHViU3ViIiwicHViIiwiYm9keSIsInJlaW5pdENvb2tpZVNoaXBwaW5nRWxpZ2libGUiLCJzaG93RGVmYXVsdFN0YW1wIiwiSFRNTEJsb2NrIiwiYWRkIiwicmVtb3ZlIiwiY3JlYXRlU3RhbXBDb250YWluZXIiLCJQcm9kdWN0SFRNTEJsb2NrIiwicGFyZW50QmxvY2siLCJjb250YWluZXIiLCJjcmVhdGVFbGVtZW50IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiY3JlYXRlTmV3U3RhbXAiLCJ0YWciLCJpbm5lckhUTUwiLCJpY29uIiwiYXBwZW5kQ2hpbGQiLCJ0b2dnbGVGcmVlU2hpcHBpbmdTdGFtcCIsImRhdGEiLCJwcm9kdWN0SFRNTEJsb2NrIiwicHViU3ViRXZlbnQiLCJzdGF0ZVByb3BzIiwiYWN0aXZlU2t1SFRNTEVsZSIsImZyZWVTaGlwcGluZ0NvbnRhaW5lciIsImZyZWVTaGlwcGluZyIsIm5ld1N0YW1wIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJtYXAiLCJjYWxsIiwiZWxlIiwidmVyaWZ5U2hpcHBpbmdCeVppcGNvZGUiLCJidXlCdG4iLCJza3UiLCJzZWxsZXJJZCIsImdldEF0dHJpYnV0ZSIsInJlc3BvbnNlIiwib25RdWlja1ZpZXdSZXF1ZXN0IiwicXVpY2tWaWV3SFRNTEJsb2NrIiwidGVtcCIsImZpcnN0RWxlbWVudENoaWxkIiwib25DRkNJbnRlcmFjdGlvbiIsInNob3VsZFZlcmlmeUZyZWVTaGlwcGluZyIsIm9uTG9hZCIsImJ1eUJveEhUTUwiLCJzdWIiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLGNBQ0MsV0FnQ0MsUUFBU0EsS0FDUEMsRUFBaUJDLE9BQU9DLFFBQVFDLFVBQVUsV0EvQjVDLEdBQUlDLEdBQWFDLFNBQVNDLGNBQWMsUUFBUUMsVUFBVUMsU0FBUyxXQUNqRVIsRUFBaUJDLE9BQU9DLFFBQVFDLFVBQVUsV0FDMUNNLEVBQWdDQyxlQUFlQyxRQUFRLHdCQUlyREMsRUFBMkJQLFNBQVNDLGNBQWMsa0NBT2xETyxFQUFxQixXQUNuQkQsRUFDRVgsT0FBT2EsZ0JBQ1RiLE9BQU9DLFFBQVFhLFNBQVNDLElBQUksaUJBQWtCWCxTQUFTWSxNQUV2RGhCLE9BQU9hLGlCQUFrQixFQUczQmIsT0FBT0MsUUFBUWEsU0FBU0MsSUFBSSxpQkFBa0JYLFNBQVNZLE9Ba0J2REMsRUFBK0IsV0FDakNULEVBQWdDQyxlQUFlQyxRQUFRLHlCQU1yRFEsRUFBbUIsU0FBU0MsR0FDMUJBLEVBQVVkLGNBQWMsNEJBQTRCYyxFQUFVZCxjQUFjLDJCQUEyQkMsVUFBVWMsSUFBSSxRQUNySEQsRUFBVWQsY0FBYyxzQkFBc0JjLEVBQVVkLGNBQWMscUJBQXFCQyxVQUFVZSxPQUFPLFFBQzVHRixFQUFVZCxjQUFjLHVCQUF1QmMsRUFBVWQsY0FBYyxzQkFBc0JDLFVBQVVlLE9BQU8sUUFDOUdGLEVBQVVkLGNBQWMsNEJBQTRCYyxFQUFVZCxjQUFjLDJCQUEyQkMsVUFBVWUsT0FBTyxTQU0xSEMsRUFBdUIsU0FBVUMsR0FDbkMsR0FBK0NDLEdBQTNDQyxFQUFZckIsU0FBU3NCLGNBQWMsTUFXdkMsT0FWQUQsR0FBVW5CLFVBQVVjLElBQUksMEJBQ3BCakIsRUFDRnFCLEVBQWNELEVB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bUJqRCxjQUFjLG1DQUUxQzBDLEVBQXdCQyxFQUFRTSxFQUFvQix1Q0FRbERHLEVBQW1CLFNBQVVMLEVBQVVmLEVBQVlDLEdBQ3JELEdBQUlVLEdBQVFiLEVBQ1ZvQixFQUFPbkQsU0FBU3NCLGNBQWMsTUFDNUIwQixLQUNGRyxFQUFLekIsVUFBWXNCLEVBQ2pCakIsRUFBbUJvQixFQUFLQyxrQkFDeEJSLEVBQVNiLEVBQWlCOUIsY0FBYyxtREFHMUMwQyxFQUF3QkMsRUFBUWIsRUFBa0IsNEJBQTZCRSxFQUFZQyxJQU16Rm9CLEVBQTJCLFNBQVVDLEdBQ3ZDLEdBRUV2QixHQUZFWSxFQUFTNUMsU0FBU0MsY0FBYyxrREFDbEN1RCxFQUFheEQsU0FBU0MsY0FBYyxXQUdqQ3NELEtBQ0h2QixFQUFjLDZCQUdoQlcsRUFBd0JDLEVBQVFZLEVBQVl4QixHQUc5QyxLQUVNaEMsU0FBU0MsY0FBYyxRQUFRQyxVQUFVQyxTQUFTLGlCQUNwRG1ELEdBQXlCLEdBRzNCMUQsT0FBT0MsUUFBUWEsU0FBUytDLElBQUksZ0NBQWlDUixHQUM3RHJELE9BQU9DLFFBQVFhLFNBQVMrQyxJQUFJLHNDQUF1Q0osR0FDbkV6RCxPQUFPQyxRQUFRYSxTQUFTK0MsSUFBSSxnQ0FBaUNILEdBQzdEMUQsT0FBT0MsUUFBUWEsU0FBUytDLElBQUksNEJBQTZCakQsR0FDekRaLE9BQU9DLFFBQVFhLFNBQVMrQyxJQUFJLHVCQUF3Qi9ELEdBQ3BERSxPQUFPQyxRQUFRYSxTQUFTK0MsSUFBSSxnQ0FBaUM1QyxHQUU3RCxNQUFNNkMsR0FDTkMsUUFBUUMsTUFBTSxzQkFBdUJGIiwiZmlsZSI6Il9yZWZhY3RvcmluZy9fY29tcG9uZW50cy9fYmVoYXZpb3IvZnJlZS1zaGlwcGluZy9hbGwvZnJlZS1zaGlwcGluZy1wZHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBJU19ERVNLVE9QID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmNsYXNzTGlzdC5jb250YWlucygnZGVza3RvcCcpLFxuICAgIFpJUENPREVfQ09PS0lFID0gd2luZG93LmZyZWVkb20uZ2V0Q29va2llKCd6aXBjb2RlJyksXG4gICAgRlJFRVNISVBQSU5HX0VMSUdJQkxFX1NFU1NJT04gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdlbGlnaWJsZUZyZWVTaGlwcGluZycpO1xuXG4gIC8vIHRoaXMgdmFyIGNoZWNrIGlmIFtnZXQtemlwY29kZS1pbmZvXSBvciBbZnJlZS1zaGlwcGluZ10gaXMgZW5hYmxlZCwgYmVjYXVzZSB0aGUgW2luc2VydC16aXAtY29kZV0gaW50ZXJhY3Qgd2l0aCBib3RoIEFQSXNcbiAgLy8gaXQgd2FzIG5lZWQgdHdvIHN5bmMgdGhlIG5zTG9hZGluZyBzdGF0ZSBvbiB0aGUgY2FsbGJhY2sgZnVuYyBvZiBib3RoIGZlYXR1cmVzXG4gIHZhciBHRVRfWklQQ09ERV9JTkZPX0VOQUJMRUQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uW2RhdGEtZ2V0LXppcGNvZGUtaW5mb10nKTtcblxuICAvKipcbiAgICogQG1ldGhvZCB1cGRhdGVMb2FkaW5nU3RhdGVcbiAgICogRnVuY3Rpb24gdG8gc3luYyB0aGUgbnNMb2FkaW5nIHN0YXRlIG9uIHRoZSBjYWxsYmFjayBmdW5jIG9mIHdoZW4gY2hhbmdlIHRoZSB6aXBjb2RlIG9uIFtpbnNlcnQtemlwLWNvZGVdXG4gICAqIFtmcmVlLXNoaXBwaW5nXSBhbmQgW2dldC16aXBjb2RlLWluZm9dIHJlc3BvbmRzIG9uIHppcGNvZGUgY29va2llIGNoYW5nZXNcbiAgICovXG4gIHZhciB1cGRhdGVMb2FkaW5nU3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKEdFVF9aSVBDT0RFX0lORk9fRU5BQkxFRCkge1xuICAgICAgaWYgKHdpbmRvdy56aXBjb2RlQVBJc0FqYXgpIHtcbiAgICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCduc0xvYWRpbmcuaGlkZScsIGRvY3VtZW50LmJvZHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnppcGNvZGVBUElzQWpheCA9IHRydWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YignbnNMb2FkaW5nLmhpZGUnLCBkb2N1bWVudC5ib2R5KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgcmVpbml0WmlwY29kZUNvb2tpZSBjaGFuZ2VDb2xvciBjaGFuZ2VGbGF2b3JcbiAgICogRWFjaCBmdW5jdGlvbnMgd2F0Y2ggcmVzcGVjdGl2ZSBjaGFuZ2VzIG9mIGNvbG9yLCBmbGF2b3IgYW5kIHNpemVcbiAgICogQHBhcmFtICB7fVxuICAgKi9cbiAgZnVuY3Rpb24gcmVpbml0WmlwY29kZUNvb2tpZSgpIHtcbiAgICBaSVBDT0RFX0NPT0tJRSA9IHdpbmRvdy5mcmVlZG9tLmdldENvb2tpZSgnemlwY29kZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgcmVpbml0Q29va2llU2hpcHBpbmdFbGlnaWJsZVxuICAgKiBHZXQgY29va2llIGJ5IG5hbWVcbiAgICogQHJldHVybiB7c3RyaW5nfSBbemlwY29kZV1cbiAgICovXG4gIHZhciByZWluaXRDb29raWVTaGlwcGluZ0VsaWdpYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIEZSRUVTSElQUElOR19FTElHSUJMRV9TRVNTSU9OID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnZWxpZ2libGVGcmVlU2hpcHBpbmcnKTtcbiAgfTtcblxuICAvKipcbiAgKiBAbWV0aG9kIHNob3dEZWZhdWx0U3RhbXBcbiAgKi9cbiAgdmFyIHNob3dEZWZhdWx0U3RhbXAgPSBmdW5jdGlvbihIVE1MQmxvY2spIHtcbiAgICBpZiAoSFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5uZXctZnJlZXNoaXBwaW5nLXN0YW1wJykpIEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcubmV3LWZyZWVzaGlwcGluZy1zdGFtcCcpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICBpZiAoSFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktZ2lmJykpIEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWdpZicpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICBpZiAoSFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktaWNvbicpKSBIVE1MQmxvY2sucXVlcnlTZWxlY3RvcignLmZyZWVEZWxpdmVyeS1pY29uJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICAgIGlmIChIVE1MQmxvY2sucXVlcnlTZWxlY3RvcignLmZyZWVEZWxpdmVyeS1jb250YWluZXInKSkgSFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktY29udGFpbmVyJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZScpO1xuICB9O1xuXG4gIC8qKlxuICAqIEBtZXRob2QgY3JlYXRlU3RhbXBDb250YWluZXJcbiAgKi9cbiAgdmFyIGNyZWF0ZVN0YW1wQ29udGFpbmVyID0gZnVuY3Rpb24gKFByb2R1Y3RIVE1MQmxvY2spIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksIHBhcmVudEJsb2NrO1xuICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmcmVlRGVsaXZlcnktY29udGFpbmVyJyk7XG4gICAgaWYgKElTX0RFU0tUT1ApIHtcbiAgICAgIHBhcmVudEJsb2NrID0gUHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuc3RhbXAtZnJlZS1kZWxpdmVyeScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJlbnRCbG9jayA9IFByb2R1Y3RIVE1MQmxvY2sucXVlcnlTZWxlY3RvcignLnByb2R1Y3QtcHJpY2UnKTtcbiAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtYicpO1xuICAgIH1cbiAgICBpZihwYXJlbnRCbG9jaykge1xuICAgICAgcGFyZW50QmxvY2suaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgY29udGFpbmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfTtcblxuICAvKipcbiAgKiBAbWV0aG9kIGNyZWF0ZU5ld1N0YW1wXG4gICovXG4gIHZhciBjcmVhdGVOZXdTdGFtcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25ldy1mcmVlc2hpcHBpbmctc3RhbXAnKTtcblxuICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgdGFnLmNsYXNzTGlzdC5hZGQoJ3RhZy1zaGlwcGluZycpO1xuICAgIHRhZy5pbm5lckhUTUwgPSBcIkZSRVRFIEdSw4FUSVNcIjtcblxuICAgIHZhciBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgIGljb24uY2xhc3NMaXN0LmFkZCgnbnMtaWNvbicpO1xuICAgIGljb24uY2xhc3NMaXN0LmFkZCgnbnMtaWNvbi1mcmVlLXNoaXBwaW5nJyk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHRhZyk7XG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfTtcblxuICAvKipcbiAqIEBtZXRob2QgdG9nZ2xlRnJlZVNoaXBwaW5nU3RhbXBcbiAqL1xuICB2YXIgdG9nZ2xlRnJlZVNoaXBwaW5nU3RhbXAgPSBmdW5jdGlvbiAoZGF0YSwgcHJvZHVjdEhUTUxCbG9jaywgcHViU3ViRXZlbnQsIHN0YXRlUHJvcHMsIGFjdGl2ZVNrdUhUTUxFbGUpIHtcbiAgICB2YXIgZnJlZVNoaXBwaW5nQ29udGFpbmVyID0gcHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWNvbnRhaW5lcicpO1xuICAgIGlmICghZnJlZVNoaXBwaW5nQ29udGFpbmVyKSB7XG4gICAgICBmcmVlU2hpcHBpbmdDb250YWluZXIgPSBjcmVhdGVTdGFtcENvbnRhaW5lcihwcm9kdWN0SFRNTEJsb2NrKTtcbiAgICB9XG5cbiAgICAvLyBERUZBVUxUXG4gICAgaWYoIWRhdGEpIHtcbiAgICAgIHNob3dEZWZhdWx0U3RhbXAocHJvZHVjdEhUTUxCbG9jayk7XG5cbiAgICAvLyBIYXMgRnJlZSBTaGlwcGluZ1xuICAgIH0gZWxzZSBpZiAoZGF0YS5mcmVlU2hpcHBpbmcpIHtcbiAgICAgIGlmIChwcm9kdWN0SFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5mcmVlRGVsaXZlcnktZ2lmJykpIHByb2R1Y3RIVE1MQmxvY2sucXVlcnlTZWxlY3RvcignLmZyZWVEZWxpdmVyeS1naWYnKS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICBpZiAocHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWljb24nKSkgcHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWljb24nKS5jbGFzc0xpc3QuYWRkKCdoaWRlJyk7XG4gICAgICBpZiAoIWZyZWVTaGlwcGluZ0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubmV3LWZyZWVzaGlwcGluZy1zdGFtcCcpKSB7XG4gICAgICAgIHZhciBuZXdTdGFtcCA9IGNyZWF0ZU5ld1N0YW1wKCk7XG5cbiAgICAgICAgZnJlZVNoaXBwaW5nQ29udGFpbmVyLmFwcGVuZENoaWxkKG5ld1N0YW1wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZyZWVTaGlwcGluZ0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubmV3LWZyZWVzaGlwcGluZy1zdGFtcCcpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICAgIGZyZWVTaGlwcGluZ0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJyk7XG5cbiAgICAvLyBET0VTIE5PVCBIQVZFIEZyZWUgU2hpcHBpbmdcbiAgICB9IGVsc2UgaWYgKCFkYXRhLmZyZWVTaGlwcGluZykge1xuICAgICAgaWYgKGZyZWVTaGlwcGluZ0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgW10ubWFwLmNhbGwoZnJlZVNoaXBwaW5nQ29udGFpbmVyLmNoaWxkcmVuLCBmdW5jdGlvbiAoZWxlKSB7XG4gICAgICAgICAgZWxlLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHB1YlN1YkV2ZW50KSB7XG4gICAgICBpZiAocHViU3ViRXZlbnQgIT09ICdzaGlwcGluZ0VsaWdpYmxlLnJlaW5pdGVkJykgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCduc0xvYWRpbmcuaGlkZScsIGRvY3VtZW50LmJvZHkpO1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKHB1YlN1YkV2ZW50LCBwcm9kdWN0SFRNTEJsb2NrLCBzdGF0ZVByb3BzLCBhY3RpdmVTa3VIVE1MRWxlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgdmVyaWZ5U2hpcHBpbmdCeVppcGNvZGVcbiAgICovXG4gIHZhciB2ZXJpZnlTaGlwcGluZ0J5WmlwY29kZSA9IGZ1bmN0aW9uIChidXlCdG4sIHByb2R1Y3RIVE1MQmxvY2ssIHB1YlN1YkV2ZW50LCBzdGF0ZVByb3BzLCBhY3RpdmVTa3VIVE1MRWxlKSB7XG4gICAgdmFyIHNrdSwgc2VsbGVySWQ7XG5cbiAgICBpZiAoYnV5QnRuKSB7XG4gICAgICBza3UgPSBidXlCdG4uZ2V0QXR0cmlidXRlKCdkYXRhLXNrdScpO1xuICAgICAgc2VsbGVySWQgPSBidXlCdG4uZ2V0QXR0cmlidXRlKCdkYXRhLXNlbGxlcicpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93RGVmYXVsdFN0YW1wKHByb2R1Y3RIVE1MQmxvY2spO1xuICAgICAgaWYgKHB1YlN1YkV2ZW50KSB7XG4gICAgICAgIGlmIChwdWJTdWJFdmVudCAhPT0gJ3NoaXBwaW5nRWxpZ2libGUucmVpbml0ZWQnKSB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ25zTG9hZGluZy5oaWRlJywgZG9jdW1lbnQuYm9keSk7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YihwdWJTdWJFdmVudCwgcHJvZHVjdEhUTUxCbG9jaywgc3RhdGVQcm9wcywgYWN0aXZlU2t1SFRNTEVsZSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRWxlZ2libGUgdG8gRnJlZSBTaGlwcGluZ1xuICAgIGlmICgoRlJFRVNISVBQSU5HX0VMSUdJQkxFX1NFU1NJT04gPT09ICd0cnVlJyB8fCAodHlwZW9mIEZSRUVTSElQUElOR19FTElHSUJMRV9TRVNTSU9OID09PSAnc3RyaW5nJyAmJiBGUkVFU0hJUFBJTkdfRUxJR0lCTEVfU0VTU0lPTiAhPT0gJ2ZhbHNlJykpICYmIHNrdSAmJiBzZWxsZXJJZCAmJiBaSVBDT0RFX0NPT0tJRSkge1xuICAgICAgd2luZG93LmZyZWVkb20ubnNQdWJTdWIucHViKCd2ZXJpZnlGcmVlU2hpcHBpbmcnLCBza3UsIHNlbGxlcklkLCBaSVBDT0RFX0NPT0tJRSwgZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgIHRvZ2dsZUZyZWVTaGlwcGluZ1N0YW1wKHJlc3BvbnNlLCBwcm9kdWN0SFRNTEJsb2NrLCBwdWJTdWJFdmVudCwgc3RhdGVQcm9wcywgYWN0aXZlU2t1SFRNTEVsZSk7XG4gICAgICB9KTtcblxuICAgIH0gIGVsc2Uge1xuICAgICAgLy8gTk9UIEVsZWdpYmxlIHRvIEZyZWUgU2hpcHBpbmdcbiAgICAgIGlmIChGUkVFU0hJUFBJTkdfRUxJR0lCTEVfU0VTU0lPTiA9PT0gJ2ZhbHNlJykge1xuICAgICAgICBpZiAocHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWNvbnRhaW5lcicpKSB7XG4gICAgICAgICAgcHJvZHVjdEhUTUxCbG9jay5xdWVyeVNlbGVjdG9yKCcuZnJlZURlbGl2ZXJ5LWNvbnRhaW5lcicpLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAvLyBEZWZhdWx0XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodHlwZW9mIEZSRUVTSElQUElOR19FTElHSUJMRV9TRVNTSU9OID09PSAnc3RyaW5nJykgc2hvd0RlZmF1bHRTdGFtcChwcm9kdWN0SFRNTEJsb2NrKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHB1YlN1YkV2ZW50KSB7XG4gICAgICAgIGlmIChwdWJTdWJFdmVudCAhPT0gJ3NoaXBwaW5nRWxpZ2libGUucmVpbml0ZWQnKSB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5wdWIoJ25zTG9hZGluZy5oaWRlJywgZG9jdW1lbnQuYm9keSk7XG4gICAgICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnB1YihwdWJTdWJFdmVudCwgcHJvZHVjdEhUTUxCbG9jaywgc3RhdGVQcm9wcywgYWN0aXZlU2t1SFRNTEVsZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIG9uUXVpY2tWaWV3UmVxdWVzdFxuICAgKiBNaWRkbGUgZnVuY3Rpb24gY2FsbGVkIGJ5IFF1aWNrVmlldyBSZXF1ZXN0LCBhbmQgc2VuZCBhIHJlcXVlc3QgdG8gRnJlZVNoaXBwaW5nIEFQSVxuICAgKiBAcGFyYW0gIHt9XG4gICAqL1xuICB2YXIgb25RdWlja1ZpZXdSZXF1ZXN0ID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgdmFyIGJ1eUJ0biwgcXVpY2tWaWV3SFRNTEJsb2NrLFxuICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgdGVtcC5pbm5lckhUTUwgPSByZXNwb25zZTtcbiAgICBxdWlja1ZpZXdIVE1MQmxvY2sgPSB0ZW1wLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIHF1aWNrVmlld0hUTUxCbG9jay5jbGFzc0xpc3QuYWRkKCdpcy1xdWlja3ZpZXcnKTtcbiAgICBidXlCdG4gPSBxdWlja1ZpZXdIVE1MQmxvY2sucXVlcnlTZWxlY3RvcignLmJ1eS1idXR0b24tbm93LmJ1dHRvbi1uby1mbG9hdCcpO1xuXG4gICAgdmVyaWZ5U2hpcHBpbmdCeVppcGNvZGUoYnV5QnRuLCBxdWlja1ZpZXdIVE1MQmxvY2ssICdyZXR1cm5DaGVja2VkRnJlZVNoaXBwaW5nUXVpY2tWaWV3Jyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEBtZXRob2Qgb25DRkNJbnRlcmFjdGlvblxuICAgKiBNaWRkbGUgZnVuY3Rpb24gY2FsbGVkIGJ5IGNvbG9yRmxhdm9yU2l6ZSBjaGFuZ2VzLCBhbmQgc2VuZCBhIHJlcXVlc3QgdG8gRnJlZVNoaXBwaW5nIEFQSVxuICAgKiBAcGFyYW0gIHt9XG4gICAqL1xuICB2YXIgb25DRkNJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChyZXNwb25zZSwgc3RhdGVQcm9wcywgYWN0aXZlU2t1SFRNTEVsZSkge1xuICAgIHZhciBidXlCdG4sIHByb2R1Y3RIVE1MQmxvY2ssXG4gICAgICB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaWYgKHJlc3BvbnNlKSB7XG4gICAgICB0ZW1wLmlubmVySFRNTCA9IHJlc3BvbnNlO1xuICAgICAgcHJvZHVjdEhUTUxCbG9jayA9IHRlbXAuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICBidXlCdG4gPSBwcm9kdWN0SFRNTEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5idXktYnV0dG9uLW5vdy5idXR0b24tbm8tZmxvYXRbZGF0YS1za3UqPVwiLVwiXScpO1xuICAgIH1cblxuICAgIHZlcmlmeVNoaXBwaW5nQnlaaXBjb2RlKGJ1eUJ0biwgcHJvZHVjdEhUTUxCbG9jaywgJ3JldHVybkNoZWNrZWRGcmVlU2hpcHBpbmcnLCBzdGF0ZVByb3BzLCBhY3RpdmVTa3VIVE1MRWxlKTtcbiAgfTtcblxuICAvKipcbiAgICogQG1ldGhvZCBzaG91bGRWZXJpZnlGcmVlU2hpcHBpbmdcbiAgICovXG4gIHZhciBzaG91bGRWZXJpZnlGcmVlU2hpcHBpbmcgPSBmdW5jdGlvbiAob25Mb2FkKSB7XG4gICAgdmFyIGJ1eUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXktYnV0dG9uLW5vdy5idXR0b24tbm8tZmxvYXRbZGF0YS1za3UqPVwiLVwiXScpLFxuICAgICAgYnV5Qm94SFRNTCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNidXktYm94JyksXG4gICAgICBwdWJTdWJFdmVudDtcblxuICAgIGlmICghb25Mb2FkKSB7XG4gICAgICBwdWJTdWJFdmVudCA9ICdzaGlwcGluZ0VsaWdpYmxlLnJlaW5pdGVkJztcbiAgICB9XG5cbiAgICB2ZXJpZnlTaGlwcGluZ0J5WmlwY29kZShidXlCdG4sIGJ1eUJveEhUTUwsIHB1YlN1YkV2ZW50KTtcbiAgfTtcblxuICB0cnkge1xuICAgIC8vIEluaXQgdmVyaWZ5U2hpcHBpbmdCeVppcGNvZGUgZnVuY3Rpb24gYW5kIGxpc3RlbiBldmVudHMgZm9yIEZyZWVTaGlwcGluZyBBUEkgaW4gUHJvZHVjdCBQYWdlc1xuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9kdWN0LXBhZ2UnKSkge1xuICAgICAgc2hvdWxkVmVyaWZ5RnJlZVNoaXBwaW5nKHRydWUpO1xuICAgIH1cblxuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YigncXVpY2tWaWV3UmVxdWVzdC5mcmVlU2hpcHBpbmcnLCBvblF1aWNrVmlld1JlcXVlc3QpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignY2hhbmdlLkNvbG9yRmxhdm9yU2l6ZS5mcmVlU2hpcHBpbmcnLCBvbkNGQ0ludGVyYWN0aW9uKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ3JldHVyblNoaXBwaW5nRWxpZ2liaWxpdHkuUERQJywgc2hvdWxkVmVyaWZ5RnJlZVNoaXBwaW5nKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ3NoaXBwaW5nRWxpZ2libGUucmVpbml0ZWQnLCB1cGRhdGVMb2FkaW5nU3RhdGUpO1xuICAgIHdpbmRvdy5mcmVlZG9tLm5zUHViU3ViLnN1YignemlwY29kZUNvb2tpZS5yZWluaXQnLCByZWluaXRaaXBjb2RlQ29va2llKTtcbiAgICB3aW5kb3cuZnJlZWRvbS5uc1B1YlN1Yi5zdWIoJ3NoaXBwaW5nRWxpZ2libGVDb29raWUucmVpbml0JywgcmVpbml0Q29va2llU2hpcHBpbmdFbGlnaWJsZSk7XG5cbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGcmVlU2hpcHBpbmcgUERQIHwgJywgZXJyKTtcbiAgfVxufSgpKTtcbiJdfQ==
